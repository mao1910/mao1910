<!-- VISITOR BADGE -->
<!-- https://github.com/hehuapei/visitor-badge -->

<img align="right" src="https://visitor-badge.laobi.icu/badge?page_id=mao1910.mao1910&left_color=%2379DAF9&right_color=%23FE6E96" />


<!-- TYPING SVG -->
<!-- https://github.com/DenverCoder1/readme-typing-svg -->

<h1 align="center">
    <img src="https://readme-typing-svg.herokuapp.com/?font=Righteous&size=35&center=true&vCenter=true&width=500&height=70&color=FE6E96&font=poppins&duration=5000&lines=Hi+There!+👋;+I'm+Mao!;" />
</h1>

<br/>

<!-- CODE/TERMINAL ABOUT ME -->
<h1 align="center">
<img src="./assets/terminal-5.gif" alt="Terminal" />
</h1>

<br/><br/><br/>


<!-- TECHNOLOGIES LOGOS -->
<!-- https://github.com/tandpfun/skill-icons -->

<h2 align="center">💻 Languages / Frameworks / Tools ⚒️</h2>
<div align="center">
    <img src="https://skillicons.dev/icons?i=javascript,typescript,angular,react,html,css,scss,bootstrap,cs,java,spring" />
    <img src="https://skillicons.dev/icons?i=flutter,firebase,supabase,mysql,git,github,gitlab,vscode,idea,maven,figma" />
</div>

<br/><br/><br/>


<!-- CONTRIBUTIONS SNAKE GAME -->
<!-- https://github.com/Platane/snk -->

<div align="center">
  <h2> My Contributionssss🐍 </h2>
  <br>
  <img alt="contributions-eating Snake" src="https://raw.githubusercontent.com/mao1910/mao1910/output/github-contribution-grid-snake.svg" />

  <!-- Four lines below suggested by Planate for Dark mode-->
  <picture>
  <source media="(prefers-color-scheme: dark)" srcset="github-snake-dark.svg" />
  <source media="(prefers-color-scheme: light)" srcset="github-snake.svg" />
  </picture>
  
  <br/><br/><br/>
</div>


<!-- GITHUB STATS -->
<!-- https://github.com/DenverCoder1/github-readme-streak-stats -->
<!-- https://github.com/anuraghazra/github-readme-stats -->
<!-- https://github-readme-stats-mao1910.vercel.app/ My own Vercel deployment-->

<h2 align="center"> Stats📝 </h2>
  <br>
<div align=center>
  <img width=429 src="https://github-readme-stats-mao1910.vercel.app/api?username=mao1910&count_private=true&show_icons=true&theme=dracula&rank_icon=github&hide=contribs&border_radius=10&border_color=79DAF9" alt="github stats"/>
  <img width=396 src="https://streak-stats.demolab.com/?user=mao1910&count_private=true&theme=dracula&currStreakNum=79DAF9&currStreakLabel=FE6E96&border_radius=10&border=79DAF9" alt="streak stats"/>
  <br/>
  <img src="https://github-readme-stats-mao1910.vercel.app/api/top-langs/?username=mao1910&layout=compact&theme=dracula&border_radius=10&size_weight=0.5&count_weight=0.5&border_color=79DAF9" alt="languages stats" />
</div>

<br/><br/><br/>


<!-- FOOTER -->
<!-- https://github.com/DenverCoder1/readme-typing-svg -->
<!-- https://readme-typing-svg.demolab.com/demo/ -->

<a href="https://git.io/typing-svg"><img src="https://readme-typing-svg.demolab.com?font=Poppins&pause=1000&color=FE6E96&width=535&lines=Thanks+for+dropping+by!;Feel+free+to+check+any+of+the+Socials+below+%F0%9F%91%87;Or+the+Joke+Of+The+Day+if+you're+down+for+a+giggle+%F0%9F%98%9D;Hope+to+see+you+again+%F0%9F%91%8A;Uh%3F+You're+still+here%3F;Well...+I'm+running+out+of+things+to+say...;Tell+you+what%2C+due+to+your+effort+and+perseverance%2C;I+shall+present+you+with+a+short+poem%3A;%22To+code%2C+or+not+to+code%2C+that+is+the+question%3A;Whether+'tis+nobler+in+the+IDE+to+debug;The+errors+and+issues+of+outrageous+software%2C;Or+to+take+up+the+keyboard+against+a+sea+of+bugs;And+by+coding%2C+end+them.%22;by+William+Shakespeare%2C+probably.+;Pretty+sure+that's+Hamlet's.;Alrighty%2C+this+has+been+fun.;But+I'll+restart+the+loop+now...+see+ya+soon!" alt="Typing SVG" /></a>


<!--  SOCIAL NETWORKS -->
<!-- https://github.com/alexandresanlim/Badges4-README.md-Profile -->

  <div> 
    <a href="https://www.linkedin.com/" target="_blank"><img src="https://img.shields.io/badge/-LinkedIn-%230077B5?style=for-the-badge&logo=linkedin&logoColor=white" target="_blank"></a> <!-- ADD LINKEDIN PROFILE -->
    <a href = "https://www.google.com"><img src="https://img.shields.io/badge/Portfolio-4285F4?style=for-the-badge&logo=Google-chrome&logoColor=white" target="_blank"></a> <!-- ADD PORTFOLIO WEBSITE -->
    <a href="https://discord.gg" target="_blank"><img src="https://img.shields.io/badge/Discord-7289DA?style=for-the-badge&logo=discord&logoColor=white" target="_blank"></a> <!-- ADD DISCORD -->
    <a href = "mao1910dev@gmail.com"><img src="https://img.shields.io/badge/Gmail-D14836?style=for-the-badge&logo=gmail&logoColor=white" target="_blank"></a>
  </div>


<!-- SPOTIFY PLAYING-->
<!-- https://github.com/novatorem/novatorem -->
<!-- https://spotify-now-playing-novatorem-git-main-mao1910.vercel.app/ My own Vercel deployment-->

[<img width=438px src="https://spotify-now-playing-git-main-mao1910.vercel.app//api/spotify/?border_color=FE6E96" alt="Mao Spotify Now Playing" />](https://open.spotify.com/user/31542et242zglhf42ydrtqgvuvde)


<!-- JOKE OF THE DAY -->
<!-- https://github.com/ABSphreak/readme-jokes -->
<!-- https://readme-jokes-git-master-mao1910.vercel.app/ My own Vercel deployment-->

<details>
<summary>I've got a Joke for you. Wanna hear it? 🙈</summary>

<br/>

 <tr>
 <td style="padding-top:4px"><img src = "https://readme-jokes-git-master-mao1910.vercel.app/api?&theme=dracula"></td>
 </tr>

</details>


<!-- ACTIVITY -->
<!-- https://github.com/jamesgeorge007/github-activity-readme -->


<details>
<summary>✍️ Activity</summary>

<br/>
<!-- START_SECTION:activity -->
<!--END_SECTION:activity-->

</details>


<!-- RSS FEED -->
<!-- https://github.com/gautamkrishnar/blog-post-workflow -->


<details>
<summary>📕 &nbsp;RSS feed</summary>

<br/>

<!-- BLOG-POST-LIST:START -->
 #### - [Getting Started with SMS Notifications using Africas Talking and GitHub Actions🐙](https://dev.to/ken_mwaura1/getting-started-with-sms-notifications-using-africas-talking-and-github-actions-5de0) 
 <details><summary>Article</summary> <p>New month, New Tutorial 🚀. In the next few weeks, I will be writing a series of tutorials on how to send SMS notifications using Africas Talking and GitHub Actions. This is the first tutorial in the series.</p>

<h2>
  
  
  Introduction 💫
</h2>

<p>GitHub Actions allows you to create workflows that automate your CI/CD process. Africas Talking provides a simple and reliable API to send SMS notifications to your users.</p>

<p>This tutorial I will show you how to send SMS notifications using Africas Talking and GitHub Actions. We will be using the Africas Talking SMS API to send SMS notifications to a phone number of your choice. We will be using GitHub Actions to automate the process of sending the SMS notifications.</p>

<p>The diagram below shows a highlevel overview of the workflow we will be creating:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--kawmV8HU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/xrf9ciqpz253glukdslb.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--kawmV8HU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/xrf9ciqpz253glukdslb.png" alt="Workflow diagram" width="800" height="390"></a></p>

<h2>
  
  
  Benefits 🦸
</h2>

<ul>
<li>Get real-time SMS alerts for workflow results.</li>
<li>No need to constantly check GitHub for status.</li>
<li>SMS is more convenient compared to email notifications.</li>
</ul>

<h2>
  
  
  Prerequisites
</h2>

<ul>
<li>A GitHub account with a repository (Alternatively create a new repo).</li>
<li>An Africas Talking account and API keys.</li>
</ul>

<h2>
  
  
  Getting Started 🤩
</h2>

<h3>
  
  
  Steps 🚶
</h3>

<p>The steps below assume you have a GitHub account and a repository. If you don’t have a repository, you can create one by following the steps <a href="https://help.github.com/en/github/getting-started-with-github/create-a-repo">here</a>. Once you have a repository, follow the steps below to get started.</p>

<ul>
<li>Get Africas Talking API keys 🔑:</li>
</ul>

<ol>
<li>Sign up on <a href="https://africastalking.com/">AfricasTalking.com</a>
</li>
<li>Get your username and API key from the SMS dashboard. Note you will be prompted for your password. Once the key is created and displayed copy and paste it elsewhere as they usually create a new one each time. </li>
</ol>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--QsllITeM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9t49hj51ar2p5n79ho9m.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--QsllITeM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9t49hj51ar2p5n79ho9m.png" alt="Settings page" width="800" height="300"></a></p>

<ul>
<li>Add secrets to GitHub repository(We will use these secrets in our workflow):</li>
</ul>

<ol>
<li>In your repo, go to <strong>Settings &gt; Secrets &gt; Actions</strong>
</li>
<li>Add a secret <code>AT_USERNAME</code> with your username.</li>
<li>Add a secret <code>AT_API_KEY</code> with your API key.</li>
<li>Add a secret <code>toPhoneNumber</code> with the phone number you want to send the SMS to. (Format: +2547XXXXXXXX)</li>
</ol>

<p>Once you have added the secrets, your secrets page should look like this:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--DN7tCJAT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4l5cu3gnqklcyq087qtw.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--DN7tCJAT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4l5cu3gnqklcyq087qtw.png" alt="Secrets dashboard" width="800" height="307"></a></p>

<h2>
  
  
  Methods of running code on GitHub Actions 🐙
</h2>

<p>There are two ways to we can accomplish running our code on GitHub Actions. We can either:</p>

<ol>
<li><p>create a new workflow.</p></li>
<li><p>use an existing workflow and add the code as a step.</p></li>
</ol>

<p>Lets explore both methods.</p>

<h3>
  
  
  Method 1: Create a new workflow
</h3>

<h2>
  
  
  - Create a new workflow:
</h2>

<p><strong>If you are using the GitHub website:</strong></p>

<ul>
<li>In your repo, go to <strong>Actions &gt; New Workflow</strong>
</li>
<li>Select <strong>Set up a workflow yourself</strong>
</li>
<li>Name your workflow</li>
</ul>

<p><strong>If you are working in your IDE eg VSCode</strong></p>

<ul>
<li>In your GitHub repository, create a .github/workflows directory if it doesn't already exist.</li>
<li>Inside the .github/workflows directory, create a YAML file (e.g., sms-notification.yml) to define your GitHub Actions workflow.</li>
<li>Add the following code:
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight yaml"><code><span class="na">name</span><span class="pi">:</span> <span class="s">Send SMS Notification</span>
<span class="na">on</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">push</span><span class="pi">]</span>
<span class="na">branches</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">main</span><span class="pi">]</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">send_sms</span><span class="pi">:</span>
<span class="err"> </span><span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
 <span class="na">steps</span><span class="pi">:</span>
   <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Send SMS Notification</span>
  <span class="na">uses</span><span class="pi">:</span> <span class="s">alphaolomi/actions-africastalking@main</span>
    <span class="s">with</span><span class="err">:</span>
      <span class="na">fromPhoneNumber</span><span class="pi">:</span> <span class="s1">'</span><span class="s">INFO'</span>   <span class="c1"># or  ${{ secrets.fromPhoneNumber }}</span>
      <span class="na">toPhoneNumber</span><span class="pi">:</span> <span class="s">${{ secrets.toPhoneNumber }}</span>
      <span class="na">message</span><span class="pi">:</span> <span class="s">${{ github.event_name }} on ${{ github.repository }} by ${{ github.actor }} has ${{github.event.workflow_run.conclusion}}. Check it out at ${{ github.event.workflow_run.url }}</span>
    <span class="na">env</span><span class="pi">:</span>
      <span class="na">AT_API_KEY</span><span class="pi">:</span> <span class="s">${{ secrets.AT_API_KEY }}</span>
      <span class="na">AT_USERNAME</span><span class="pi">:</span> <span class="s">${{ secrets.AT_USERNAME }}</span>
</code></pre>

</div>



<p>Lets break down the code above:</p>

<ul>
<li>
<code>name</code> is the name of the workflow. You can name it anything you want.</li>
<li>
<code>on</code> is the event that triggers the workflow. In this case, we want the workflow to be triggered when code is pushed to the main branch.</li>
<li>
<code>jobs</code> is a collection of steps that run sequentially. In this case, we have one job called <code>send_sms</code>.</li>
<li>
<code>runs-on</code> is the type of machine the job runs on. In this case, we are using the latest version of Ubuntu.</li>
<li>
<code>steps</code> is a collection of tasks that will be executed as part of the job. In this case, we have one step called <code>Send SMS Notification</code>.</li>
<li>
<code>uses</code> is the action that will be executed. In this case, we are using the <code>alphaolomi/actions-africastalking</code> action.</li>
<li>
<code>with</code> is the input parameters for the action. In this case, we are passing the <code>fromPhoneNumber</code>, <code>toPhoneNumber</code> and <code>message</code> parameters.</li>
<li>
<code>env</code> is the environment variables that will be used by the action. In this case, we are passing the <code>AT_API_KEY</code> and <code>AT_USERNAME</code> variables.</li>
<li><p><code>secrets</code> is the GitHub secrets that will be used by the action. In this case, we are passing the <code>toPhoneNumber</code>, <code>AT_API_KEY</code> and <code>AT_USERNAME</code> secrets.</p></li>
<li><p>Commit the changes and push to GitHub. This should  trigger the workflow.</p></li>
</ul>

<p>There is however a different way to add the code for sending the text. This involves using the Africas Talking SDKs. The SDKs are available in different languages including: Python, Node, PHP etc. You can find the SDKs <a href="https://developers.africastalking.com/sdks">here.</a></p>

<p>Now lets look at an example using the Python SDK 🐍:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight yaml"><code><span class="na">name</span><span class="pi">:</span> <span class="s">Send SMS Notification</span>
<span class="na">on</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">push</span><span class="pi">]</span>
<span class="na">branches</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">main</span><span class="pi">]</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">send_sms</span><span class="pi">:</span>
<span class="err"> </span><span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
 <span class="na">steps</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install Africa's Talking SDK</span>
   <span class="na">run</span><span class="pi">:</span> <span class="s">pip install africastalking</span>

  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Send SMS notification</span>
  <span class="na">env</span><span class="pi">:</span>
    <span class="na">TO</span><span class="pi">:</span> <span class="s">${{ secrets.toPhoneNumber }}</span>
  <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span> 
    <span class="s">from africastalking.SMS import SMS</span>

    <span class="s">sms = SMS(username=${{ secrets.AT_USERNAME }}, api_key=${{ secrets.AT_API_KEY }}) </span>

    <span class="s">response = sms.send(message="GitHub workflow completed!", recipients=[TO])</span>

</code></pre>

</div>



<p>Lets break down the code above:</p>

<ul>
<li>
<code>name</code> is the name of the workflow. You can name it anything you want.</li>
<li>
<code>on</code> is the event that triggers the workflow. In this case, we want the workflow to be triggered when code is pushed to the main branch.</li>
<li>
<code>jobs</code> is a collection of steps that run sequentially. In this case, we have one job called <code>send_sms</code>.</li>
<li>
<code>runs-on</code> is the type of machine the job runs on. In this case, we are using the latest version of Ubuntu.</li>
<li>
<code>steps</code> is a collection of tasks that will be executed as part of the job. In this case, we have two steps.</li>
<li>
<code>name</code> is the name of the step. You can name it anything you want.</li>
<li>
<code>run</code> is the code that will be executed as part of the step. In this case, we are installing the Africas Talking SDK.</li>
<li>
<code>env</code> is the environment variables that will be used by the action. In this case, we are passing the <code>TO</code> variable.</li>
<li>
<code>run</code> is the code that will be executed as part of the step. In this case, we are using the Africas Talking SDK to send the SMS notification.</li>
</ul>

<p>This approach allows for more flexibility and customization as needed.</p>

<h3>
  
  
  Method 2: Use an existing workflow:
</h3>

<p>This method involves adding the code to an existing workflow. This is useful if you want to add the SMS notification to an existing workflow.</p>

<p><strong>If you are using the GitHub website:</strong></p>

<ul>
<li>In your repo, go to <strong>Actions &gt; Workflows</strong>
</li>
<li>Select the workflow you want to add the code to.</li>
<li>Click on <strong>Edit</strong>.</li>
</ul>

<p><strong>If you are working in your IDE eg VSCode</strong></p>

<ul>
<li>In your GitHub repository, go to the .github/workflows directory.</li>
<li><p>Open the YAML file of the workflow you want to add the code to.</p></li>
<li><p>Add the following code:<br>
</p></li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight yaml"><code>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Send SMS Notification</span>
  <span class="na">uses</span><span class="pi">:</span> <span class="s">alphaolomi/actions-africastalking@main</span>
  <span class="na">with</span><span class="pi">:</span>
    <span class="na">fromPhoneNumber</span><span class="pi">:</span> <span class="s1">'</span><span class="s">INFO'</span>   <span class="c1"># or  ${{ secrets.fromPhoneNumber }}</span>
    <span class="na">toPhoneNumber</span><span class="pi">:</span> <span class="s">${{ secrets.toPhoneNumber }}</span>
    <span class="na">message</span><span class="pi">:</span> <span class="s">${{ github.event_name }} on ${{ github.repository }} by ${{ github.actor }} has ${{github.event.workflow_run.conclusion}}. Check it out at ${{ github.event.workflow_run.url }}</span>
  <span class="na">env</span><span class="pi">:</span>
    <span class="na">AT_API_KEY</span><span class="pi">:</span> <span class="s">${{ secrets.AT_API_KEY }}</span>
    <span class="na">AT_USERNAME</span><span class="pi">:</span> <span class="s">${{ secrets.AT_USERNAME }}</span>

</code></pre>

</div>



<ul>
<li>Commit the changes and push to GitHub. This should  trigger the workflow.</li>
</ul>

<p>Now lets look at an example using the Python SDK:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight yaml"><code>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Send SMS Notification</span>
  <span class="na">env</span><span class="pi">:</span>
    <span class="na">TO</span><span class="pi">:</span> <span class="s">${{ secrets.toPhoneNumber }}</span>
  <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span> 
    <span class="s">from africastalking.SMS import SMS</span>

    <span class="s">sms = SMS(username=${{ secrets.AT_USERNAME }}, api_key=${{ secrets.AT_API_KEY }}) </span>

    <span class="s">response = sms.send(message="GitHub workflow completed!", recipients=[TO])</span>

</code></pre>

</div>



<ul>
<li>Commit the changes and push to GitHub. This should  trigger the workflow.</li>
</ul>

<p>If everything went successful you should a successful run as seen below: </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--kZbuBxaY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/w06d1zezwkd1fvmcccvl.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--kZbuBxaY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/w06d1zezwkd1fvmcccvl.png" alt="Workflows" width="800" height="359"></a></p>

<h2>
  
  
  Conclusion🚧
</h2>

<p>In this tutorial, we have seen how to send SMS notifications using Africas Talking and GitHub Actions. We have also seen two methods of running code on GitHub Actions. In the next tutorial, we will look at further customization of the code depennding on the use case and SMS notifications.</p>

<h2>
  
  
  Resources
</h2>

<ul>
<li><a href="https://docs.github.com/en/actions">GitHub Actions</a></li>
<li><a href="https://africastalking.com/">Africas Talking</a></li>
<li><a href="https://developers.africastalking.com/docs/sms">Africas Talking SMS API</a></li>
<li><a href="https://developers.africastalking.com/sdks">Africas Talking SDKs</a></li>
<li><a href="https://github.com/alphaolomi/actions-africastalking">Africas Talking GitHUb Actions</a></li>
</ul>

<p>Thanks for reading! Free free to leave a comment below if you have any questions, suggestions or clarifications. You can also reach out to me on <a href="https://twitter.com/KenMwaura1">Twitter.</a> or <a href="https://www.linkedin.com/in/kennedy-mwaura/">LinkedIn</a> If you found this article helpful feel free to share it with others.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--bGqbHTBS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/diajdqtjfsq60kke6kcn.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--bGqbHTBS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/diajdqtjfsq60kke6kcn.gif" alt="Next time" width="498" height="206"></a></p>

 </details> 
 <hr /> 

 #### - [Linux filters - How to streamline text like a boss](https://dev.to/cherryramatis/linux-filters-how-to-streamline-text-like-a-boss-2dp4) 
 <details><summary>Article</summary> <p>Are you familiar with the Unix philosophy and how to create better scripts? In this comprehensive guide, we'll explore the general definition of Unix philosophy, investigate the key elements of a well written script, and learn the building blocks of scripting such as the pipeline operator, stdin, and stdout manipulation. Finally, we'll dissect how to apply those as good practices on our ruby/bash scripts!</p>

<h2>
  
  
  Table of Contents
</h2>

<ul>
<li>What is the Unix philosophy?</li>
<li>What is a pipeline?</li>
<li>What is stdin and stdout?</li>
<li>
What defines a bad script and how to turn into a good one?

<ul>
<li>Ignoring standard input and output communication</li>
<li>Doing a lot on the same tool, aka monolithic scripts</li>
</ul>


</li>
<li>Bonus point: The bang operator in vim</li>
<li>Conclusion</li>
</ul>

<h2>
  
  
  What is the Unix philosophy?
</h2>

<p>The Unix philosophy was originally defined by the master <a href="https://en.wikipedia.org/wiki/Ken_Thompson">Ken thompson</a> and it's a set of good practices that define a <em>minimalist</em> and <em>modular</em> software, all the core utils from Unix (such as <code>find</code>, <code>grep</code>) follow this good practices so we can agree that it need to be good right?</p>

<p>The original quote documented by <a href="https://en.wikipedia.org/wiki/Douglas_McIlroy">Doug Mcllroy</a> contain the following items:</p>

<blockquote>
<ol>
<li>Make each program do one thing well. To do a new job, build afresh rather than complicate old programs by adding new "features".</li>
<li>Expect the output of every program to become the input to another, as yet unknown, program. Don't clutter output with extraneous information. Avoid stringently columnar or binary input formats. Don't insist on interactive input.</li>
<li>Design and build software, even operating systems, to be tried early, ideally within weeks. Don't hesitate to throw away the clumsy parts and rebuild them.</li>
<li>Use tools in preference to unskilled help to lighten a programming task, even if you have to detour to build the tools and expect to throw some of them out after you've finished using them.</li>
</ol>
</blockquote>

<p>The last two items define a more "programming in general" tips, the goal of this article will focus entirely on the first two tips where a good script can be known as <em>something that do one job really well and can be put in a pipeline</em>. On the following chapters we'll try to understand this phrase a little better.</p>

<h2>
  
  
  What is a pipeline?
</h2>

<p>A pipeline is a continuous run of programs where the stdout of one follow as the stdin of the next one, on bash/zsh/fish shells we can use the <code>|</code> operator to refer as a pipe and we use it a lot to further query information, for example: imagine you want to count how many markdown files you have in your directory, you can do the following:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>find <span class="nb">.</span> <span class="nt">-iname</span> <span class="s1">'*.md'</span> | <span class="nb">wc</span> <span class="nt">-l</span>
</code></pre>

</div>



<p>Let's break it down piece by piece so you can understand properly shall we?</p>

<p>First we have the <code>find</code> command being used to list all the markdown files on the current directory, for me personally this produces the following:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>find <span class="nb">.</span> <span class="nt">-iname</span> <span class="s1">'*.md'</span>
./posts/20230814T124722/README.md
./posts/20230703T214043/README.md
./posts/20230616T234323/README.md
./posts/20230625T223158/README.md
./posts/20230731T212528/README.md
./posts/20230807T203924/README.md
./posts/20230804T140043/README.md
./REPL Driven Development - For not so smart developers.md
./Como escrever uma CLI CRUD utilizando ScyllaDB + Ruby.md
./Linux filters - How to streamline text like a boss.md
</code></pre>

</div>



<p>If you just want to list the proper file names without counting them, you can even pipe it to the <code>sort</code> command, that way it lists alphabetically like the following:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>find <span class="nb">.</span> <span class="nt">-iname</span> <span class="s1">'*.md'</span> | <span class="nb">sort</span>
./Como escrever uma CLI CRUD utilizando ScyllaDB + Ruby.md
./Linux filters - How to streamline text like a boss.md
./REPL Driven Development - For not so smart developers.md
./posts/20230616T234323/README.md
./posts/20230625T223158/README.md
./posts/20230703T214043/README.md
./posts/20230731T212528/README.md
./posts/20230804T140043/README.md
./posts/20230807T203924/README.md
./posts/20230814T124722/README.md
</code></pre>

</div>



<p>See how the output of the first <code>find</code> command was streamlined to the <code>sort</code> command where it returned it properly sorted? This is the entire purpose of writing small tools, that way you can easily compose them into different pipelines to get cool results.</p>

<p>In the case of the initial example we used the <code>wc</code> command that only count whatever it receives from stdin, in this case we use the <code>-l</code> flag to count lines. With all that put together voilá! We have our result:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>find <span class="nb">.</span> <span class="nt">-iname</span> <span class="s1">'*.md'</span> | <span class="nb">wc</span> <span class="nt">-l</span>
      10
</code></pre>

</div>



<h2>
  
  
  What is stdin and stdout?
</h2>

<p>Stdin (standard input) and stdout (standard output) are the main ways that a computer communicates with the outside world. Below, we'll delve more into the details of each one:</p>

<ul>
<li>Stdin (standard input) is normally referred to as anything that waits for a user interaction (like typing on an input, selecting an item from a list, etc.), but this can be understood in a more generalized way; basically, we can think of Stdin as the default <em>information provider</em>, whether this comes from another program or from a user interacting with it.</li>
<li>Stdout (standard output) is normally referred to as anything that prints out a value to the screen (it can be a terminal, a browser, or anything). Differently from Stdin, this is totally correct, the only caveat is that when inserted in a pipeline context, all stdout is suppressed as the stdin of the next command instead of printing to the screen.</li>
</ul>

<h2>
  
  
  What defines a bad script and how to turn into a good one?
</h2>

<p>Describing a exact summary of what is a good script can be quite tricky because of the many variables involved. Instead, let's flip the question: what does a bad script look like according to the Linux philosophy? And how can we solve the specific problem to create slightly better tools?</p>

<h3>
  
  
  Ignoring standard input and output communication
</h3>

<p>Have you ever used some CLIs that have a fancy way to display information with an animated input or a cool spinner? It's indeed quite cool to use those tools when you just want to use them by themselves, but when you try to put those tools in a pipeline, they break the whole process. Instead, always write your tools by using standard communication as the primary way to receive and retrieve information, prefer to use options instead of hard-coding values (an example of an option is <code>--output=json</code> or <code>-o json</code>).</p>

<p>In Ruby, it's far easier to not shoot yourself in the foot because the way we learn to get data already works pretty well with the standard input, but it's important to keep an eye on how you design your script. </p>

<p>For example, consider this simple script called <code>printname.rb</code> example:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight ruby"><code><span class="c1">#!/usr/bin/env ruby</span>

<span class="nb">puts</span> <span class="s1">'Type your name: '</span>
<span class="nb">name</span> <span class="o">=</span> <span class="nb">gets</span><span class="p">.</span><span class="nf">chomp</span>

<span class="nb">puts</span> <span class="s2">"Your name is: </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span>
</code></pre>

</div>



<p>This script in a first glance works both running by itself and on a pipeline, but observe the output produced by both:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"Cherry Ramatis"</span> | ./printname.rb
Type your name:
Your name is: Cherry Ramatis
</code></pre>

</div>





<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>$ ./printname.rb
Type your name:
Cherry Ramatis
Your name is: Cherry Ramatis
</code></pre>

</div>



<p>You can observe that we're always printing the <code>Type your name</code> message, in this case we have two options:</p>

<ul>
<li>Accept this name with a flag parameters instead by receiving <code>--name="Cherry Ramatis"</code>
</li>
<li>Drop the <code>Type your name</code> message, turning the script into a more pipelineable (nice word huh?) one.</li>
</ul>

<h3>
  
  
  Doing a lot on the same tool, aka monolithic scripts
</h3>

<p>Sometimes you're writing a tool and quickly observe that the scope got bigger while you were writing it, now what should be a small tool is growing to be a big project with various interactive steps. When it reaches that point it's quite seducing to just keep iterating on the same tool by adding a lot of sub commands, but the unix philosophy help us understand that writing a tool that <em>do one thing right</em> is more valuable than writing a gigantic behemoth.</p>

<p>So instead of creating a big CLI with a whole set of commands, try to think in writing small separate tools that interconnect and complement each other, for example:</p>

<p>Imagine you want to write a command that list all the songs from a database in a particular order and prompt the user to choose one, instead of writing all those functionalities in <em>one</em> command, you can compose with different ones like:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>list_songs | <span class="nb">sort</span> | update_song
</code></pre>

</div>



<p>See how <code>list_songs</code> and <code>update_song</code> are different scripts? both communicate via STDIN and STDOUT, allowing the user to pipeline through any command and receive the same behavior (for example we're piping it to sort because we want to view the list in a sorted manner.)</p>

<h2>
  
  
  Bonus point: The bang operator in vim
</h2>

<p>Rejoice, Vim users! This is our time to shine. Vim is a somewhat standard editor in Unix systems and this comes with a set of benefits such as interacting with binaries directly in your buffer via the <code>!</code> operator.</p>

<p>In vim you can press <code>!!</code> in <strong>normal mode</strong> to populate a command like this in your minibuffer <code>:.!</code>, the command you type after the <code>!</code> will be used with the current line as STDIN, mind blowing right? Observe the example below:</p>

<p>Consider the following script in ruby:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight ruby"><code><span class="c1">#!/usr/bin/env ruby</span>

<span class="no">STDIN</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">line</span><span class="o">|</span>
 <span class="nb">puts</span> <span class="s2">"- </span><span class="si">#{</span><span class="n">line</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
</code></pre>

</div>



<p>In this script we're looping over the STDIN received and printing it back to the STDOUT with a <code>-</code> on the beginning, now we can interact with vim:</p>

<p><a href="https://asciinema.org/a/607360"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--27wSR1Wa--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://asciinema.org/a/607360.svg" width="800" height="524"></a></p>

<p>Other variations of the bang command:</p>

<ul>
<li>
<code>!}</code>: Populate the bang command from the current line to the end of the paragraph.</li>
<li>
<code>!/pattern</code>: Populate the bang command from the current line to the first find of <code>pattern</code> in the buffer.</li>
<li>
<code>!G</code>: Populate the bang command from the current line to the end of the file.</li>
<li>
<code>!4j</code>: Populate the bang command from the current line to 4 lines below.</li>
</ul>

<h2>
  
  
  Conclusion
</h2>

<p>This is a smaller article where I tried to bring more context into something that I do a lot in my day to day life: <strong>automating</strong>. I hope this content is useful for you and if I can help with anything just reach me out! May the force be with you 🍒</p>

 </details> 
 <hr /> 

 #### - [Advancеd Backup Stratеgiеs in PostgrеSQL](https://dev.to/hassanrehan/advancied-backup-stratiegiies-in-postgriesql-2g84) 
 <details><summary>Article</summary> <p>PostgrеSQL,  bеing thе most powеrful and trustеd opеn-sourcе databasе,  providеs sеvеral options for backups in nеcеssary formats and automation.  In this blog post,  wе will dеlvе into thе advancеd stratеgiеs for backing up PostgrеSQL data. </p>

<h2>
  
  
  Thrее Fundamеntal Approachеs
</h2>

<p>Thеrе arе thrее fundamеntally diffеrеnt approachеs to backing up PostgrеSQL data:</p>

<ol>
<li> <strong>SQL Dump</strong>: This mеthod gеnеratеs a filе with SQL commands that can rеcrеatе thе databasе to thе samе statе as it was at thе timе of thе dump. </li>
<li> <strong>Filе Systеm Lеvеl Backup</strong>: This approach dirеctly copiеs thе databasе filеs,  allowing for fastеr rеcovеry. </li>
<li> <strong>Continuous Archiving and Point-in-Timе Rеcovеry (PITR)</strong>: This mеthod combinеs a filе systеm lеvеl backup with thе backup of Writе-Ahеad Log (WAL) filеs. </li>
</ol>

<p>Each of thеsе mеthods has its own strеngths and wеaknеssеs,  and thеy arе discussеd in turn in thе following sеctions. </p>

<h2>
  
  
  SQL Dump
</h2>

<p>SQL Dump is a simplе yеt еffеctivе mеthod for backing up PostgrеSQL data.  It involvеs using thе <code>pg_dump</code> or <code>pg_dumpall</code> command to crеatе a dump of thе databasе.  This dump can thеn bе usеd to rеstorе thе databasе to its original statе. </p>

<h2>
  
  
  Filе Systеm Lеvеl Backup
</h2>

<p>Filе systеm lеvеl backup involvеs dirеctly copying thе filеs that makе up thе databasе.  This mеthod is fastеr than SQL Dump as it doеs not involvе rеcrеating thе databasе from scratch.  Howеvеr,  it rеquirеs morе storagе spacе as it involvеs copying all databasе filеs. </p>

<h2>
  
  
  Continuous Archiving and Point-in-Timе Rеcovеry (PITR)
</h2>

<p>Continuous Archiving and Point-in-Timе Rеcovеry (PITR) is an advancеd backup stratеgy that combinеs filе systеm lеvеl backup with thе backup of WAL filеs.  This allows for continuous archiving of thе databasе,  which can bе usеd to rеstorе thе databasе to any point in timе. </p>

<h2>
  
  
  Conclusion
</h2>

<p>Planning is kеy to backup and rеcovеry.  It's important to undеrstand your own еnvironmеnt and how a data loss can happеn.  Dеpеnding on your spеcific nееds and circumstancеs,  onе of thеsе mеthods may bе morе suitablе than othеrs.  Rеmеmbеr,  rеgular backups arе еssеntial to prеvеnt data loss and еnsurе continuity. </p>

<p>Sourcеs:<br>
1) <a href="https://www.%D0%B5nt%D0%B5rpris%D0%B5db.com/postgr%D0%B5sql-databas%D0%B5-backup-r%D0%B5cov%D0%B5ry-what-works-wal-pitr">https://www.еntеrprisеdb.com/postgrеsql-databasе-backup-rеcovеry-what-works-wal-pitr</a>. <br>
2) <a href="https://www.postgr%D0%B5sql.org/docs/curr%D0%B5nt/backup.html">https://www.postgrеsql.org/docs/currеnt/backup.html</a>. <br>
3) <a href="https://www.p%D0%B5rcona.com/blog/postgr%D0%B5sql-backup-strat%D0%B5gy-%D0%B5nt%D0%B5rpris%D0%B5-grad%D0%B5-%D0%B5nvironm%D0%B5nt/">https://www.pеrcona.com/blog/postgrеsql-backup-stratеgy-еntеrprisе-gradе-еnvironmеnt/</a>. <br>
4)<a href="https://www.postgr%D0%B5sql.%D0%B5u/v%D0%B5nts/pgconf%D0%B5u2018/s%D0%B5ssions/s%D0%B5ssion/2098/slid%D0%B5s/123/Advanc%D0%B5d%20backup%20m%D0%B5thods.pdf">https://www.postgrеsql.еu/vеnts/pgconfеu2018/sеssions/sеssion/2098/slidеs/123/Advancеd%20backup%20mеthods.pdf</a>.  </p>

 </details> 
 <hr /> 

 #### - [Better Git Commits with `@commitlint`](https://dev.to/maafaishal/better-git-commits-with-commitlint-g18) 
 <details><summary>Article</summary> <p>When working on a project together, <a href="https://git-scm.com/">Git</a> is a crucial tool that help teams collaborate smoothly. One of the key features is <code>commits</code>, which act like snapshots of the project's progress.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--KVGWow1o--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zpvmdcu90e7e1zue0jbz.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--KVGWow1o--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zpvmdcu90e7e1zue0jbz.png" alt="git commit" width="349" height="500"></a></p>

<p>However, do you know which one of my commit add a new feature? I'm sure you won't, including me...</p>

<p>The problem is I was naming the commit randomly without looking at the context which makes it harder for me to identify when I want to revert the changes.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--AWXU7Fxp--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zt9lqp7mvcz2l4d332t9.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--AWXU7Fxp--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zt9lqp7mvcz2l4d332t9.png" alt="commitlint" width="800" height="227"></a></p>

<p>To solve the problem, there is a useful linter named <code>commitlint</code>. It will prevent us from naming our commits randomly<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="c1">// git commit</span>
<span class="nx">oops</span>

<span class="c1">// it will trigger this error </span>
<span class="c1">// ❌ type must be one of [build, chore, ci, docs, feat, fix, perf, refactor, revert, style, test] [type-enum]</span>
</code></pre>

</div>



<p>and force us to name the commit properly.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="nx">fix</span><span class="p">:</span> <span class="nx">resolve</span> <span class="nx">the</span> <span class="nx">issue</span> <span class="nx">related</span> <span class="nx">to</span> <span class="nx">comma</span>
<span class="nx">feat</span><span class="p">:</span> <span class="nx">add</span> <span class="nx">a</span> <span class="nx">feature</span> <span class="nx">named</span> <span class="nx">calculator</span>
</code></pre>

</div>



<p>It's very clear and easy to understand the context, right?</p>

<p>The following are all the types that <code>commitlint</code> suggests and provides including the example commit:</p>

<ul>
<li>
<strong>build</strong> --&gt; Changes that affect the build system or external dependencies
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>build: update npm dependency
</code></pre>

</div>



<ul>
<li>
<strong>ci</strong> --&gt; Changes to our CI configuration files and scripts
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>ci: add circleci configuration file
</code></pre>

</div>



<ul>
<li>
<strong>docs</strong> --&gt; Documentation only changes
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>docs: update readme with installation instructions
</code></pre>

</div>



<ul>
<li>
<strong>feat</strong> --&gt; A new feature
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>feat: add user authentication feature
</code></pre>

</div>



<ul>
<li>
<strong>fix</strong> --&gt; A bug fix
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>fix: resolve issue with incorrect data rendering
</code></pre>

</div>



<ul>
<li>
<strong>perf</strong> --&gt; A code change that improves performance
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>perf: optimize database query for faster response times
</code></pre>

</div>



<ul>
<li>
<strong>refactor</strong> --&gt; A code change that neither fixes a bug nor adds a feature
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>refactor: reorganize code structure for better readability
</code></pre>

</div>



<ul>
<li>
<strong>style</strong> --&gt; Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>style: format code according to Prettier standards
</code></pre>

</div>



<ul>
<li>
<strong>test</strong> --&gt; Adding missing tests or correcting existing tests
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>test: add unit tests for user authentication
</code></pre>

</div>



<p>There are many features of <code>commitlint</code> that I can't mention one by one, as well as installation guide. To know the detail you can directly access <a href="https://github.com/conventional-changelog/commitlint">https://github.com/conventional-changelog/commitlint</a>.</p>

 </details> 
 <hr /> 

 #### - [We had a date bug that happened two times a year, and we didn't know, you might have it too 😱](https://dev.to/novu/we-had-a-date-bug-that-happened-two-times-a-year-and-we-didnt-know-you-might-have-it-too-56o6) 
 <details><summary>Article</summary> <h2>
  
  
  TL;DR
</h2>

<p>Novu's team encountered a significant bug affecting date calculations in their CI/CD pipelines, hindering all deployments. </p>

<p>The issue arose from the date-fns library's addMonths and subMonths functions.</p>

<p>We fixed this by using addDays and subDays functions instead.   </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--UIbJ4yVD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7qewo5qx57k5z4g466ot.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--UIbJ4yVD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7qewo5qx57k5z4g466ot.gif" alt="Panic Gif" width="800" height="600"></a></p>




<h2>
  
  
  Novu: Open-source notification infrastructure 🚀
</h2>

<p>Just a quick background about us. Novu is an open-source notification infrastructure. We basically help to manage all the product notifications. It can be In-App (the bell icon like you have in the Dev Community - Websockets), Emails, SMSs and so on.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--WzpngZeC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/134zbnlfi42ui6wn828k.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--WzpngZeC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/134zbnlfi42ui6wn828k.jpg" alt="Novu Request Stars On Github" width="800" height="335"></a></p>




<h2>
  
  
  The Mindset
</h2>

<p>When working in software development, we're always prepared for bugs to crop up. </p>

<p>Sometimes they're small, easy to identify, and quick to fix. </p>

<p>Other times, they're like this year's candidate for our 'Bug Of The Year'. </p>

<p>This was a bug so elusive and mysterious that it had us rummaging through our pipelines, questioning our code-base, and coming face-to-face with the intricacies of date manipulation.</p>

<h2>
  
  
  Problems, Different Problems, and More Problems
</h2>

<p>Our CI/CD pipelines were failing. Specifically, two tests which were blocking ALL new deployments. It was time to put on our detective hats 🕵️.</p>

<p>We dove into our commit history using <a href="https://git-scm.com/docs/git-bisect"><code>git bisect</code></a> however it offered us no insight. Git bisect took us back to commits that where over 6 months in the past, long before any of our newest changes to the system that would have caused this. Was this bug created at the very beginning of Novu?</p>

<p>However, we did have a clue. Our failing unit tests showed us that we had incorrect date calculations. </p>

<h2>
  
  
  Gathering the Clues 💡
</h2>

<p>Strangely, the difference was just one day.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="kd">const</span> <span class="nx">startDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="dl">"</span><span class="s2">2023-08-31</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">oneMonthAhead</span> <span class="o">=</span> <span class="nx">addMonths</span><span class="p">(</span><span class="nx">startDate</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">subMonths</span><span class="p">(</span><span class="nx">oneMonthAhead</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>  <span class="c1">// Expected: 31st of August, Reality: 30th of August</span>
</code></pre>

</div>



<p>We also found that this does not happen on 31st July.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="kd">const</span> <span class="nx">startDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="dl">"</span><span class="s2">2023-07-31</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">oneMonthAhead</span> <span class="o">=</span> <span class="nx">addMonths</span><span class="p">(</span><span class="nx">startDate</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">subMonths</span><span class="p">(</span><span class="nx">oneMonthAhead</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>  <span class="c1">// Expected: 31st of July, Reality: 31th of July</span>
</code></pre>

</div>



<p>But the bug shows up again January 31st.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="kd">const</span> <span class="nx">startDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="dl">"</span><span class="s2">2023-01-31</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">oneMonthAhead</span> <span class="o">=</span> <span class="nx">addMonths</span><span class="p">(</span><span class="nx">startDate</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">subMonths</span><span class="p">(</span><span class="nx">oneMonthAhead</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>  <span class="c1">// Expected: 31st of January, Reality: 28th of January</span>
</code></pre>

</div>



<p>So this bug only happens when we add 1 month to a month that has more days then the next month and then subtract 1 month to go back to the month before. </p>

<h2>
  
  
  This is a sneaky one
</h2>

<p>So here is what we know so far:</p>

<ul>
<li>It would only show up on systems that does this specific sequence of logic.</li>
<li>The code would have to be ran on one of the few dates that are effected. </li>
<li>This effect is not documented anywhere on any of the libraries we use.</li>
</ul>

<p>The worst thing is that this bug is also shows up HR tools, finance tools, salary tools, public government tools all rely on this package but unfortunately it is still better then us making the functions our-self's.</p>

<p>It has been said many times that date-times are among the trickiest aspects of programming, and our current predicament served as a hash reminder.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--S4j-U-Ux--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/6xt36eh8300agqnklq7o.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--S4j-U-Ux--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/6xt36eh8300agqnklq7o.gif" alt="This is tough GIF" width="800" height="450"></a></p>

<h2>
  
  
  Why a simple actions can lead to bad things
</h2>

<p>After finding this out, we had a 'Eureka!' moment. <br>
Our CTO, Dima Grossman, then had the idea to try it it on <a href="//raycast.com">raycast</a>. Interestingly enough it was happening in their product too.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--4JU2Jexk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kw6sb2bfvl2nn6qwtfca.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--4JU2Jexk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kw6sb2bfvl2nn6qwtfca.png" alt="Showing Raycast also uses date-fns" width="800" height="504"></a></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--VAYw-pj8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4aso2414apy6vz0svoar.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--VAYw-pj8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4aso2414apy6vz0svoar.gif" alt="Mind Blown Gif" width="800" height="600"></a></p>

<p>We realized that the issue stemmed from being on the last day of the month, but what exactly was going awry?</p>
<h2>
  
  
  The Culprit:
</h2>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--WwEPkCS0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kc12kgdwa1q3hhw8n03l.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--WwEPkCS0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kc12kgdwa1q3hhw8n03l.png" alt="date-fns icon" width="176" height="33"></a></p>

<p>This popular utility library for date operations was at the heart of the problem.</p>

<p>Specifically, the <code>addMonths</code> and <code>subMonths</code> functions.</p>

<p>The <code>addMonths</code> function, when adding a month to the last day of any given month, would take you to the last day of the following month. Logical, right?<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="c1">// source: https://github.com/date-fns/date-fns/blob/main/src/addMonths/index.ts</span>
<span class="kd">const</span> <span class="nx">daysInMonth</span> <span class="o">=</span> <span class="nx">endOfDesiredMonth</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">dayOfMonth</span> <span class="o">&gt;=</span> <span class="nx">daysInMonth</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// If we're already at the end of the month, then this is the correct date</span>
    <span class="c1">// and we're done.</span>
    <span class="k">return</span> <span class="nx">endOfDesiredMonth</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Otherwise, we now know that setting the original day-of-month value won't</span>
    <span class="c1">// cause an overflow, so set the desired day-of-month. Note that we can't</span>
    <span class="c1">// just set the date of `endOfDesiredMonth` because that object may have had</span>
    <span class="c1">// its time changed in the unusual case where where a DST transition was on</span>
    <span class="c1">// the last day of the month and its local time was in the hour skipped or</span>
    <span class="c1">// repeated next to a DST transition.  So we use `date` instead which is</span>
    <span class="c1">// guaranteed to still have the original time.</span>
    <span class="nx">_date</span><span class="p">.</span><span class="nx">setFullYear</span><span class="p">(</span>
      <span class="nx">endOfDesiredMonth</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">(),</span>
      <span class="nx">endOfDesiredMonth</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">(),</span>
      <span class="nx">dayOfMonth</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="nx">_date</span>
  <span class="p">}</span>
</code></pre>

</div>



<p>But the <code>subMonths</code> function, rather than having its own dedicated logic, simply reused <code>addMonths</code> with a negative number. D.R.Y principles in action, but with an unintended consequence.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="c1">// source: https://github.com/date-fns/date-fns/blob/main/src/subMonths/index.ts</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">subMonths</span><span class="o">&lt;</span><span class="nx">DateType</span> <span class="kd">extends</span> <span class="nb">Date</span><span class="o">&gt;</span><span class="p">(</span>
  <span class="nx">date</span><span class="p">:</span> <span class="nx">DateType</span> <span class="o">|</span> <span class="nx">number</span><span class="p">,</span>
  <span class="nx">amount</span><span class="p">:</span> <span class="nx">number</span>
<span class="p">):</span> <span class="nx">DateType</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">addMonths</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="o">-</span><span class="nx">amount</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

</div>



<h2>
  
  
  Here is what exactly caused our issue
</h2>

<p>Let's put it this way:</p>

<ul>
<li>For 28th February, add one month and then subtract one month, and you get 28th February. No problems there.</li>
<li>But, for 31st August, add one month and then subtract one month, and you land on... 30th August. That's one day lost in date limbo!</li>
</ul>

<p>The core of the issue was the way <code>addMonths</code> determined the end of the desired month.</p>

<p>For days that were not at the end of the month, the logic was sound. </p>

<p>However, for the last day of a month, the function defaulted to the end of the next month instead of adding the correct amount of days.</p>

<h2>
  
  
  The Simple Fix
</h2>

<p>To ensure a consistent approach to date manipulation, we shifted from using <code>addMonths</code> and <code>subMonths</code> to <code>addDays</code> and <code>subDays</code>. </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--y4JuGC4H--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/2aoc0bfp131dc79q5dor.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--y4JuGC4H--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/2aoc0bfp131dc79q5dor.gif" alt="Quicly Coding Cat Gif" width="800" height="600"></a></p>

<p>This provided a more granular and precise way to handle date calculations, and importantly, allowed us to sidestep the <code>addMonths</code> pitfall.</p>

<h2>
  
  
  Lessons Learnt
</h2>

<p>This bug served as a strong lesson in a few key areas:</p>

<ol>
<li>
<strong>Assumptions are Risky:</strong> Never assume that widely-used libraries are infallible. Even the most popular ones have their quirks.</li>
<li>
<strong>Tests are Gold:</strong> If not for our rigorous testing suite, this bug might have remained hidden, only to wreak havoc at the most inopportune moment.</li>
<li>
<strong>Dates are Tricky:</strong> They've always been, and will continue to be, a challenging aspect of software development. Always handle with care.</li>
</ol>

<p>While this bug threw a wrench in our pipes, it also reinforced the importance of comprehensive tests and the need to continually question and challenge our assumptions. </p>

<h2>
  
  
  Death of this Bug
</h2>

<p>In a world of code where dates and times form such a crucial part of our applications, bugs like these provide not just a hiccup, but a learning opportunity. The next time you find a weird issue in your application, dig deep. Who knows, you might just uncover the next 'Bug Of The Year'.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--SXE07O9m--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/0ps74vqneyl5oxnqmhxj.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--SXE07O9m--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/0ps74vqneyl5oxnqmhxj.gif" alt="Bug Goodbye Gif" width="800" height="533"></a></p>

<p>You can find the PRs and Issues here:</p>

<ul>
<li><a href="https://github.com/novuhq/novu/pull/4071">Novu PR</a></li>
<li><a href="https://github.com/date-fns/date-fns/issues/3506">Issue on date-fns</a></li>
</ul>

 </details> 
 <hr /> 
<!-- BLOG-POST-LIST:END -->
</table>
</details>


<!-- TODO
Change the 3stats boxes around, possibly two on top and one on bottom
Fix RSSfeed
Fix Spotify Playlists
Fix Socials [Portfolio, Discord, Linkedin]
In the future, add Public Repositories of Selected Projects
-->
