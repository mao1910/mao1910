<!-- VISITOR BADGE -->
<!-- https://github.com/hehuapei/visitor-badge -->

<img align="right" src="https://visitor-badge.laobi.icu/badge?page_id=mao1910.mao1910&left_color=%2379DAF9&right_color=%23FE6E96" />


<!-- TYPING SVG -->
<!-- https://github.com/DenverCoder1/readme-typing-svg -->

<h1 align="center">
    <img src="https://readme-typing-svg.herokuapp.com/?font=Righteous&size=35&center=true&vCenter=true&width=500&height=70&color=FE6E96&font=poppins&duration=5000&lines=Hi+There!+üëã;+I'm+Mao!;" />
</h1>

<br/>

<!-- CODE/TERMINAL ABOUT ME -->
<h1 align="center">
<img src="./assets/terminal-5.gif" alt="Terminal" />
</h1>

<br/><br/><br/>


<!-- TECHNOLOGIES LOGOS -->
<!-- https://github.com/tandpfun/skill-icons -->

<h2 align="center">üíª Languages / Frameworks / Tools ‚öíÔ∏è</h2>
<div align="center">
    <img src="https://skillicons.dev/icons?i=javascript,typescript,angular,react,html,css,scss,bootstrap,cs,java,spring" />
    <img src="https://skillicons.dev/icons?i=flutter,firebase,supabase,mysql,git,github,gitlab,vscode,idea,maven,figma" />
</div>

<br/><br/><br/>


<!-- CONTRIBUTIONS SNAKE GAME -->
<!-- https://github.com/Platane/snk -->

<div align="center">
  <h2> My Contributionssssüêç </h2>
  <br>
  <img alt="contributions-eating Snake" src="https://raw.githubusercontent.com/mao1910/mao1910/output/github-contribution-grid-snake.svg" />

  <!-- Four lines below suggested by Planate for Dark mode-->
  <picture>
  <source media="(prefers-color-scheme: dark)" srcset="github-snake-dark.svg" />
  <source media="(prefers-color-scheme: light)" srcset="github-snake.svg" />
  </picture>
  
  <br/><br/><br/>
</div>


<!-- GITHUB STATS -->
<!-- https://github.com/DenverCoder1/github-readme-streak-stats -->
<!-- https://github.com/anuraghazra/github-readme-stats -->
<!-- https://github-readme-stats-mao1910.vercel.app/ My own Vercel deployment-->

<h2 align="center"> Statsüìù </h2>
  <br>
<div align=center>
  <img width=429 src="https://github-readme-stats-mao1910.vercel.app/api?username=mao1910&count_private=true&show_icons=true&theme=dracula&rank_icon=github&hide=contribs&border_radius=10&border_color=79DAF9" alt="github stats"/>
  <img width=396 src="https://streak-stats.demolab.com/?user=mao1910&count_private=true&theme=dracula&currStreakNum=79DAF9&currStreakLabel=FE6E96&border_radius=10&border=79DAF9" alt="streak stats"/>
  <br/>
  <img src="https://github-readme-stats-mao1910.vercel.app/api/top-langs/?username=mao1910&layout=compact&theme=dracula&border_radius=10&size_weight=0.5&count_weight=0.5&border_color=79DAF9" alt="languages stats" />
</div>

<br/><br/><br/>


<!-- FOOTER -->
<!-- https://github.com/DenverCoder1/readme-typing-svg -->
<!-- https://readme-typing-svg.demolab.com/demo/ -->

<a href="https://git.io/typing-svg"><img src="https://readme-typing-svg.demolab.com?font=Poppins&pause=1000&color=FE6E96&width=535&lines=Thanks+for+dropping+by!;Feel+free+to+check+any+of+the+Socials+below+%F0%9F%91%87;Or+the+Joke+Of+The+Day+if+you're+down+for+a+giggle+%F0%9F%98%9D;Hope+to+see+you+again+%F0%9F%91%8A;Uh%3F+You're+still+here%3F;Well...+I'm+running+out+of+things+to+say...;Tell+you+what%2C+due+to+your+effort+and+perseverance%2C;I+shall+present+you+with+a+short+poem%3A;%22To+code%2C+or+not+to+code%2C+that+is+the+question%3A;Whether+'tis+nobler+in+the+IDE+to+debug;The+errors+and+issues+of+outrageous+software%2C;Or+to+take+up+the+keyboard+against+a+sea+of+bugs;And+by+coding%2C+end+them.%22;by+William+Shakespeare%2C+probably.+;Pretty+sure+that's+Hamlet's.;Alrighty%2C+this+has+been+fun.;But+I'll+restart+the+loop+now...+see+ya+soon!" alt="Typing SVG" /></a>


<!--  SOCIAL NETWORKS -->
<!-- https://github.com/alexandresanlim/Badges4-README.md-Profile -->

  <div> 
    <a href="https://www.linkedin.com/" target="_blank"><img src="https://img.shields.io/badge/-LinkedIn-%230077B5?style=for-the-badge&logo=linkedin&logoColor=white" target="_blank"></a> <!-- ADD LINKEDIN PROFILE -->
    <a href = "https://www.google.com"><img src="https://img.shields.io/badge/Portfolio-4285F4?style=for-the-badge&logo=Google-chrome&logoColor=white" target="_blank"></a> <!-- ADD PORTFOLIO WEBSITE -->
    <a href="https://discord.gg" target="_blank"><img src="https://img.shields.io/badge/Discord-7289DA?style=for-the-badge&logo=discord&logoColor=white" target="_blank"></a> <!-- ADD DISCORD -->
    <a href = "mao1910dev@gmail.com"><img src="https://img.shields.io/badge/Gmail-D14836?style=for-the-badge&logo=gmail&logoColor=white" target="_blank"></a>
  </div>


<!-- SPOTIFY PLAYING-->
<!-- https://github.com/novatorem/novatorem -->
<!-- https://spotify-now-playing-novatorem-git-main-mao1910.vercel.app/ My own Vercel deployment-->

[<img width=438px src="https://spotify-now-playing-git-main-mao1910.vercel.app//api/spotify/?border_color=FE6E96" alt="Mao Spotify Now Playing" />](https://open.spotify.com/user/31542et242zglhf42ydrtqgvuvde)


<!-- JOKE OF THE DAY -->
<!-- https://github.com/ABSphreak/readme-jokes -->
<!-- https://readme-jokes-git-master-mao1910.vercel.app/ My own Vercel deployment-->

<details>
<summary>I've got a Joke for you. Wanna hear it? üôà</summary>

<br/>

 <tr>
 <td style="padding-top:4px"><img src = "https://readme-jokes-git-master-mao1910.vercel.app/api?&theme=dracula"></td>
 </tr>

</details>


<!-- RSS FEED -->
<!-- https://github.com/gautamkrishnar/blog-post-workflow -->

<details>
<summary>üìï &nbsp;RSS feed</summary>

<br/>

<!-- BLOG-POST-LIST:START -->
 #### - [Postgr–µSQL Trigg–µrs: An Advanc–µd Guid–µ](https://dev.to/hassanrehan/postgriesql-triggiers-an-advancied-guidie-3ac8) 
 <details><summary>Article</summary> <p>Trigg–µrs in Postgr–µSQL ar–µ a pow–µrful f–µatur–µ that allows you to automatically p–µrform an action in r–µspons–µ to a sp–µcific –µv–µnt on a particular tabl–µ.  This guid–µ will d–µlv–µ into th–µ advanc–µd t–µchniqu–µs for using trigg–µrs in Postgr–µSQL. </p>

<h3>
  
  
  Und–µrstanding Trigg–µrs
</h3>

<p>A Postgr–µSQL trigg–µr is a function invok–µd automatically wh–µn–µv–µr an –µv–µnt such as ins–µrt,  updat–µ,  or d–µl–µt–µ occurs.  Trigg–µrs can b–µ v–µry us–µful for maintaining th–µ int–µgrity of th–µ data in your databas–µ. </p>

<h3>
  
  
  Cr–µating a Trigg–µr
</h3>

<p>Th–µ SQL command <code>CREATE TRIGGER</code> cr–µat–µs a trigg–µr on th–µ sp–µcifi–µd obj–µct.  H–µr–µ's an –µxampl–µ of how to cr–µat–µ a trigg–µr:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="k">CREATE</span> <span class="k">TRIGGER</span> <span class="n">ch</span><span class="err">–µ</span><span class="n">ck_updat</span><span class="err">–µ</span>
<span class="k">BEFORE</span> <span class="k">UPDATE</span> <span class="k">ON</span> <span class="n">accounts</span>
<span class="k">FOR</span> <span class="k">EACH</span> <span class="k">ROW</span>
<span class="k">EXECUTE</span> <span class="k">PROCEDURE</span> <span class="n">ch</span><span class="err">–µ</span><span class="n">ck_account_updat</span><span class="err">–µ</span><span class="p">();</span>
</code></pre>

</div>



<p>In this –µxampl–µ,  th–µ <code>ch–µck_updat–µ</code> trigg–µr is cr–µat–µd on th–µ <code>accounts</code> tabl–µ.  Th–µ trigg–µr is s–µt to –µx–µcut–µ th–µ <code>ch–µck_account_updat–µ()</code> function b–µfor–µ –µach updat–µ op–µration on th–µ <code>accounts</code> tabl–µ. </p>

<h3>
  
  
  Dropping a Trigg–µr
</h3>

<p>Th–µ <code>DROP TRIGGER</code> command is us–µd to r–µmov–µ a trigg–µr.  H–µr–µ's how you can drop a trigg–µr:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="k">DROP</span> <span class="k">TRIGGER</span> <span class="n">ch</span><span class="err">–µ</span><span class="n">ck_updat</span><span class="err">–µ</span> <span class="k">ON</span> <span class="n">accounts</span><span class="p">;</span>
</code></pre>

</div>



<p>This command will r–µmov–µ th–µ <code>ch–µck_updat–µ</code> trigg–µr from th–µ <code>accounts</code> tabl–µ. </p>

<h3>
  
  
  Alt–µring a Trigg–µr
</h3>

<p>Th–µ <code>ALTER TRIGGER</code> stat–µm–µnt allows you to r–µnam–µ a trigg–µr.  H–µr–µ's an –µxampl–µ:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="k">ALTER</span> <span class="k">TRIGGER</span> <span class="n">ch</span><span class="err">–µ</span><span class="n">ck_updat</span><span class="err">–µ</span> <span class="k">RENAME</span> <span class="k">TO</span> <span class="n">v</span><span class="err">–µ</span><span class="n">rify_updat</span><span class="err">–µ</span><span class="p">;</span>
</code></pre>

</div>



<p>This command r–µnam–µs th–µ <code>ch–µck_updat–µ</code> trigg–µr to <code>v–µrify_updat–µ</code>. </p>

<h3>
  
  
  Disabling and Enabling Trigg–µrs
</h3>

<p>Postgr–µSQL allows you to disabl–µ and –µnabl–µ trigg–µrs.  To disabl–µ a trigg–µr,  us–µ th–µ <code>DISABLE TRIGGER</code> command.  To –µnabl–µ it again,  us–µ th–µ <code>ENABLE TRIGGER</code> command. </p>

<h3>
  
  
  Typ–µs of Trigg–µrs
</h3>

<p>Th–µr–µ ar–µ s–µv–µral typ–µs of trigg–µrs in Postgr–µSQL,  including "BEFORE", "AFTER", and "INSTEAD OF" trigg–µrs.  "BEFORE" trigg–µrs ar–µ fir–µd b–µfor–µ th–µ op–µration is p–µrform–µd.  "AFTER" trigg–µrs ar–µ fir–µd aft–µr th–µ op–µration.  "INSTEAD OF" trigg–µrs ar–µ fir–µd inst–µad of th–µ op–µration. </p>

<h3>
  
  
  Conclusion
</h3>

<p>Trigg–µrs ar–µ an advanc–µd f–µatur–µ of Postgr–µSQL that can h–µlp maintain data int–µgrity and automat–µ tasks.  Wh–µth–µr you'r–µ –µnforcing busin–µss rul–µs,  logging chang–µs,  or pr–µv–µnting invalid transactions,  trigg–µrs can b–µ an invaluabl–µ tool in your Postgr–µSQL toolkit.  </p>

 </details> 
 <hr /> 

 #### - [Postgr–µSQL and JSON: An Advanc–µd Guid–µ](https://dev.to/hassanrehan/postgriesql-and-json-an-advancied-guidie-2lhp) 
 <details><summary>Article</summary> <p>Postgr–µSQL, a robust and r–µliabl–µ op–µn-sourc–µ r–µlational databas–µ manag–µm–µnt syst–µm,  is known for its scalability and its support for JSON and oth–µr non-r–µlational data typ–µs.  This guid–µ will d–µlv–µ into th–µ advanc–µd t–µchniqu–µs for using JSON in Postgr–µSQL. </p>

<h3>
  
  
  Und–µrstanding JSON in Postgr–µSQL
</h3>

<p>JSON, or JavaScript Obj–µct Notation, is a common way to stor–µ data,  –µsp–µcially in w–µb applications.  It is writt–µn in k–µy-valu–µ pairs surround–µd by quot–µs.  For –µxampl–µ,  a k–µy-valu–µ pair might look lik–µ this: <code>"name": "hassan"</code>. </p>

<h4>
  
  
  JSON Obj–µcts
</h4>

<p>An obj–µct is a k–µy-valu–µ pair or pairs –µnclos–µd in curly brack–µts.  Wh–µn–µv–µr a k–µy-valu–µ pair is –µnclos–µd in curly brack–µts it b–µcom–µs an obj–µct and can b–µ tr–µat–µd as a singl–µ unit.  Multipl–µ k–µy-valu–µ pairs can b–µ add–µd in an obj–µct,  s–µparat–µd with a comma. </p>

<h4>
  
  
  JSON Arrays
</h4>

<p>Arrays in JSON ar–µ a way to stor–µ a coll–µction of valu–µs within a singl–µ JSON obj–µct.  An array in JSON is r–µpr–µs–µnt–µd by squar–µ brack–µts <code>[]</code> containing a comma-s–µparat–µd list of valu–µs.  Arrays in JSON can also b–µ n–µst–µd,  m–µaning that an array can contain oth–µr arrays or obj–µcts as valu–µs. </p>

<h3>
  
  
  JSONB in Postgr–µSQL
</h3>

<p>JSONB (JSON Binary) is a data typ–µ in Postgr–µSQL that allows you to stor–µ and manipulat–µ JSON data in a mor–µ –µff–µctiv–µ and –µffici–µnt way than th–µ r–µgular JSON data typ–µ.  JSONB stor–µs JSON data in a binary format, which –µnabl–µs fast–µr ind–µxing and qu–µry p–µrformanc–µ compar–µd to th–µ r–µgular JSON data typ–µ. </p>

<h3>
  
  
  Working with JSON arrays in Postgr–µSQL
</h3>

<p>Working with JSON arrays in Postgr–µSQL involv–µs various op–µrations,  such as ins–µrting,  qu–µrying,  and manipulating JSON data. </p>

<h4>
  
  
  Ins–µrting JSON arrays into tabl–µs
</h4>

<p>To ins–µrt JSON arrays into a tabl–µ in Postgr–µSQL,  you can us–µ th–µ <code>INSERT INTO</code> stat–µm–µnt along with th–µ <code>VALUES</code> claus–µ to sp–µcify th–µ JSON array as a string. <br>
First create the table:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">orders</span> <span class="p">(</span>
    <span class="n">id</span> <span class="nb">serial</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">info</span> <span class="n">json</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="p">);</span>
</code></pre>

</div>



<p>Now to insert the JSON:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">orders</span> <span class="p">(</span><span class="n">info</span><span class="p">)</span>
<span class="k">VALUES</span> <span class="p">(</span>
    <span class="s1">'{
        "customer": "John Doe",
        "items": [
            {"product": "Apple", "quantity": 1},
            {"product": "Orange", "quantity": 2}
        ]
    }'</span>
<span class="p">);</span>
</code></pre>

</div>



<h4>
  
  
  Extracting Values from a JSON Object
</h4>

<p>You can use the <code>-&gt;</code> operator to extract values from a JSON object. For example, if you have a table <code>orders</code> with a JSON column <code>info</code>, you can extract the 'customer' field like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="k">SELECT</span> <span class="n">info</span> <span class="o">-&gt;</span> <span class="s1">'customer'</span> <span class="k">AS</span> <span class="n">customer</span> <span class="k">FROM</span> <span class="n">orders</span><span class="p">;</span>
</code></pre>

</div>



<h4>
  
  
  Filtering JSON Data Using a WHERE Clause
</h4>

<p>You can use the <code>-&gt;</code> and <code>-&gt;&gt;</code> operators in a WHERE clause to filter rows based on the values in a JSON object. For example, to find out who bought 'keyboard', you can use the following query:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="k">SELECT</span> <span class="n">info</span> <span class="o">-&gt;&gt;</span> <span class="s1">'customer'</span> <span class="k">AS</span> <span class="n">customer</span> <span class="k">FROM</span> <span class="n">orders</span> <span class="k">WHERE</span> <span class="n">info</span> <span class="o">-&gt;</span> <span class="s1">'items'</span> <span class="o">-&gt;&gt;</span> <span class="s1">'product'</span> <span class="o">=</span> <span class="s1">'keyboard'</span><span class="p">;</span>
</code></pre>

</div>



<h4>
  
  
  Getting Data from an Array in a JSON Object
</h4>

<p>You can use the <code>-&gt;</code> operator to get data from an array in a JSON object. For example, to get all products sold, you can use the following query:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="k">SELECT</span> <span class="n">info</span> <span class="o">-&gt;</span> <span class="s1">'items'</span> <span class="o">-&gt;&gt;</span> <span class="s1">'product'</span> <span class="k">as</span> <span class="n">product</span> <span class="k">FROM</span> <span class="n">orders</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">product</span><span class="p">;</span>
</code></pre>

</div>



<h4>
  
  
  Retrieving Nested Values from a JSON Object
</h4>

<p>You can chain the <code>-&gt;</code> operator to retrieve nested values from a JSON object. For example, to get all customers in form of text, you can use the following query:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="k">SELECT</span> <span class="n">info</span> <span class="o">-&gt;&gt;</span> <span class="s1">'customer'</span> <span class="k">AS</span> <span class="n">customer</span> <span class="k">FROM</span> <span class="n">orders</span><span class="p">;</span>
</code></pre>

</div>



<h4>
  
  
  Checking if a JSON Object Contains a Value
</h4>

<p>You can use the <code>@&gt;</code> operator to check if a JSON object contains a value. For example, to check if an order contains a specific item, you can use the following query:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="k">SELECT</span> <span class="n">info</span> <span class="o">@&gt;</span> <span class="s1">'{"items": [{"product": "Diaper"}]}'</span> <span class="k">FROM</span> <span class="n">orders</span><span class="p">;</span>
</code></pre>

</div>



<p>The flexibility and power of PostgreSQL's JSON support make it an excellent choice for applications that need to work with complex data structures.</p>

<h3>
  
  
  Conclusion
</h3>

<p>Postgr–µSQL's support for JSON mak–µs it an –µxc–µll–µnt choic–µ for applications that n–µ–µd to stor–µ and manipulat–µ compl–µx data structur–µs.  Wh–µth–µr you'r–µ working with simpl–µ k–µy-valu–µ pairs or compl–µx n–µst–µd arrays,  Postgr–µSQL's advanc–µd f–µatur–µs mak–µ it –µasy to work with JSON data. </p>

 </details> 
 <hr /> 

 #### - [Displaying cacheable content with a partial component in Angular](https://dev.to/ayyash/displaying-cacheable-content-with-a-partial-component-in-angular-286h) 
 <details><summary>Article</summary> <p>After creating a¬†<a href="https://garage.sekrab.com/posts/localstorage-wrapper-service-in-angular">localstroage wrapper</a>, and a¬†<a href="https://garage.sekrab.com/posts/a-cache-decorator-in-angular">data cache decorator</a>, let's put them together to create a data service that handles all cacheable data. Also, let's create a a component that displays the cacheable content based on a specific target.</p>

<p>Here is a quick summary of what we previously accomplished</p>

<h4>
  
  
  LocalStorage wrapper service in Angular
</h4>

<p>We created a¬†<code>window.localStorage</code>¬†wrapper in Angular to control the data modeling of what gets saved in¬†<code>localStorage</code>, the data model we came to was the following<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="kr">interface</span> <span class="nx">IStorage</span> <span class="p">{</span>
  <span class="nl">value</span><span class="p">:</span> <span class="kr">any</span><span class="p">;</span>
  <span class="nl">expiresin</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">timestamp</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>

</div>



<p>Then we created a data service specifically to save recurring data with specific data model, and cache it instead of querying the server every time.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="k">export</span> <span class="kr">interface</span> <span class="nx">IData</span> <span class="p">{</span>
  <span class="nl">value</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">key</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>

</div>



<p>So we ended up with a line like this</p>

<p><code>this.countries$ = this.dataService.GetCountries();</code></p>

<p>That created entries like this</p>

<p><code>garage.en.countries.0</code></p>

<h4>
  
  
  A cache decorator in Angular
</h4>

<p>Then we created a decorator to save any¬†<code>http</code>¬†call with any data model in the¬†<code>localStorage</code>. So we had lines like this<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="p">@</span><span class="nd">DataCache</span><span class="p">()</span>
<span class="nx">GetCountries</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">http</span><span class="p">.</span><span class="kd">get</span><span class="p">(...);</span>
<span class="p">}</span>
</code></pre>

</div>



<p>Today, we will use the decorator for the data service, and go beyond that to create a partial component that understands it should display the value, of a specific data key.</p>

<h3>
  
  
  An example of Foods
</h3>

<p>Say the cacheable content is food group, the groups are known: "vegetables, milk, fruits, grain". The value to be displayed (could be multilingual comes from a unique point in an API, let's assume it is like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"32424234"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fruits"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fruits"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

</div>



<p>Let's not bring in all languages, only one language really matters for the user. So the API should handle this properly by reading¬†<code>Accept-Language</code>¬†header.</p>

<p>Then let's assume an API call (e.g.¬†<code>/api/foods</code>) returns a list of items, one of properties is¬†<code>group</code><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"344234"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Breakfast"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fruits"</span><span class="w">
        </span><span class="err">//</span><span class="w"> </span><span class="err">...</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

</div>



<p>I want to be able to display the¬†<code>value</code>¬†by fetching the correct¬†<code>key</code>¬†like this<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight html"><code><span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">*ngFor=</span><span class="s">"let food in foods"</span><span class="nt">&gt;</span>
        {{ food.name }} <span class="nt">&lt;span&gt;</span>{{ getValue(food.group) }} 
      <span class="nt">&lt;span&gt;</span>
  <span class="nt">&lt;li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre>

</div>



<p>The target, is to figure out what this¬†<code>getValue</code>¬†really is, let's begin with the service itself.</p>

<h3>
  
  
  The service
</h3>

<p>I will continue where we left off in our previous data caching hunt in¬†<a href="https://stackblitz.com/edit/angular-cachable-content?file=src%2Fapp%2Fservices%2Fdata.service.ts">StackBlitz</a>. We will create a new API call for food groups. To get groups, we need to implement this function</p>

<p><code>this.groups$¬†=¬†this.dataService.GetGroups();</code></p>

<p>So in our data service, we will create a new¬†<code>GetGroups</code>¬†method, and we will also adapt the service to use the decorator instead. (Notice how we use the argument¬†<code>withArgs</code>¬†to pass an¬†<code>id</code>¬†to the entry key.)<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="c1">// new data service (services/data.service)</span>
<span class="c1">// now that we are using data decorator, we can create a new function for every data group</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">DataService</span> <span class="p">{</span>
<span class="kd">constructor</span><span class="p">(</span>
  <span class="k">private</span> <span class="nx">_http</span><span class="p">:</span> <span class="nx">HttpService</span><span class="p">,</span>
  <span class="c1">// make this public to use with decorator</span>
  <span class="k">public</span> <span class="nx">storageService</span><span class="p">:</span> <span class="nx">StorageService</span>
<span class="p">)</span> <span class="p">{}</span>

  <span class="p">@</span><span class="nd">DataCache</span><span class="p">({</span> <span class="na">key</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Countries</span><span class="dl">'</span><span class="p">,</span> <span class="na">expiresin</span><span class="p">:</span> <span class="mi">8000</span> <span class="p">})</span>
  <span class="nx">GetCountries</span><span class="p">():</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">IData</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_countriesUrl</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
      <span class="nx">map</span><span class="p">((</span><span class="na">response</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">DataClass</span><span class="p">.</span><span class="nx">NewInstances</span><span class="p">(</span><span class="o">&lt;</span><span class="kr">any</span><span class="o">&gt;</span><span class="nx">response</span><span class="p">);</span>
      <span class="p">})</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// if we need an id, we just pass withArgs</span>
  <span class="p">@</span><span class="nd">DataCache</span><span class="p">({</span> <span class="na">key</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Cities</span><span class="dl">'</span><span class="p">,</span> <span class="na">withArgs</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
  <span class="nx">GetCities</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">IData</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_citiesUrl</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">'</span><span class="s1">:id</span><span class="dl">'</span><span class="p">,</span> <span class="nx">id</span><span class="p">)).</span><span class="nx">pipe</span><span class="p">(</span>
      <span class="nx">map</span><span class="p">((</span><span class="na">response</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">DataClass</span><span class="p">.</span><span class="nx">NewInstances</span><span class="p">(</span><span class="o">&lt;</span><span class="kr">any</span><span class="o">&gt;</span><span class="nx">response</span><span class="p">);</span>
      <span class="p">})</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// our new groups here</span>
  <span class="p">@</span><span class="nd">DataCache</span><span class="p">({</span> <span class="na">key</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Groups</span><span class="dl">'</span> <span class="p">})</span>
  <span class="nx">GetGroups</span><span class="p">():</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">IData</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_groupsUrl</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
      <span class="nx">map</span><span class="p">((</span><span class="na">response</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">DataClass</span><span class="p">.</span><span class="nx">NewInstances</span><span class="p">(</span><span class="o">&lt;</span><span class="kr">any</span><span class="o">&gt;</span><span class="nx">response</span><span class="p">);</span>
      <span class="p">})</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>

</div>



<p>So far we recreated what we already have in data service. The use of which did not change a bit in our component. Now we are going to focus on groups.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="c1">// This still acts the same way, gets countries and caches them</span>
<span class="k">this</span><span class="p">.</span><span class="nx">groups$</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">dataService</span><span class="p">.</span><span class="nx">GetGroups</span><span class="p">();</span>
</code></pre>

</div>



<h3>
  
  
  Get single food by key
</h3>

<p>My goal is to end up with a partial in which I pass the¬†<code>key</code>, and the¬†<code>type</code>¬†(identifier), to get the¬†<code>value</code>¬†from the cache.¬†<strong>If cache is not initiated yet, it should initiate it and save it.</strong></p>

<p><code>&lt;cr-data type="Groups" key="milk"&gt;&lt;/cr-data&gt;</code></p>

<p>We expect the API to return the¬†<code>key</code>¬†of the group, instead of the whole package of¬†<code>key</code>,¬†<code>id</code>, and¬†<code>value</code>.</p>

<h3>
  
  
  Type versus Enum
</h3>

<p>We previously used¬†<code>Enums</code>¬†and it was fine, except that in our case if we are to use an¬†<code>Enum</code>, we must get reference to it in our template code, like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="c1">// in data model</span>
<span class="k">export</span> <span class="kr">enum</span> <span class="nx">EnumDataType</span> <span class="p">{</span>
  <span class="nx">Groups</span><span class="p">,</span>
     <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// in component template code</span>
<span class="nx">enumDataType</span> <span class="o">=</span> <span class="nx">EnumDataType</span><span class="p">;</span>

<span class="c1">// then in template</span>
<span class="s2">`
&lt;cr-data [type]="enumDataType.Groups" ...&gt;
`</span>
</code></pre>

</div>



<p>What I found out is that¬†<code>Types</code>¬†in¬†<code>typescript</code>¬†are easier to work with. They validate, and they don't need to be brought in to component.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="c1">// in data model</span>
<span class="k">export</span> <span class="kd">type</span> <span class="nx">TypeDataType</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Country</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">Category</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">Rate</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">City</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">Groups</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// then in template</span>
<span class="s2">`
&lt;cr-data type='Groups' ...&gt;
`</span>
</code></pre>

</div>



<p>This is much cleaner. Why¬†<code>Groups</code>¬†and not¬†<code>Group</code>? Coming right up.</p>

<h3>
  
  
  Data partial component
</h3>

<p>Let's create the code for the¬†<strong>partial component</strong>, we need two¬†<strong>inputs</strong>¬†at least (we can combine them into an object but it doesn't really itch that much). We also need to inject the¬†<code>dataService</code>. The template is simply an¬†<code>async</code>¬†<code>observable</code>¬†that displays the¬†<code>value</code>¬†when the data is available.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="c1">// data.partial</span>
<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
    <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">cr-data</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">template</span><span class="p">:</span> <span class="s2">`{{ (data$ | async)?.value }}`</span><span class="p">,</span>
    <span class="c1">//...</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">DataPartialComponent</span> <span class="p">{</span>
    <span class="c1">// an observable</span>
    <span class="nx">data$</span><span class="p">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">IData</span> <span class="o">|</span> <span class="kc">undefined</span><span class="o">&gt;</span><span class="p">;</span>

        <span class="c1">// we need key, and type</span>
    <span class="p">@</span><span class="nd">Input</span><span class="p">()</span> <span class="nx">key</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="p">@</span><span class="nd">Input</span><span class="p">()</span> <span class="kd">type</span><span class="p">:</span> <span class="nx">TypeDataType</span><span class="p">;</span>

        <span class="c1">// inject the service</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">_dataService</span><span class="p">:</span> <span class="nx">DataService</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre>

</div>



<p>Now whenever the¬†<code>key</code>¬†is set, we need to get data by¬†<code>key</code>¬†and¬†<code>type</code>. We can do that¬†<code>AfterViewInit</code>¬†or¬†<code>OnInit</code>, but a¬†<code>setter</code>¬†is more ready for change detection.</p>

<blockquote>
<p>Note, a setter alone won't guarantee that the property will change, to implement proper change detection mechanism, other strategies are needed, like changing the value¬†<code>changeDetection</code>¬†to¬†<code>Default</code>¬†instead of¬†<code>OnPush</code>, or injecting¬†<code>ChangeDetectorRef</code>¬†and explicitly calling¬†<code>detectChanges</code>(). But this is another Tuesday.<br>
</p>
</blockquote>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="p">@</span><span class="nd">Input</span><span class="p">()</span> <span class="kd">set</span> <span class="nx">key</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">data$</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dataService</span><span class="p">.</span><span class="nx">GetSingleDataByKey</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="kd">type</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

</div>



<p>Right. Let's implement the¬†<code>GetSingleDataBykey</code>.</p>

<h3>
  
  
  GetSingleDataByKey
</h3>

<p>So back to our data service, let's create a generic¬†get item by key.¬†We have the¬†<code>type</code>, and we are going to use it to¬†<strong>construct a method name</strong>¬†and call it. In¬†<code>JavaScript</code>, calling a method in a class is as simple as this:</p>

<p><code>className[sometVar]();</code></p>

<p>Let's also check if the function exists before we call it. Because we are using types, we can add extra checks to align the type¬†<code>Country</code>¬†with¬†<code>GetCountries</code>, but today, I am happy with using¬†<code>Countries</code>¬†as the type all the way. So that is why I chose¬†<code>Groups</code>¬†instead of¬†<code>Group</code>.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="nx">GetSingleDataByKey</span><span class="p">(</span><span class="kd">type</span><span class="p">:</span> <span class="nx">TypeDataType</span><span class="p">,</span> <span class="nx">key</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">IData</span> <span class="o">|</span> <span class="kc">undefined</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="c1">// WATCH: observable of null</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">key</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="c1">// use the type to find GetSomething() then call it.</span>
  <span class="kd">const</span> <span class="nx">getFunction</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="dl">'</span><span class="s1">Get</span><span class="dl">'</span><span class="o">+</span><span class="kd">type</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">getFunction</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">getFunction</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
    <span class="c1">// find element with the same key</span>
    <span class="nx">map</span><span class="p">((</span><span class="na">data</span><span class="p">:</span> <span class="nx">IData</span><span class="p">[])</span> <span class="o">=&gt;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">n</span> <span class="o">=&gt;</span> <span class="nx">n</span><span class="p">.</span><span class="nx">key</span> <span class="o">===</span> <span class="nx">key</span><span class="p">)));</span>
<span class="p">}</span>

<span class="c1">// changed types to be aligned with method names in services/data.model</span>
<span class="k">export</span> <span class="kd">type</span> <span class="nx">TypeDataType</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Countries</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">Categories</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">Rates</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">Cities</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">Groups</span><span class="dl">'</span><span class="p">;</span>
</code></pre>

</div>



<p>Putting this to test:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight html"><code>Groups names:
<span class="nt">&lt;cr-data</span> <span class="na">type=</span><span class="s">"Groups"</span> <span class="na">key=</span><span class="s">"fruits"</span><span class="nt">&gt;&lt;/cr-data&gt;</span>.
<span class="nt">&lt;cr-data</span> <span class="na">type=</span><span class="s">"Groups"</span> <span class="na">key=</span><span class="s">"milk"</span><span class="nt">&gt;&lt;/cr-data&gt;</span>.
<span class="nt">&lt;cr-data</span> <span class="na">type=</span><span class="s">"Groups"</span> <span class="na">key=</span><span class="s">"vegetables"</span><span class="nt">&gt;&lt;/cr-data&gt;</span>.

// Displays:
Groups names: Fruits. Milk. Vegetables.
</code></pre>

</div>



<blockquote>
<p>PS. keep cleaning the¬†<code>localStorage</code>¬†before testing, this one always drives me crazy.</p>
</blockquote>

<h3>
  
  
  Ranting: pipes
</h3>

<p>To have a pipe we must mimic the function of an¬†<code>async</code>¬†pipe and build on it. Since we need to subscribe, I'd rather save the data locally in the pipe until next time. Here is the thing, in¬†<a href="https://angular.io/guide/pipes#caching-http-requests">Angular documentation</a>¬†you can read those two lines:</p>

<ul>
<li>  Each binding gets its own pipe instance.</li>
<li>  Each pipe instance caches its own URL and data and calls the server only once.</li>
</ul>

<p><strong>This sounds better than it really means.</strong>¬†It does in no way mean the data is cached in client throughout the application session, nor does it mean that multiple pipes on the same page get to use the cached version, and no, it also does not mean that the same props will trigger a reuse of the cached data. It just means that¬†<strong>on the same route, for the same pipe usage</strong>, when change detection take place,<strong>¬†if the properties did not change, the cached data will be returned</strong>.</p>

<p>PS: pure pipes by definition do that out of the box, but this is an¬†<code>impure</code>¬†pipe that must be told to do so.</p>

<p>Verdict: Pipes are smelly. Partial components are good for the job.</p>

<h3>
  
  
  Decorator enhancement
</h3>

<p>Going back to our decorator, there is a slight enhancement we can introduce. When there is a list of items that will use the cached data concurrently, the API call will be made multiple times.</p>

<p>How to prevent concurrent calls when the data in storage is not set yet? Well, we can be sophisticated, and we can be really simple. The simple solution is to add a¬†<strong>lock</strong>, and¬†<code>timeout</code>¬†the call if the lock is true. The second call, is between 50% to 100% cached. 50% if you have a slow API, 100% if you have an adequate¬†<code>timeout</code>. We don't want to complicate things, so it should do.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="c1">// services/data.decorator</span>
<span class="c1">// enhancement to prevent concurrent calls</span>

<span class="c1">// add a basket of locks</span>
<span class="kd">const</span> <span class="nx">locks</span><span class="p">:</span> <span class="p">{</span> <span class="p">[</span><span class="nx">key</span><span class="p">:</span> <span class="kr">string</span><span class="p">]:</span> <span class="nx">boolean</span> <span class="p">}</span> <span class="o">=</span> <span class="p">{};</span>

<span class="k">export</span> <span class="kd">function</span> <span class="nx">DataCache</span><span class="o">&lt;</span><span class="nx">T</span> <span class="kd">extends</span> <span class="nx">IStorageService</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">options</span><span class="p">?:</span> <span class="nb">Partial</span><span class="o">&lt;</span><span class="nx">ICached</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">target</span><span class="p">:</span> <span class="nx">T</span><span class="p">,</span> <span class="nx">propertyKey</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">descriptor</span><span class="p">:</span> <span class="nx">PropertyDescriptor</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">originalMethod</span> <span class="o">=</span> <span class="nx">descriptor</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">cacheKey</span> <span class="o">=</span> <span class="nx">options</span><span class="p">?.</span><span class="nx">key</span> <span class="o">||</span> <span class="s2">`</span><span class="p">${</span><span class="nx">target</span><span class="p">.</span><span class="kd">constructor</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">.</span><span class="p">${</span><span class="nx">propertyKey</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>

    <span class="nx">descriptor</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(...</span><span class="nx">args</span><span class="p">:</span> <span class="kr">any</span><span class="p">[]):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="kr">any</span><span class="o">&gt;</span> <span class="p">{</span>

      <span class="kd">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">options</span><span class="p">?.</span><span class="nx">withArgs</span> <span class="p">?</span> <span class="s2">`</span><span class="p">${</span><span class="nx">cacheKey</span><span class="p">}</span><span class="s2">_</span><span class="p">${</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">args</span><span class="p">)}</span><span class="s2">`</span> <span class="p">:</span> <span class="nx">cacheKey</span><span class="p">;</span>

      <span class="c1">// wrap it in a fireOff function</span>
      <span class="kd">const</span> <span class="nx">fireOff</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="na">_data</span><span class="p">:</span> <span class="kr">any</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">storageService</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">_data</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="nx">_data</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">debug</span><span class="p">(</span><span class="dl">'</span><span class="s1">Cached </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">cacheKey</span><span class="p">));</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="c1">// lock first by adding a new entry</span>
          <span class="nx">locks</span><span class="p">[</span><span class="nx">cacheKey</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="k">return</span> <span class="nx">originalMethod</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">args</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
            <span class="nx">tap</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">storageService</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">options</span><span class="p">?.</span><span class="nx">expiresin</span><span class="p">);</span>
            <span class="p">}),</span>
            <span class="nx">finalize</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
              <span class="c1">// unlock by removing</span>
              <span class="k">delete</span> <span class="nx">locks</span><span class="p">[</span><span class="nx">cacheKey</span><span class="p">];</span>
            <span class="p">})</span>
          <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="c1">// check if locked, wait some miliseconds and fireOff anyway (no second check)</span>
      <span class="c1">// the timeout can be configurable and depends on project needs</span>
      <span class="k">return</span> <span class="nx">locks</span><span class="p">[</span><span class="nx">cacheKey</span><span class="p">]</span> <span class="p">?</span> <span class="nx">timer</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">switchMap</span><span class="p">(</span><span class="nx">fireOff</span><span class="p">))</span> <span class="p">:</span> <span class="nx">fireOff</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">descriptor</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre>

</div>



<p>We can keep the¬†<code>timeout</code>¬†value in a¬†<strong>configuration</strong>¬†file, or better yet pass it as an option. I find this to be quite project-specific, and an abstraction I do not wish to add to the basic seed. So we'll leave it at that.</p>

<p>Now watching the network tab in a page that has a list of items that call the data service, the first call is an¬†<strong>API call</strong>, all the rest are*<em>¬†local fetching</em><em>. (Cannot showcase that in StackBlitz because there is no real¬†<code>http</code>¬†call, but a simple console log in the mock data file, will show that the groups are fetched once). This might produce a nasty effect of¬†</em><em>slower label display</em>*, it feels like a nasty cloud provider with baggage and things to do üòé. No seriously, the effect is acceptable and does not hinder experience. To get rid of it however, we just need to check the cache first and return in case anything exists.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="c1">// services/data.decorator</span>

<span class="c1">// ...</span>
  <span class="c1">// check data first</span>
  <span class="kd">const</span> <span class="nx">_data</span><span class="p">:</span> <span class="kr">any</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">storageService</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">_data</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// if localStroage exist, return</span>
    <span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="nx">_data</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// then fireoff</span>
  <span class="kd">const</span> <span class="nx">fireOff</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// ...</span>
  <span class="p">}</span>

</code></pre>

</div>



<p>That's it, that's enough. Thanks for reading this far though.</p>

<h3>
  
  
  RESOURCES
</h3>

<ul>
<li>  <a href="https://angular.io/guide/pipes#caching-http-requests">Angular documentation</a>
</li>
<li>  <a href="https://stackblitz.com/edit/angular-cachable-content">StackBlitz project</a>
</li>
</ul>

<h3>
  
  
  RELATED POSTS
</h3>

<ul>
<li><p><a href="https://garage.sekrab.com/posts/localstorage-wrapper-service-in-angular">LocalStorage wrapper service in Angular</a></p></li>
<li><p><a href="https://garage.sekrab.com/posts/a-cache-decorator-in-angular">A cache decorator in Angular</a></p></li>
</ul>

 </details> 
 <hr /> 

 #### - [Angular Signals: what's all the fuss about?](https://dev.to/sparkfabrik/angular-signals-whats-all-the-fuss-about-3hm5) 
 <details><summary>Article</summary> <h2>
  
  
  Introduction
</h2>

<p>In the last couple of months the word <a href="https://angular.io/guide/signals">signals</a> has been said a lot in the Angular communities. Everybody already seems to either love them madly or reject them passionately.<br><br>
But for those of us who are late to the hype train: what are they? And what can they do or not do?<br><br>
Worry no more with FOMO as by the end of this article you will have a more comprehensive idea of where signals come from, how they work, and more importantly how they fit into the RxJS observables world.</p>
<h2>
  
  
  Genesis
</h2>

<p>Let's start with the basics: why were they created? One may think that it was just a matter of "let's add a new feature to the framework", but it's not that simple. And it's not even a matter of <em>copying</em> what other frameworks are doing, as signals are not a new concept, they have been around for a while, and they are used in other libraries like <a href="https://preactjs.com/guide/v10/signals/">Preact</a> or frameworks like <a href="https://www.solidjs.com/docs/latest/api#createsignal">SolidJS</a>. Indeed, SolidJS author himself says signals have been around "<a href="https://dev.to/this-is-learning/the-evolution-of-signals-in-javascript-8ob">since the dawn of declarative JavaScript Frameworks</a>".<br><br>
This is not a case of "monkey see, monkey do", but rather a case of <em>"let's see what we can do better"</em>.<br>
The reasoning behind these changes can be well represented by this quote by the tech lead of the Angular team, Alex Rickabaugh:</p>

<blockquote>
<p>The nature of web applications is always evolving, the performance requirements evolve, the web platform itself is evolving. So Angular needs to be stable, but not stagnant‚Äù. And so signals were born.</p>
</blockquote>

<p>As a matter of fact, for the last decade, Angular's team listened to the users' most requested features to improve the developer experience. Amongst other things, some reoccurring requests concerned the necessity to <strong>simplify</strong> the usage of Angular, requiring <strong>less boilerplate</strong> code, augmented <strong>performances</strong>, more <strong>reactivity</strong>, and <strong>finer control</strong> over the components.<br><br>
(Following this <a href="https://github.com/angular/angular/discussions/49090">link</a> you will find the PR that answered these requests, introducing signals for the first time.)</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--zetbIeb6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/cbw63nx379ah66mzmwrg.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--zetbIeb6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/cbw63nx379ah66mzmwrg.png" alt="Ikea signals meme" width="800" height="248"></a></p>
<h3>
  
  
  Change detection
</h3>

<p>To gain a better understanding of these requests, we must first digress a little bit, explaining a fundamental concept of Angular: <a href="https://angular.io/guide/change-detection">change detection</a>.<br><br>
At the time of writing the framework uses a library called <em>zone.js</em> to control the various changes of state inside the application.</p>

<p><em>Zone.js</em> tracks all the browser's events and every time it sees that something has changed, it starts a change detection cycle, in which it checks the components tree of the app to see if something has been modified, updating the views that need to be updated. On the one hand, this behavior is extremely useful because it automatically manages these checks, on the other hand, it underperforms because it constantly checks <strong>all</strong> of the components, sometimes even when there is no need to update anything.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--FiXQgvpx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4k264acxvyz8744ttkhn.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--FiXQgvpx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4k264acxvyz8744ttkhn.gif" alt="Zone.js change detection gif" width="312" height="243"></a></p>

<p>An alternative strategy can be to use <em>zone.js with OnPush</em> in every component. This makes it so that the component that uses it is not checked during a change detection cycle unless explicitly marked with the <code>markForCheck()</code> function.<br><br>
This behavior may seem similar to the one before, but the main difference is that <code>markForCheck()</code> doesn't automatically trigger the change detection for its component, but it just marks it to be checked on the next change detection cycle scheduled by zone.js .<br><br>
The downside to this strategy is that it marks not just the component that raised the <code>markForCheck()</code> flag, but <strong>also its parent nodes</strong>. So we have fewer components checked than before, but there is still some, let's say over-checking spillage.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Dg4igrWx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/18ypvvldeflfu5fjcwoo.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Dg4igrWx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/18ypvvldeflfu5fjcwoo.gif" alt="Zone.js with onpush change detection gif" width="284" height="247"></a></p>

<p>With <em>signals</em>, however, change detection is much more precise, indicating <strong>only</strong> the component, or components, that have undergone some changes.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--QAk9HCGz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/b2r5uaig4lpb9yhiqswa.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--QAk9HCGz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/b2r5uaig4lpb9yhiqswa.gif" alt="Signals change detection gif" width="250" height="245"></a></p>
<h2>
  
  
  But what is a signal?
</h2>

<p>A signal can be seen as a box around a value, and it can alert interested consumers when its value changes.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--jmPZM5-V--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/47c7j94pijfcaxu1rhfv.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--jmPZM5-V--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/47c7j94pijfcaxu1rhfv.png" alt="Box with value" width="427" height="333"></a></p>

<p>It can contain every kind of value, from primitive ones to more complex data structures. The value of a signal is always read using a getter function, which is what allows Angular to track when it has been used.<br><br>
<strong>Side note:</strong> as a signal contains a value, it must always be initialized, or by default, it will be equal to <code>undefined</code>, which is not ideal.</p>

<p>A signal can be of one of two categories:</p>

<ul>
<li>
<a href="https://angular.io/guide/signals#computed-signals">Writable</a>, which contains a value that can be directly edited</li>
<li>
<a href="https://angular.io/guide/signals#writable-signals">Computed</a>, in which the value is derived from other signals; in this case, we can't directly modify the computed value but this type has the added plus that it has a lazy approach. This means that its value will be re-evaluated not when the signals it checks are updated, but when a consumer tries to read the derived computed value, which makes it useful to do complex operations like array filtering.</li>
</ul>
<h2>
  
  
  Signals VS observables
</h2>

<p>By now, the more careful reader would probably start to think <em>"By this explanation, signals seem to be a copy of RxJS observables, as they seem to do the same thing, so are we reinventing the wheel here ?"</em>.<br><br>
To answer this question we need to open another small parenthesis before continuing, to get a clearer context for the ones among us who don't know what observables are.</p>
<h3>
  
  
  What is an observable?
</h3>

<p>An <a href="https://rxjs.dev/guide/observable">observable</a> is a collection of objects which can be observed in time, they are part of alibrary called <a href="https://rxjs.dev/guide/overview">RxJS</a> which is often used in tandem with the Angular framework to manage asynchronous events. Unlike a normal array it does not keep memory of the elements, it just emits them.<br><br>
To get a silly visual aid: we can imagine an observable as a fast food employee manning the drive-through window: it just knows that it has to deliver bags of objects to consumers as time passes, in an uninterrupted line of customers that go by during the day.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--PhU_zSju--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1sqd412rsfu9a1cugtkn.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--PhU_zSju--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1sqd412rsfu9a1cugtkn.png" alt="Observable as a drive through employee delivering data object to consumer" width="800" height="395"></a></p>

<p>As much as they can work with synchronous data, observables shine in working with asynchronous events (clicking on keyboard keys, mouse clicks, HTTP calls responses) or notifications (a completed or failed process). But they are not perfect, as observables require a manual subscription, and of course a manual un-subscription. Moreover, the data is not readily available but has to be extracted from the emitted values stream first.<br>
On the other hand, signals don't need a manual subscription, or more precisely, they have an implicit quasi-subscription automatically managed when a consumer starts listening to a signal's value.<br>
In addition, a signal can be called and read directly, immediately obtaining the value it encapsulates.<br>
These may seem like minor differences, but for <em>simpler</em> actions signals require much less code and, more importantly, less RxJS experience, which can be extremely powerful but also really difficult for new (and even not-so-new) devs.</p>
<h2>
  
  
  Are we going to use only signals?
</h2>

<p>So, the one-million-dollar question is: are signals better than observables?<br>
Well, it depends.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--2DAo6R-_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/wuwm9yoenydihkj8wpp9.jpg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--2DAo6R-_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/wuwm9yoenydihkj8wpp9.jpg" alt="It depends written over oranges apples meme" width="746" height="500"></a></p>

<p>If you need to observe (no pun intended) values that change with time, without knowing when they do change, so asynchronously, you will be better off using observables. Instead, if time isn't something you need to keep in the equation, you will need only signals, which are simpler to use.<br>
Realistically, in the future, we will most likely use signals for most use cases, and only in some particular circumstances we will need all the power of observables.</p>

<p>Having reflected upon these differences, you can see how titles that claim that the end of RxJS in favor of signals is imminent are just click-bait. It's just a matter of knowing when to use the right tool for the right job.<br>
More so, the RxJS team, seeing the big picture, has already implemented two functions that allow the <a href="https://angular.io/api/core/rxjs-interop">interoperability between signals and observables</a>:<br>
<code>toObservable()</code>and <code>toSignal()</code>, allowing the management of complex data flux or asynchronous data without having to give up the usage of signals.<br>
I want to highlight this point, as I think it's one of the key concepts of Angular and its libraries: to always allow retro compatibility, letting new and old functionalities live side-by-side without the risk of breaking anything, which is not to be taken for granted. So let's keep feuds to important matters, like if you can add heavy cream to a carbonara sauce (pro tip: never).</p>
<h2>
  
  
  Practical examples
</h2>

<p>Here are some practical examples before and after the usage of signals. They were made by <a href="https://www.youtube.com/@deborah_kurata">Deborah Kurata</a>, an amazing tech content creator. At this <a href="https://github.com/DeborahK/Angular-Signals">GitHub link</a> you will find the GitHub repository in which you can find her complete project.<br>
These examples are based upon a shopping app, in which we can add items to a cart, and then we can see the total price of the items in the cart. On the left we have the observables version, on the right the signals one. (<strong>Note:</strong> here I will call the signals version "after" and the observables one "before" for simplicity's sake. Also, the code is simplified for the sake of brevity, but the full code is available in the GitHub repo. Last but not least, instead of <em>Observable</em> observables, here are used <em>Subject</em> observables; <a href="https://rxjs.dev/guide/subject">an RxJS Subject is a special type of Observable that allows values to be multicasted to many Observers</a>, so for simplicity's sake I will refer to them just as <em>observables</em>).</p>

<p>Let's start with something simple: the differences in the HTML and TS files of the cart-total component. The differences are not huge, but they are there. Especially in the HTML file, in the <em>before</em> version, we have to use the async pipe to subscribe to the observable, while in the <em>after</em> version we can just call the signal directly; this can make a difference in streamlining the code if we have to use other pipes, as in the case of <code>| number</code>.</p>

<p><code>cart-total.component.html before</code><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight html"><code><span class="nt">&lt;div</span>
  <span class="na">class=</span><span class="s">"card border-secondary"</span>
  <span class="na">*ngIf=</span><span class="s">"(cartItems$ | async)?.length; else noItems"</span>
<span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card-header text-secondary fw-bold"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;</span>Cart Total<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card-body"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span><span class="nt">&gt;</span>Subtotal:<span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span> <span class="na">style=</span><span class="s">"text-align:right"</span><span class="nt">&gt;</span>
        {{subTotal$ | async | number:'1.2-2'}}
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span><span class="nt">&gt;</span>Delivery:<span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span>
        <span class="na">class=</span><span class="s">"col-md-4"</span>
        <span class="na">style=</span><span class="s">"text-align:right"</span>
        <span class="na">*ngIf=</span><span class="s">"deliveryFee$ | async as deliveryFee"</span>
      <span class="nt">&gt;</span>
        {{deliveryFee | number:'1.2-2'}}
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span>
        <span class="na">class=</span><span class="s">"col-md-4"</span>
        <span class="na">style=</span><span class="s">"text-align:right;color:red"</span>
        <span class="na">*ngIf=</span><span class="s">"!(deliveryFee$ | async)"</span>
      <span class="nt">&gt;</span>
        Free
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span><span class="nt">&gt;</span>Estimated Tax:<span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span> <span class="na">style=</span><span class="s">"text-align:right"</span><span class="nt">&gt;</span>
        {{tax$ | async | number:'1.2-2'}}
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span><span class="nt">&gt;&lt;b&gt;</span>Total:<span class="nt">&lt;/b&gt;&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span> <span class="na">style=</span><span class="s">"text-align:right"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;b&gt;</span>{{totalPrice$ | async | number:'1.2-2'}}<span class="nt">&lt;/b&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

</div>



<p><code>cart-total.component.html after</code><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight html"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card border-secondary"</span> <span class="na">*ngIf=</span><span class="s">"cartItems().length; else noItems"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card-header text-secondary fw-bold"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;</span>Cart Total<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card-body"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span><span class="nt">&gt;</span>Subtotal:<span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span> <span class="na">style=</span><span class="s">"text-align:right"</span><span class="nt">&gt;</span>
        {{subTotal() | number:'1.2-2'}}
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span><span class="nt">&gt;</span>Delivery:<span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span> <span class="na">style=</span><span class="s">"text-align:right"</span> <span class="na">*ngIf=</span><span class="s">"deliveryFee()"</span><span class="nt">&gt;</span>
        {{deliveryFee() | number:'1.2-2'}}
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span>
        <span class="na">class=</span><span class="s">"col-md-4"</span>
        <span class="na">style=</span><span class="s">"text-align:right;color:red"</span>
        <span class="na">*ngIf=</span><span class="s">"!deliveryFee()"</span>
      <span class="nt">&gt;</span>
        Free
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span><span class="nt">&gt;</span>Estimated Tax:<span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span> <span class="na">style=</span><span class="s">"text-align:right"</span><span class="nt">&gt;</span>
        {{tax() | number:'1.2-2'}}
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span><span class="nt">&gt;&lt;b&gt;</span>Total:<span class="nt">&lt;/b&gt;&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span> <span class="na">style=</span><span class="s">"text-align:right"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;b&gt;</span>{{totalPrice() | number:'1.2-2'}}<span class="nt">&lt;/b&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

</div>



<p><code>cart-total.component.ts before</code><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">CartTotalComponent</span> <span class="p">{</span>
  <span class="nx">cartItems$</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cartService</span><span class="p">.</span><span class="nx">cartItems$</span><span class="p">;</span>

  <span class="nx">subTotal$</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cartService</span><span class="p">.</span><span class="nx">subTotal$</span><span class="p">;</span>

  <span class="nx">deliveryFee$</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cartService</span><span class="p">.</span><span class="nx">deliveryFee$</span><span class="p">;</span>

  <span class="nx">tax$</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cartService</span><span class="p">.</span><span class="nx">tax$</span><span class="p">;</span>

  <span class="nx">totalPrice$</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cartService</span><span class="p">.</span><span class="nx">totalPrice$</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">cartService</span><span class="p">:</span> <span class="nx">CartService</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre>

</div>



<p><code>cart-total.component.ts after</code><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">CartTotalComponent</span> <span class="p">{</span>
  <span class="nx">cartService</span> <span class="o">=</span> <span class="nx">inject</span><span class="p">(</span><span class="nx">CartService</span><span class="p">);</span>

  <span class="nx">cartItems</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cartService</span><span class="p">.</span><span class="nx">cartItems</span><span class="p">;</span>

  <span class="nx">subTotal</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cartService</span><span class="p">.</span><span class="nx">subTotal</span><span class="p">;</span>

  <span class="nx">deliveryFee</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cartService</span><span class="p">.</span><span class="nx">deliveryFee</span><span class="p">;</span>

  <span class="nx">tax</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cartService</span><span class="p">.</span><span class="nx">tax</span><span class="p">;</span>

  <span class="nx">totalPrice</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cartService</span><span class="p">.</span><span class="nx">totalPrice</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>

</div>



<p>The most important differences, however, are in the cart service. In the <em>before</em> version, we have to manually subscribe to the observable, and then manually un-subscribe from it, which is not ideal. Especially considering that we will have to do it for <em>all</em> of the observables we use. In the <em>after</em> version, we can just call the signal directly, and it will be automatically managed by Angular.<br>
Another important difference is that in the <em>before</em> version we have to manually manage the initialization of the observables, while in the <em>after</em> version we can just initialize the signals with the value we want them to have.<br>
Also, in the <em>before</em> version, if we need to derive a value from other values, we have to use RxJS functions concatenated by .pipe(), which can make the code difficult to read for someone who doesn't know this library very well, while in the <em>after</em> version we can just use the <code>computed()</code> signal type, resulting in a much easier to understand code. We can also see how in the <em>before</em> version we have to use the <code>next()</code> function to update the value of the observable, specifying an action, while in the <em>after</em> version we can just update the value of the signal directly. Lastly, in the <em>after</em> version we don't need the <code>modifyCart()</code> function, as we can just update the value of the signal directly in the function, making following the flow of data more fluid.</p>

<p><code>cart.service.ts before</code><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">CartService</span> <span class="p">{</span>
  <span class="c1">// Add item action</span>
  <span class="k">private</span> <span class="nx">itemSubject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Subject</span><span class="o">&lt;</span><span class="nx">Action</span><span class="o">&lt;</span><span class="nx">CartItem</span><span class="o">&gt;&gt;</span><span class="p">();</span>
  <span class="nx">itemAction$</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemSubject</span><span class="p">.</span><span class="nx">asObservable</span><span class="p">();</span>

  <span class="nx">cartItems$</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemAction$</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span>
    <span class="nx">scan</span><span class="p">(</span>
      <span class="p">(</span><span class="nx">items</span><span class="p">,</span> <span class="nx">itemAction</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">modifyCart</span><span class="p">(</span><span class="nx">items</span><span class="p">,</span> <span class="nx">itemAction</span><span class="p">),</span>
      <span class="p">[]</span> <span class="k">as</span> <span class="nx">CartItem</span><span class="p">[]</span>
    <span class="p">),</span>
    <span class="nx">shareReplay</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="p">);</span>

  <span class="c1">// Total up the extended price for each item</span>
  <span class="nx">subTotal$</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cartItems$</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span>
    <span class="nx">map</span><span class="p">((</span><span class="nx">items</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="nx">items</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span>
        <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">.</span><span class="nx">quantity</span> <span class="o">*</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">.</span><span class="nx">cost_in_credits</span><span class="p">),</span>
        <span class="mi">0</span>
      <span class="p">)</span>
    <span class="p">)</span>
  <span class="p">);</span>

  <span class="c1">// Delivery is free if spending more than 100,000 credits</span>
  <span class="nx">deliveryFee$</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">subTotal$</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">map</span><span class="p">((</span><span class="nx">t</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">t</span> <span class="o">&lt;</span> <span class="mi">100000</span> <span class="p">?</span> <span class="mi">999</span> <span class="p">:</span> <span class="mi">0</span><span class="p">)));</span>

  <span class="c1">// Tax could be based on shipping address zip code</span>
  <span class="nx">tax$</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">subTotal$</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">map</span><span class="p">((</span><span class="nx">t</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span> <span class="mf">10.75</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">));</span>

  <span class="c1">// Total price</span>
  <span class="nx">totalPrice$</span> <span class="o">=</span> <span class="nx">combineLatest</span><span class="p">([</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">subTotal$</span><span class="p">,</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">deliveryFee$</span><span class="p">,</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tax$</span><span class="p">,</span>
  <span class="p">]).</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">map</span><span class="p">(([</span><span class="nx">st</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">t</span><span class="p">])</span> <span class="o">=&gt;</span> <span class="nx">st</span> <span class="o">+</span> <span class="nx">d</span> <span class="o">+</span> <span class="nx">t</span><span class="p">));</span>

  <span class="c1">// Add the vehicle to the cart as an Action&lt;CartItem&gt;</span>
  <span class="nx">addToCart</span><span class="p">(</span><span class="nx">vehicle</span><span class="p">:</span> <span class="nx">Vehicle</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">itemSubject</span><span class="p">.</span><span class="nx">next</span><span class="p">({</span>
      <span class="na">item</span><span class="p">:</span> <span class="p">{</span> <span class="nx">vehicle</span><span class="p">,</span> <span class="na">quantity</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span>
      <span class="na">action</span><span class="p">:</span> <span class="dl">"</span><span class="s2">add</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="c1">// Remove the item from the cart</span>
  <span class="nx">removeFromCart</span><span class="p">(</span><span class="nx">cartItem</span><span class="p">:</span> <span class="nx">CartItem</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">itemSubject</span><span class="p">.</span><span class="nx">next</span><span class="p">({</span>
      <span class="na">item</span><span class="p">:</span> <span class="p">{</span> <span class="na">vehicle</span><span class="p">:</span> <span class="nx">cartItem</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">,</span> <span class="na">quantity</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span>
      <span class="na">action</span><span class="p">:</span> <span class="dl">"</span><span class="s2">delete</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">updateInCart</span><span class="p">(</span><span class="nx">cartItem</span><span class="p">:</span> <span class="nx">CartItem</span><span class="p">,</span> <span class="nx">quantity</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">itemSubject</span><span class="p">.</span><span class="nx">next</span><span class="p">({</span>
      <span class="na">item</span><span class="p">:</span> <span class="p">{</span> <span class="na">vehicle</span><span class="p">:</span> <span class="nx">cartItem</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">,</span> <span class="nx">quantity</span> <span class="p">},</span>
      <span class="na">action</span><span class="p">:</span> <span class="dl">"</span><span class="s2">update</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="c1">// Return the updated array of cart items</span>
  <span class="k">private</span> <span class="nx">modifyCart</span><span class="p">(</span>
    <span class="nx">items</span><span class="p">:</span> <span class="nx">CartItem</span><span class="p">[],</span>
    <span class="nx">operation</span><span class="p">:</span> <span class="nx">Action</span><span class="o">&lt;</span><span class="nx">CartItem</span><span class="o">&gt;</span>
  <span class="p">):</span> <span class="nx">CartItem</span><span class="p">[]</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">operation</span><span class="p">.</span><span class="nx">action</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">add</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Determine if the item is already in the cart</span>
      <span class="kd">const</span> <span class="nx">itemInCart</span> <span class="o">=</span> <span class="nx">items</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span>
        <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="nx">operation</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">.</span><span class="nx">name</span>
      <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">itemInCart</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// If so, update the quantity</span>
        <span class="nx">itemInCart</span><span class="p">.</span><span class="nx">quantity</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">items</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span>
          <span class="nx">item</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="nx">itemInCart</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">.</span><span class="nx">name</span> <span class="p">?</span> <span class="nx">itemInCart</span> <span class="p">:</span> <span class="nx">item</span>
        <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">[...</span><span class="nx">items</span><span class="p">,</span> <span class="nx">operation</span><span class="p">.</span><span class="nx">item</span><span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">operation</span><span class="p">.</span><span class="nx">action</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">update</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">items</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="nx">item</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="nx">operation</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">.</span><span class="nx">name</span>
          <span class="p">?</span> <span class="nx">operation</span><span class="p">.</span><span class="nx">item</span>
          <span class="p">:</span> <span class="nx">item</span>
      <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">operation</span><span class="p">.</span><span class="nx">action</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">delete</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">items</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span>
        <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">.</span><span class="nx">name</span> <span class="o">!==</span> <span class="nx">operation</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">.</span><span class="nx">name</span>
      <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">[...</span><span class="nx">items</span><span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>

</div>



<p><code>cart.service.ts after</code><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">CartService</span> <span class="p">{</span>
  <span class="c1">// Manage state with signals</span>
  <span class="nx">cartItems</span> <span class="o">=</span> <span class="nx">signal</span><span class="o">&lt;</span><span class="nx">CartItem</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">([]);</span>

  <span class="c1">// Total up the extended price for each item</span>
  <span class="nx">subTotal</span> <span class="o">=</span> <span class="nx">computed</span><span class="p">(()</span> <span class="o">=&gt;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cartItems</span><span class="p">().</span><span class="nx">reduce</span><span class="p">(</span>
      <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">.</span><span class="nx">quantity</span> <span class="o">*</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">.</span><span class="nx">cost_in_credits</span><span class="p">),</span>
      <span class="mi">0</span>
    <span class="p">)</span>
  <span class="p">);</span>

  <span class="c1">// Delivery is free if spending more than 100,000 credits</span>
  <span class="nx">deliveryFee</span> <span class="o">=</span> <span class="nx">computed</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">subTotal</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">100000</span> <span class="p">?</span> <span class="mi">999</span> <span class="p">:</span> <span class="mi">0</span><span class="p">));</span>

  <span class="c1">// Tax could be based on shipping address zip code</span>
  <span class="nx">tax</span> <span class="o">=</span> <span class="nx">computed</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">subTotal</span><span class="p">()</span> <span class="o">*</span> <span class="mf">10.75</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">);</span>

  <span class="c1">// Total price</span>
  <span class="nx">totalPrice</span> <span class="o">=</span> <span class="nx">computed</span><span class="p">(</span>
    <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">subTotal</span><span class="p">()</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">deliveryFee</span><span class="p">()</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">tax</span><span class="p">()</span>
  <span class="p">);</span>

  <span class="c1">// Add the vehicle to the cart</span>
  <span class="c1">// If the item is already in the cart, increase the quantity</span>
  <span class="nx">addToCart</span><span class="p">(</span><span class="nx">vehicle</span><span class="p">:</span> <span class="nx">Vehicle</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cartItems</span><span class="p">().</span><span class="nx">findIndex</span><span class="p">(</span>
      <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="nx">vehicle</span><span class="p">.</span><span class="nx">name</span>
    <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Not already in the cart, so add with default quantity of 1</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">cartItems</span><span class="p">.</span><span class="nx">mutate</span><span class="p">((</span><span class="nx">items</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">items</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span> <span class="nx">vehicle</span><span class="p">,</span> <span class="na">quantity</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}));</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// Already in the cart, so increase the quantity by 1</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">cartItems</span><span class="p">.</span><span class="nx">mutate</span><span class="p">(</span>
        <span class="p">(</span><span class="nx">items</span><span class="p">)</span> <span class="o">=&gt;</span>
          <span class="p">(</span><span class="nx">items</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">vehicle</span><span class="p">,</span> <span class="na">quantity</span><span class="p">:</span> <span class="nx">items</span><span class="p">[</span><span class="nx">index</span><span class="p">].</span><span class="nx">quantity</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">})</span>
      <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="c1">// Remove the item from the cart</span>
  <span class="nx">removeFromCart</span><span class="p">(</span><span class="nx">cartItem</span><span class="p">:</span> <span class="nx">CartItem</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="c1">// Update the cart with a new array containing</span>
    <span class="c1">// all but the filtered out deleted item</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cartItems</span><span class="p">.</span><span class="nx">update</span><span class="p">((</span><span class="nx">items</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="nx">items</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">.</span><span class="nx">name</span> <span class="o">!==</span> <span class="nx">cartItem</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">updateInCart</span><span class="p">(</span><span class="nx">cartItem</span><span class="p">:</span> <span class="nx">CartItem</span><span class="p">,</span> <span class="nx">quantity</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Update the cart with a new array containing</span>
    <span class="c1">// the updated item and all other original items</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cartItems</span><span class="p">.</span><span class="nx">update</span><span class="p">((</span><span class="nx">items</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="nx">items</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="nx">item</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="nx">cartItem</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">.</span><span class="nx">name</span>
          <span class="p">?</span> <span class="p">{</span> <span class="na">vehicle</span><span class="p">:</span> <span class="nx">cartItem</span><span class="p">.</span><span class="nx">vehicle</span><span class="p">,</span> <span class="nx">quantity</span> <span class="p">}</span>
          <span class="p">:</span> <span class="nx">item</span>
      <span class="p">)</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>

</div>



<h2>
  
  
  Conclusion
</h2>

<p>Now that we can see the big picture we can reflect on the initial users' requests made to the Angular team and it will be clear that they have been heard and answered.<br><br>
Thanks to signals we will have more simplicity in usage to track values for changes in the apps, especially for those who are beginning to work with the framework, greatly reducing boilerplate code.<br>
They will give the apps more <strong>reactivity</strong>, giving a <strong>boost to performances</strong> more than even the zone.js + onPush strategy could, without losing any functionality. They will allow much <strong>finer control</strong> over single components and the value changes inside them, automatically managing the subscription/un-subscription part.<br><br>
But, as we have seen, signals will not replace observables completely, they will instead co-exist with them in harmony.<br><br>
Let's make <del>love</del> code, not war.</p>

 </details> 
 <hr /> 

 #### - [Mastering Version Control: Best Practices with Git for Development Teams](https://dev.to/sajeeb_me/mastering-version-control-best-practices-with-git-for-development-teams-1meo) 
 <details><summary>Article</summary> <p>Version control is the backbone of effective software development, and Git stands at the forefront as the go-to tool for managing source code. In this article, we will explore best practices for mastering Git in your development team, focusing on clarity, comprehensibility, and efficiency.</p>

<h2>
  
  
  Why Version Control Matters
</h2>

<p>Before diving into Git best practices, it's important to understand why version control is so crucial for development teams. Version control systems (VCS) like Git offer several benefits:</p>

<ol>
<li><p><strong>Collaboration</strong>: Multiple developers can work on the same codebase simultaneously without conflicts. Changes can be merged systematically.</p></li>
<li><p><strong>History and Accountability</strong>: Every change made to the codebase is tracked, providing a historical record of who made each change and when. This helps trace and resolve issues.</p></li>
<li><p><strong>Backup and Recovery</strong>: Your codebase is stored in a centralized repository, providing a backup of your work. You can recover previous states of the code easily.</p></li>
<li><p><strong>Branching</strong>: Developers can create branches to work on features or bug fixes independently. This isolates changes until they are ready to be merged.</p></li>
</ol>

<p>Now, let's explore some best practices for using Git effectively in development teams.</p>

<h2>
  
  
  Best Practices for Git Usage
</h2>

<h3>
  
  
  1. <strong>Clear and Concise Commit Messages</strong>
</h3>

<p>Your Git history is essentially a story of your code's evolution. To ensure this story is comprehensible, write clear and concise commit messages:</p>

<ul>
<li><p>Use descriptive commit messages that accurately portray the changes made.</p></li>
<li><p>Employ the imperative mood in your commit messages (e.g., "Add feature" instead of "Added feature").</p></li>
<li><p>Keep commits small and focused on a single change. This improves code review and makes it easier to pinpoint issues if they arise.</p></li>
</ul>

<h3>
  
  
  2. <strong>Commit Early and Often</strong>
</h3>

<p>Committing frequently is a fundamental practice in Git. It allows you to monitor code changes over time and simplifies the process of reverting changes when necessary. Consider these points:</p>

<ul>
<li><p>Commit as soon as you complete a task or resolve a bug. This provides a granular history of your work.</p></li>
<li><p>Attach descriptive commit messages to each commit to facilitate understanding.</p></li>
</ul>

<h3>
  
  
  3. <strong>Avoid Committing Half-Done Work</strong>
</h3>

<p>Only commit code that is complete and tested. Committing incomplete work can lead to confusion and hinder collaboration. Here's how to avoid this pitfall:</p>

<ul>
<li><p>Utilize branches to isolate incomplete changes, keeping the main branch clean.</p></li>
<li><p>Employ feature flags to hide unfinished features from end-users.</p></li>
<li><p>Enforce code reviews to ensure that code is complete and adequately tested before merging.</p></li>
</ul>

<h3>
  
  
  4. <strong>Test Before Committing</strong>
</h3>

<p>Testing your code before committing is vital for maintaining a stable and functional codebase:</p>

<ul>
<li><p>Write automated tests for your code to ensure its correctness and reliability.</p></li>
<li><p>Execute these tests before committing your changes to prevent introducing regressions.</p></li>
<li><p>Implement continuous integration (CI) to automate test execution with every commit, ensuring code quality.</p></li>
</ul>

<h3>
  
  
  5. <strong>Documentation Matters</strong>
</h3>

<p>Clear and concise documentation enhances the overall understanding of your project. Incorporate these practices into your workflow:</p>

<ul>
<li><p>Write comprehensive README files explaining the project's purpose, installation, and usage.</p></li>
<li><p>Document your Git workflow and best practices to maintain consistency within your team.</p></li>
</ul>

<h2>
  
  
  Conclusion
</h2>

<p>Git is an indispensable tool for development teams worldwide. By adhering to these best practices, your team can harness Git's power to maintain a clear and comprehensible Git history. Committing early and often, testing before committing, writing meaningful commit messages, and avoiding half-done work are just a few of the best practices that will help you get the most out of Git.</p>

<blockquote>
<p>Mastering Git is a journey that pays off in terms of code quality, collaboration, and the ability to effectively manage your codebase over time. So, commit to these best practices, and your team will reap the benefits of a well-structured version control system.</p>
</blockquote>

 </details> 
 <hr /> 
<!-- BLOG-POST-LIST:END -->
</table>
</details>


<!-- TODO
Change the 3stats boxes around, possibly two on top and one on bottom
Fix RSSfeed
Fix Spotify Playlists
Fix Socials [Portfolio, Discord, Linkedin]
In the future, add Public Repositories of Selected Projects
-->
