<!-- VISITOR BADGE -->
<!-- https://github.com/hehuapei/visitor-badge -->

<img align="right" src="https://visitor-badge.laobi.icu/badge?page_id=mao1910.mao1910&left_color=%2379DAF9&right_color=%23FE6E96" />


<!-- TYPING SVG -->
<!-- https://github.com/DenverCoder1/readme-typing-svg -->

<h1 align="center">
    <img src="https://readme-typing-svg.herokuapp.com/?font=Righteous&size=35&center=true&vCenter=true&width=500&height=70&color=FE6E96&font=poppins&duration=5000&lines=Hi+There!+üëã;+I'm+Mao!;" />
</h1>

<br/>


<!-- ABOUT ME TERMINAL -->
<h1 align="center">
<img src="./assets/terminal-5.gif" alt="Terminal" />
</h1>

<br/><br/><br/>


<!-- TECHNOLOGIES LOGOS -->
<!-- https://github.com/tandpfun/skill-icons -->

<h2 align="center">üíª Languages / Frameworks / Tools ‚öíÔ∏è</h2>
<div align="center">
    <img src="https://skillicons.dev/icons?i=javascript,typescript,angular,react,html,css,scss,bootstrap,cs,java,spring" />
    <img src="https://skillicons.dev/icons?i=flutter,firebase,supabase,mysql,git,github,gitlab,vscode,idea,maven,figma" />
</div>

<br/><br/><br/>


<!-- CONTRIBUTIONS SNAKE GAME -->
<!-- https://github.com/Platane/snk -->

<div align="center">
  <h2> My Contributionssssüêç </h2>
  <br>
  <img alt="contributions-eating Snake" src="https://raw.githubusercontent.com/mao1910/mao1910/output/github-contribution-grid-snake.svg" />

  <!-- Four lines below suggested by Planate for Dark mode-->
  <picture>
  <source media="(prefers-color-scheme: dark)" srcset="github-snake-dark.svg" />
  <source media="(prefers-color-scheme: light)" srcset="github-snake.svg" />
  </picture>
  
  <br/><br/><br/>
</div>


<!-- GITHUB STATS -->
<!-- https://github.com/DenverCoder1/github-readme-streak-stats --> <!--  My Vercel -->
<!-- https://github.com/anuraghazra/github-readme-stats --> <!--  My  Vercel -->

<h2 align="center"> Statsüìù </h2>
  <br>
<div align=center>
  <img width=429 src="https://github-readme-stats-mao1910.vercel.app/api?username=mao1910&count_private=true&show_icons=true&theme=dracula&rank_icon=github&hide=contribs&border_radius=10&border_color=79DAF9" alt="github stats"/>
  <img width=396 src="https://github-readme-streak-stats-2235.vercel.app?user=mao1910&count_private=true&theme=dracula&currStreakNum=79DAF9&currStreakLabel=FE6E96&border_radius=10&border=79DAF9" alt="streak stats"/>
  <br/>
  <img src="https://github-readme-stats-mao1910.vercel.app/api/top-langs/?username=mao1910&layout=compact&theme=dracula&border_radius=10&size_weight=0.5&count_weight=0.5&border_color=79DAF9" alt="languages stats" />
</div>

<br/><br/><br/>


<!-- FOOTER -->
<!-- https://github.com/DenverCoder1/readme-typing-svg -->
<!-- https://readme-typing-svg.demolab.com/demo/ -->

<a href="https://git.io/typing-svg"><img src="https://readme-typing-svg.demolab.com?font=Poppins&pause=1000&color=FE6E96&width=535&lines=Thanks+for+dropping+by!;Feel+free+to+check+any+of+the+Socials+below+%F0%9F%91%87;Or+the+Joke+Of+The+Day+if+you're+down+for+a+giggle+%F0%9F%98%9D;Hope+to+see+you+again+%F0%9F%91%8A;Uh%3F+You're+still+here%3F;Well...+I'm+running+out+of+things+to+say...;Tell+you+what%2C+due+to+your+effort+and+perseverance%2C;I+shall+present+you+with+a+short+poem%3A;%22To+code%2C+or+not+to+code%2C+that+is+the+question%3A;Whether+'tis+nobler+in+the+IDE+to+debug;The+errors+and+issues+of+outrageous+software%2C;Or+to+take+up+the+keyboard+against+a+sea+of+bugs;And+by+coding%2C+end+them.%22;by+William+Shakespeare%2C+probably.+;Pretty+sure+that's+Hamlet's.;Alrighty%2C+this+has+been+fun.;But+I'll+restart+the+loop+now...+see+ya+soon!" alt="Typing SVG" /></a>


<!--  SOCIAL NETWORKS -->
<!-- https://github.com/alexandresanlim/Badges4-README.md-Profile -->

  <div> 
    <a href="https://www.deviantart.com/madeinkobaia/art/my-profile-is-under-construction-265626465" target="_blank"><img src="https://img.shields.io/badge/-LinkedIn-%230077B5?style=for-the-badge&logo=linkedin&logoColor=white" target="_blank"></a> <!-- ADD LINKEDIN PROFILE -->
    <a href = "https://www.nicepng.com/ourpic/u2q8o0t4t4r5o0r5_website-under-construction-png-graphic-transparent-website-under/"><img src="https://img.shields.io/badge/Portfolio-4285F4?style=for-the-badge&logo=Google-chrome&logoColor=white" target="_blank"></a> <!-- ADD PORTFOLIO WEBSITE -->
    <a href="https://discord.gg" target="_blank"><img src="https://img.shields.io/badge/Discord-7289DA?style=for-the-badge&logo=discord&logoColor=white" target="_blank"></a> <!-- ADD DISCORD --> <!-- User or Server? -->
    <a href = "mailto:mao1910dev@gmail.com"><img src="https://img.shields.io/badge/Gmail-D14836?style=for-the-badge&logo=gmail&logoColor=white" target="_blank"></a>
  </div>


<!-- SPOTIFY PLAYING-->
<!-- https://github.com/novatorem/novatorem --> <!-- My own Vercel deployment-->

[<img width=438px src="https://spotify-now-playing-git-main-mao1910.vercel.app//api/spotify/?border_color=FE6E96" alt="Mao Spotify Now Playing" />](https://open.spotify.com/user/31542et242zglhf42ydrtqgvuvde)


<!-- JOKE OF THE DAY -->
<!-- https://github.com/ABSphreak/readme-jokes --> <!-- My own Vercel deployment-->

<details>
<summary>I've got a Joke for you. Wanna hear it? üôà</summary>

<br/>

 <tr>
 <td style="padding-top:4px"><img src = "https://readme-jokes-git-master-mao1910.vercel.app/api?&theme=dracula"></td>
 </tr>

</details>


<!-- RSS FEED -->
<!-- https://github.com/gautamkrishnar/blog-post-workflow -->

<details>
<summary>üìï &nbsp;RSS feed</summary>

<br/>


<!-- BLOG-POST-LIST:START -->
 #### - [Basic Python Project Layout](https://dev.to/cwprogram/basic-python-project-layout-1pg2) 
 <details><summary>Article</summary> <ul>
<li>
Python Installation

<ul>
<li>Windows</li>
<li>Mac OSX</li>
<li>Linux (Fedora)</li>
<li>Linux (Ubuntu 22.04)</li>
</ul>


</li>
<li>Virtual Environment</li>
<li>Project Setup</li>
<li>Writing Code</li>
<li>Building Python Code</li>
<li>A Simple Test Case</li>
<li>Conclusion</li>
</ul>



<p>The modern way of building python projects has changed a bit from the traditional way I've seen a lot of tutorials cover. This is even more so true with the release of Python 3.12 which changes some of the rules for how python projects operate. In this series I'd like to explore a more modern form of python project creation, starting at a very basic skeleton project to get acclimated to how things work. Then I'll start to introduce new features over the course of the series to improve your overall project.</p>

<h2>
  
  
  Python Installation
</h2>

<p>It's pretty difficult to develop a python project without, well, python! I'll introduce the most straightforward installation methods for various operating systems that beginners might have. I'll be targeting 3.11 for the python version to install. While 3.12 is technically the latest, it still needs some time for popular packages to support it so I don't recommend it currently for beginner use.</p>

<h3>
  
  
  Windows
</h3>

<p>Installing python for Windows is extremely simple. Just download the latest 3.11 installer you see on the <a href="https://www.python.org/downloads/windows/">downloads page</a>. You can just accept the defaults for everything. Once finished you may need to restart any terminal/powershell session you were working with to pickup the new version. If you're more comfortable with a slightly different installation method, you can also use <a href="https://chocolatey.org/install">chocolatey</a>. Once it's installed simply run:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&gt; choco install python311
</code></pre>

</div>



<p>as an admin user. It uses the same Windows installers from the downloads page but makes the installation process a lot more automated. This can be useful for installing multiple versions later on in a hassle free manner.</p>

<h3>
  
  
  Mac OSX
</h3>

<p>For this I'm actually going to suggest a more unorthodox method and recommend using the <a href="https://www.python.org/downloads/macos/">Mac OS installers</a>. Version selection is the same as windows simply picking the most up to date 3.11 version. For those wondering why I didn't suggest homebrew, it's because that requires the XCode tools installation which I'd rather not have newcomers to the language deal with (especially if something goes wrong during compilation).</p>

<h3>
  
  
  Linux (Fedora)
</h3>

<p>I find that Fedora's installation method makes it one of the more user friendly ways of installing python (it also supports a wide variety of python versions out of the box, something that will be useful later). To install 3.11 simply run:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>$ sudo dnf check-update
$ sudo dnf install python3.11

</code></pre>

</div>



<p><code>dnf check-update</code> is used to update the list of available packages to make sure we're installing the latest supported version of 3.11.</p>

<h3>
  
  
  Linux (Ubuntu 22.04)
</h3>

<p>While slightly similar to Fedora in regards to installation, Ubuntu needs one more step to open up a wider range of python versions:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>$ sudo add-apt-repository ppa:deadsnakes/ppa -y
$ sudo apt-get update
</code></pre>

</div>



<p>This will setup the deadsnakes package installation source. It's a popular method for installing python versions in Ubuntu. Note that python 3.11 is technically available as an installable package. If you see any output from <code>sudo apt list --installed | grep 3.11</code> with python in it you can skip this step. If you don't go ahead and install it:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>$ sudo apt-get install python3.11-full
</code></pre>

</div>



<h2>
  
  
  Virtual Environment
</h2>

<p><a href="https://docs.python.org/3/library/venv.html">Virtual Environments</a> are a feature that has been part of python itself since version 3.3. It allows you to isolate both a python version and any packages you install with it. Every python project I develop with uses a virtual environment for such isolation purposes. Now I generally like to create these virtual environments inside the target project's directory so I know exactly what it's tied to. If you use GitHub's <a href="https://github.com/github/gitignore/blob/main/Python.gitignore">python gitignore file</a> naming the virtual environment folder as <code>venv</code> or <code>.venv</code> will <a href="https://github.com/github/gitignore/blob/main/Python.gitignore#L122-L129">ensure it doesn't get committed</a> (which you don't want). So I'll make a new project folder and create a virtual environment inside of it:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>$ mkdir my-python-test
$ cd my-python-test
$ python3.11 -m venv venv
</code></pre>

</div>



<p>Now there are two important things happening here in the final command:</p>

<ul>
<li>
<code>python3.11</code>: We're explicitly calling the exact python version we want. Python can have multiple versions installed at the same time, which sometimes can make it difficult to handle which version <code>python</code> by itself is bound to. You should always use this explicit version form unless you're inside of a virtual environment.</li>
<li>
<code>-m venv</code> This is a special way to call certain python packages. Some packages have executable scripts attached to them, such as <code>venv</code>. However, if we call them without being in a virtual environment there's can be confusion on which version of python that executable script is associated with. To avoid this we use the special <code>python3.11 -m venv</code> form so we know  the venv executable script is being run specifically on python3.11 and avoids confusion. This is also a best practice for python development.</li>
</ul>

<p>In its current state the virtual environment has been setup, but we need to activate in order for it to actually work. Activating a virtual environment can be done as follows:</p>

<p><strong>Linux/MacOS</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>$ source venv/bin/activate
</code></pre>

</div>



<p><strong>Windows</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&gt; .\venv\Scripts\activate.ps1
</code></pre>

</div>



<p>Your command prompt should now have a <code>(venv)</code> at the front of it to clearly indicate you're inside a virtual environment. If later on you want to switch to another virtual environment you can simply run:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>$ deactivate
</code></pre>

</div>



<p>to do so. Then the next time you want to use that virtual environment again then simply run the respective activate script according to your operating system.</p>

<h2>
  
  
  Project Setup
</h2>

<p>Before continuing make sure you've got the previously created virtual environment activated again. Then in your editor of choice, create a file named <code>pyproject.toml</code> in the project directory. Now add content like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight toml"><code><span class="nn">[build-system]</span>
<span class="py">requires</span> <span class="p">=</span> <span class="nn">["setuptools&gt;=61.0"]</span>
<span class="py">build-backend</span> <span class="p">=</span> <span class="s">"setuptools.build_meta"</span>

<span class="nn">[project]</span>
<span class="py">name</span> <span class="p">=</span> <span class="s">"my_python_test"</span>
<span class="py">version</span> <span class="p">=</span> <span class="s">"0.0.1"</span>
<span class="py">authors</span> <span class="p">=</span> <span class="p">[</span>
  <span class="err">{</span> <span class="py">name</span><span class="p">=</span><span class="s">"Chris White"</span><span class="p">,</span> <span class="py">email</span><span class="p">=</span><span class="s">"dont-spam-me@no.spam"</span> <span class="err">}</span><span class="p">,</span>
<span class="p">]</span>
<span class="py">description</span> <span class="p">=</span> <span class="s">"A small example package"</span>
<span class="py">readme</span> <span class="p">=</span> <span class="s">"README.md"</span>
<span class="py">requires-python</span> <span class="p">=</span> <span class="py">"&gt;</span><span class="p">=</span><span class="mf">3.9</span><span class="s">"</span><span class="err">
</span><span class="py">classifiers</span> <span class="p">=</span> <span class="p">[</span>
    <span class="s">"Programming Language :: Python :: 3"</span><span class="p">,</span>
    <span class="s">"License :: OSI Approved :: MIT License"</span><span class="p">,</span>
    <span class="s">"Operating System :: OS Independent"</span><span class="p">,</span>
<span class="p">]</span>
</code></pre>

</div>



<p>A few fields that can differ from project to project:</p>

<ul>
<li>
<code>my_python_test</code> is used for the module name. Module names don't work well with hyphens so we use lowercase instead. Package names on the other hand (the folder that contains everything) can named with hyphens and cause no issues.</li>
<li>
<code>authors</code>: Here you'll put your own name instead, as well as an email address.</li>
<li>
<code>version</code>: This can be used to keep track of the version of your package. </li>
</ul>

<p>Now that our project is configured it's time to setup the project's directory structure. First we'll add some documentation files which are also useful if you plan to share the code in someplace such as <a href="https://github.com/">GitHub</a>. Create a new file called <code>README.md</code> using your favorite editor in the project directory with whatever content you want to introduce the project:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight markdown"><code><span class="gu">## My Python Test Project</span>

This is a sample python project for learning how python project layout works.
</code></pre>

</div>



<p>Another recommendation is to include a LICENSE file. This gives rules on what others can do with your code. Some users won't even install or use your code at all if there's no LICENSE. While technically not required for this sample project, it's a good habit to get into if you plan to share your python code with others later. The site <a href="https://choosealicense.com/">Choose an open source license</a> is a resource I highly recommend. I tend to go with the <a href="https://choosealicense.com/licenses/mit/">MIT license</a> for most of my projects:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>MIT License

Copyright (c) 2023 Christopher White

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
</code></pre>

</div>



<p>The copyright notice should be updated to the current year and your full name. If you prefer another license that's fine as well. You just want to be sure the license exists! Now to make a directory for our code:</p>

<p><strong>Windows</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&gt; New-Item -name src\my_python_test -Force -Type Directory
</code></pre>

</div>



<p><strong>Linux/MacOS</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>$ mkdir -p src/my_python_test
</code></pre>

</div>



<p>Next we'll create a blank file named <code>__init__.py</code> in the new directory:</p>

<p><strong>Windows</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&gt; New-Item -name src\my_python_test\__init__.py -Type File
</code></pre>

</div>



<p><strong>Linux/MacOS</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>$ touch -p src/my_python_test/__init__.py
</code></pre>

</div>



<p>This is a special file to describe the code in the same directory as importable. There are other uses for it as well, but not too important if you're just starting out.</p>

<h2>
  
  
  Writing Code
</h2>

<p>Now it's time to write our python code. For python there's actually a very simple python GUI IDE called <a href="https://docs.python.org/3/library/idle.html">IDLE</a> built in. It's fine to use your editor of choice if you want (especially if you're not in a GUI environment). I'll go ahead and open IDLE like so:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>$ python -m idlelib src/my_python_test/mymath.py
</code></pre>

</div>



<p>I would recommend immediately heading over to <code>Options</code> -&gt; <code>Configure IDLE</code> to customize the way it looks to your liking. Mine looks something like this after customization:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--JGpUNJc8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/6jp2atcf347mzstbiezy.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--JGpUNJc8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/6jp2atcf347mzstbiezy.png" alt="screenshot of the IDLE UI" width="800" height="529"></a></p>

<p>From here I'll add in some functions which do very simple mathematical operations for demonstration purposes:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight python"><code><span class="k">def</span> <span class="nf">add_numbers</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="k">def</span> <span class="nf">subtract_numbers</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>

<span class="k">def</span> <span class="nf">multiply_numbers</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>

<span class="k">def</span> <span class="nf">divide_numbers</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span>
</code></pre>

</div>



<p>Now if you save the file and then go to <code>Run</code> -&gt; <code>Run Module</code> it will load the code into something called a REPL. This let's you run python code interactively. The REPL includes some interesting features such as tab completion of functions and parameter hints to let you know what the function is expecting for input:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--4XwtVnvs--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/uhjtqap1y0cmifcd2xmt.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--4XwtVnvs--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/uhjtqap1y0cmifcd2xmt.png" alt="A screenshot showing the IDLE REPL giving parameter hints for the add_numbers function" width="333" height="53"></a></p>

<p>From here I can try out all of the functions I defined in <code>mymath.py</code>:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--btbhcK95--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8vy3m65g42kqcjuvdlgj.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--btbhcK95--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8vy3m65g42kqcjuvdlgj.png" alt="A screenshot showing an IDLE REPL session where I use all of the above functions" width="275" height="181"></a></p>

<p>Text Version:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>add_numbers(3, 4)
7
subtract_numbers(5, 3)
2
multiply_numbers(3, 3)
9
divide_numbers(6, 3)
2.0
</code></pre>

</div>



<p>Now we're done writing code for now so go ahead and exit out of IDLE (or your editor of choice).</p>

<h2>
  
  
  Building Python Code
</h2>

<p>In order to easily build the code here I'm going to be using the PyPA <a href="https://pypa-build.readthedocs.io/en/stable/index.html">build module</a>. <code>pip</code> is python's package manager and used both directly and indirectly to install python packages. It's similar to <code>npm</code> for NodeJS and <code>gem</code> for Ruby. To install the build module simply run:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>$ python -m pip install build
</code></pre>

</div>



<p>Now we can build the project by running:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>$ python -m build
&lt;snip&gt;
Successfully built my-python-test-0.0.1.tar.gz and my_python_test-0.0.1-py3-none-any.whl
</code></pre>

</div>



<p>So we've ended up with two files. What exactly is their purpose? The first is called an sdist or source distribution. In this case there isn't much difference in content, but in some builds it may contain extra files necessary to build the python code on a target system. Depending on what your dependencies and target user OS looks like, this is the version that may get used. Wheels (<code>whl</code>) on the other hand are very simple installers where everything you need is included. There are some caveats with this which I might cover in a later installment. With these built I can use <code>pip</code> to install my package locally:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&gt; python -m pip install ./dist/my_python_test-0.0.1-py3-none-any.whl
Processing c:\users\johndoe\my-python-test\dist\my_python_test-0.0.1-py3-none-any.whl
Installing collected packages: my-python-test
Successfully installed my-python-test-0.0.1
</code></pre>

</div>



<p>I can also test this out in the python REPL:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&gt; python
Python 3.11.5 (tags/v3.11.5:cce6ba9, Aug 24 2023, 14:38:34) [MSC v.1936 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; from my_python_test.mymath import add_numbers
&gt;&gt;&gt; add_numbers(1,3)
4
&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.exit()
</code></pre>

</div>



<p>Don't worry too much about the <code>from</code> statement for now, just know that it's how we import our now installed code. In a later installment we'll look at how code can be organized more efficiently.</p>

<h2>
  
  
  A Simple Test Case
</h2>

<p>For this section I just want to show that testing python code is a feature. I won't dive too much into testing as a whole since it's a subject that deserves its own article, maybe its own series. It's recommended to put tests into their own directory:</p>

<p><strong>Windows</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&gt; New-Item -Name tests -Type Directory
</code></pre>

</div>



<p><strong>Linux/MacOS</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>$ mkdir tests
</code></pre>

</div>



<p>Since unit tests are written in python, we can use IDLE or editor of choice again:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>$ python -m idlelib tests/test_mymath.py
</code></pre>

</div>



<p>Then the tests will look like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">my_python_test.mymath</span> <span class="kn">import</span> <span class="n">add_numbers</span><span class="p">,</span> <span class="n">subtract_numbers</span><span class="p">,</span> <span class="n">multiply_numbers</span><span class="p">,</span> <span class="n">divide_numbers</span>

<span class="k">class</span> <span class="nc">TestMyMathMethods</span><span class="p">(</span><span class="n">unittest</span><span class="p">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_add</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">add_numbers</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_subtract</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">subtract_numbers</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="o">-</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">subtract_numbers</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">multiply_numbers</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">multiply_numbers</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_divide</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">divide_numbers</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="mf">2.0</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="p">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="nb">ZeroDivisionError</span><span class="p">):</span>
            <span class="n">divide_numbers</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">unittest</span><span class="p">.</span><span class="n">main</span><span class="p">()</span>
</code></pre>

</div>



<p>So here there are some interesting test cases where I'm looking for things like:</p>

<ul>
<li>Negative numbers when subtracting</li>
<li>Multiplication by 0 produces 0</li>
<li>Python throws an error if I attempt to divide by 0</li>
</ul>

<p>If I go to the project's <code>src/</code> directory an run:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>$ cd src/
$ python -m unittest discover ../tests
....
----------------------------------------------------------------------
Ran 4 tests in 0.000s

OK
</code></pre>

</div>



<p>It shows that all my tests look fine. Now if I change my <code>test_add</code> to this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight python"><code>    <span class="k">def</span> <span class="nf">test_add</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">add_numbers</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span>
</code></pre>

</div>



<p>When running this test suite I get a failure:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&gt; python -m unittest discover ../tests
F...
======================================================================
FAIL: test_add (test_mymath.TestMyMathMethods.test_add)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\johndoe\my-python-test\tests\test_mymath.py", line 7, in test_add
    self.assertEqual(add_numbers(2, 3), 6)
AssertionError: 5 != 6
</code></pre>

</div>



<p>Since as the failure indicates 2+3 does not equal 6. With this we have our project fairly well setup.</p>

<h2>
  
  
  Conclusion
</h2>

<p>This concludes a beginner look at how to develop a python package using a modern package layout. This includes:</p>

<ul>
<li>Installing python</li>
<li>Setting up a virtual environment</li>
<li>Calling modules via the <code>python -m module</code> format</li>
<li>Creating a <code>pyproject.toml</code> file, LICENSE, and README.md</li>
<li>Developing module code with IDLE</li>
<li>Building python code</li>
<li>Testing python code</li>
</ul>

<p>Now all this might start to become rather tedious as we add more projects. In the next installment I'll be looking at different solutions to automate python project creation and different types of code layouts.</p>

 </details> 
 <hr /> 

 #### - [Exploratory Data Analysis (EDA)and visualization Techniques](https://dev.to/lornam12/exploratory-data-analysis-edaand-visualization-techniques-5gdp) 
 <details><summary>Article</summary> <p>EDA is a data analysis technique that mainly focuses on on understanding the characteristics of a dataset. It involves using various statistical and visualization tools to explore data, identify patterns and uncover insights and relationships.</p>

<p>Exploratory data analysis is an important step in the data analysis step. This is because it ensures that the data is really what it is claimed to be and that there are no obvious errors e.g missing values, outliers etc. EDA enhances accuracy, efficiency and reliability of data.</p>

<p>Data visualization on the other hand represents the various techniques used to represent data visually through charts, tables, maps, graphs and other visual elements. These techniques usually help to represent complex data in a more simplified and understandable format.</p>

<p><strong>Common graphs used while performing EDA</strong><br>
Scatter Plot<br>
Pair plots<br>
Histogram<br>
Box plots<br>
Violin Plot</p>

<p><strong>Performing EDA</strong><br>
We are going to use  a sample dataset which is the Haberman Dataset to perform EDA.</p>

<p>We start by importing several python libraries'</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--fBAwG7Wr--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/xv8ndbgiwvn6c54a2r6n.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--fBAwG7Wr--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/xv8ndbgiwvn6c54a2r6n.png" alt="Image description" width="487" height="117"></a></p>

<p><strong>Table Headers</strong></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--nu5zAV4F--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ttjp0vdr31ey6zscowau.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--nu5zAV4F--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ttjp0vdr31ey6zscowau.png" alt="Image description" width="388" height="146"></a></p>

<p>Age -Represents the age of the patients undergone the surgery. It ranges from 30 to 83. </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--5c7g85Od--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/94etdh60a13s7ln1fxo9.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--5c7g85Od--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/94etdh60a13s7ln1fxo9.png" alt="Image description" width="351" height="254"></a></p>

<p>Year- Year in which the patients had the operation. It ranges from 1958-1969.</p>

<p>Nodes - A lymph node, or lymph gland is a kidney-shaped organ of the lymphatic system, and the adaptive immune system.</p>

<p>Status ‚Äî Denoted by 1 and 2. 1 means the patient survived 5 years or longer and 2 means the patient died within 5 years.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XG_SbHtW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rmn0cw0uyh9k4iywfyyp.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XG_SbHtW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rmn0cw0uyh9k4iywfyyp.png" alt="Image description" width="373" height="107"></a></p>

<p>From the above code, 225 patients survived 5 years or longer and 81 patients died within 5 years.</p>

<p><strong>Data Visualization plots</strong><br>
Helps us understand the dataset much better in a visual way.</p>

<p><strong>Histograms</strong><br>
These are 2-D plots where the X axis can be divided into time intervals or numerical bin ranges. Histograms help in identifying patterns such as skewness, central tendencies, and outliers.</p>

<p>From our example above:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--1UgpsGQL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mixk2l2ttt09ly5cf610.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--1UgpsGQL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mixk2l2ttt09ly5cf610.png" alt="Image description" width="470" height="105"></a></p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--yDNz1_Xs--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/crqg0k8cpog70xbawdy7.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--yDNz1_Xs--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/crqg0k8cpog70xbawdy7.png" alt="Image description" width="697" height="526"></a></p>

<p><strong>Bar Charts</strong><br>
Bar charts are suitable for visualizing categorical or discrete data. They help understand trends.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--GdHgRMzc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/h4l1jmvvlzrlbmm49lhy.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--GdHgRMzc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/h4l1jmvvlzrlbmm49lhy.png" alt="Image description" width="466" height="450"></a></p>

<p><strong>Scatter Plots</strong><br>
It is a type of plot which will be in a scatter format. It is mainly between 2 features. Here we will plot nodes Vs age and see if there is any linearity.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--CugqbZby--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1zlak8y2djatqqy8k3b5.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--CugqbZby--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/1zlak8y2djatqqy8k3b5.png" alt="Image description" width="512" height="513"></a></p>

<p>Here blue and orange dots represent the survival status of the patients. blue represents the patient survived 5 years or longer and orange dot represents the patient died within 5 year.</p>

<p><strong>Pair Plots</strong><br>
They display scatter plots for all possible pairs of continuous variables in a dataset. They provide a comprehensive view of the relationships between variables and are especially useful when exploring multiple variables simultaneously.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--dZ0zZ-cl--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/sktpm3zyxuudelssgnt5.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--dZ0zZ-cl--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/sktpm3zyxuudelssgnt5.png" alt="Image description" width="503" height="497"></a></p>

<p>From the above plot we can get some interesting facts. We can say that plot 6(Year vs Nodes)is readable compared to the other two but certainly we cannot make any concrete observations based on this graph. The plot 4, plot 7 and plot 8 are the inverted plots of plot 2, plot 3 and plot 6 respectively.</p>

<p><strong>Box Plots</strong><br>
Box plots tell us the percentile plotting which other plots cant tell easily. It also helps in detection of outliers.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--JyJl22A2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hwgbhj4818sdodvejabl.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--JyJl22A2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hwgbhj4818sdodvejabl.png" alt="Image description" width="510" height="447"></a></p>

<p>In conclusion, these are some basic plots used in EDA. It is always important to read and understand what the plot is saying. It is never good to skip EDA for a machine learning project.</p>

 </details> 
 <hr /> 

 #### - [Exploratory Data Analysis using Data Visualization Techniques](https://dev.to/bradleydaudi/exploratory-data-analysis-using-data-visualization-techniques-ea0) 
 <details><summary>Article</summary> <p>Exploratory Data Analysis (EDA) is a critical stage in the data analysis process that serves as the foundation for informed decisions and insights. EDA is fundamentally about acquiring a thorough knowledge of your data before moving on to more advanced modeling or hypothesis testing. Data visualization is one of the most powerful tools in the EDA toolbox. In this post, we will look at the importance of EDA and how data visualization techniques may be used to extract insights from large datasets.</p>

<p><strong>The Significance of Exploratory Data Analysis</strong></p>

<p>EDA is the first phase in any data analysis workflow, with the primary purpose of understanding the structure and features of the data at hand. It has numerous benefits:</p>

<ol>
<li><p>EDA frequently discovers missing values, outliers, and inconsistencies in the dataset during data cleaning and preprocessing. Addressing these concerns is critical to assuring the accuracy of following analyses.</p></li>
<li><p>Pattern Recognition: By visualizing data, you can find patterns, trends, and relationships that summary statistics alone may not reveal. This is very useful for finding buried insights.</p></li>
<li><p>EDA can be used to generate hypotheses to test in subsequent analyses. When you visualize data, you may uncover interesting patterns that pique your interest and urge additional inquiry.</p></li>
<li><p>Visualizations facilitate communication of findings to both technical and non-technical audiences. A well-designed graph or chart can convey more complex information than a table of statistics.</p></li>
</ol>

<p><strong>Data Visualization Techniques in EDA</strong></p>

<p>Data visualization techniques entail graphically depicting data, allowing for simpler interpretation and analysis. Here are some common data visualization approaches used in EDA:</p>

<ol>
<li><p>Histograms and Frequency Distributions<br>
Histograms show the distribution of values for a single variable. They reveal information on the data's central tendency, spread, and skewness. By evaluating the shape of a histogram, you can draw conclusions about the underlying properties of the data.</p></li>
<li><p>Box Plots<br>
Box plots, often known as box-and-whisker plots, depict the distribution of a variable's values, including measurements such as the median, quartiles, and potential outliers. They are good for showing data distribution and finding extreme levels.</p></li>
<li><p>Scatter Plots<br>
Scatter plots are used to depict the relationship between two continuous variables. They aid in the identification of correlations, groupings, and trends. You can add more dimensions to the visualization by encoding color and size.</p></li>
<li><p>Bar and pie charts<br>
Bar charts are useful for showing categorical data, such as counts or percentage within distinct categories. Pie charts can depict the composition of a whole by breaking it down into its essential pieces.</p></li>
<li><p>Line charts<br>
Line charts are used to show trends over time or across ordered categories. They are particularly useful for analyzing time series data.</p></li>
<li><p>Heat maps<br>
Heatmaps are graphical representations of data matrices. They are frequently used in correlation matrices or to depict the distribution of data in two dimensions.<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--M6Cjon1Y--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/aox1ewqfdf44wo5vrcc9.PNG" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--M6Cjon1Y--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/aox1ewqfdf44wo5vrcc9.PNG" alt="Image description" width="783" height="539"></a></p></li>
<li><p>Violin Plots<br>
Violin plots combine components of box plots and kernel density estimation to display the distribution of a variable. They are especially handy when comparing multiple categories.<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--drdtBuOE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/c6o5pvvbcyywfopzz9nl.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--drdtBuOE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/c6o5pvvbcyywfopzz9nl.png" alt="Image description" width="349" height="240"></a></p></li>
</ol>

<p>8.Geospatial Visualization<br>
Maps and geospatial visualization tools can reveal spatial patterns and relationships in datasets having geographic features. Tools like choropleth maps and heatmaps can be used.</p>

<ol>
<li>Interactive Dashboards
Advanced EDA may entail developing interactive dashboards with technologies like Tableau, Power BI, or Python libraries like Plotly. Users can examine data and personalize their perspectives using interactive visualizations.</li>
</ol>

<p><strong>Best Practices in Data Visualization for EDA</strong></p>

<p>To obtain accurate and useful insights when conducting EDA using data visualization, best practices must be followed:</p>

<ol>
<li><p>Choose the Best Visualization: Select the type of visualization that best fits your data and the insights you wish to obtain. Each visualization is not acceptable for every dataset.</p></li>
<li><p>Label and Annotate: Use unambiguous labels, titles, and annotations to make your visualizations self-explanatory. When communicating findings, clarity is essential.</p></li>
<li><p>Color Selection: Use caution when selecting colors. Colors should promote understanding rather than cause confusion. Use as little colors as possible in a single visualization.</p></li>
<li><p>Maintain Data Integrity: Don't corrupt the data by using the wrong scales or axes. To avoid misinterpretation, always represent the data appropriately.</p></li>
<li><p>Consider Interactivity: Provide intuitive user controls for filtering and exploration when employing interactive visualizations. Ensure that the interactivity improves the user's comprehension of the data.</p></li>
<li><p>and Share: Create a report or notebook to document your EDA process, including the visualizations you developed. Share your findings and the reasoning behind them with stakeholders and colleagues.</p></li>
</ol>

<p><strong>Conclusion</strong><br>
Mastering the skill of Exploratory Data Analysis (EDA) through data visualization is equivalent to unlocking the door to buried knowledge in the world of data science. EDA acts as a lighthouse, revealing the paths to insights buried inside your data. You may use visualizations strategically to not just find patterns and anomalies, but also to construct compelling narratives that appeal with your audience. EDA is a revolutionary process that enables data scientists to make educated decisions, generate hypotheses, and drive significant change. Remember that EDA and data visualization are your trusty companions on your road to become a professional data scientist, guiding you to the core of data-driven discovery.</p>

 </details> 
 <hr /> 

 #### - [Scalable range sharding to avoid hotspots on indexes](https://dev.to/yugabyte/scalable-range-sharding-with-yugabytedb-1o51) 
 <details><summary>Article</summary> <p>TL;DR: To distribute the writes you can add a prefix to your range indexes, and YugabyteDB Index Skip Scan will still use it to scale the reads. This prefix can be a low-cardinality column from the table, or a hash modulo calculated on the indexed column.</p>




<p>When defining the sharding method in YugabyteDB you have the choice between:</p>

<ul>
<li><p><strong>Hash sharding</strong>. A hash function is applied to the HASH part of the key (by default the first column). This hash code (which you can calculate yourself with <code>yb_hash_code()</code>) is an integer from 0 to 65535 (0x0000 to 0xFFFF in hexadecimal). It determines the tablet where the table row (for the primary key) or the index entry (for secondary indexes) will be stored. Each tablet holds a range of hash values, for example a table split into 3 tablets will have those ranges: <code>hash_split: [0x0000, 0x5554]</code>, <code>hash_split: [0x5555, 0xAAA9]</code> and <code>hash_split: [0xAAAA, 0xFFFF]</code>. Within each tablet, this hash code is added to the keys as a prefix so that the rows are sorted on the hash code before the key value. <br>
Hash sharding is perfect to distribute the rows, to multiple tablets, and then to multiple locations within a tablet, and read them with point queries (equality predicates on all hash columns). Typically, you use it for columns that don't have a significant order: a UUID, a text with no alphabetical order semantic (like a generated code), an integer with no arithmetic (like a sequence).</p></li>
<li><p><strong>Range sharding</strong>. For columns that will be queried by range (greater than, less than, BETWEEN, LIKE with a known prefix), or that you will fetch with an ORDER BY, you don't want to apply a hash value but store them in order, ascending or descending, clustered. Typically you use range sharding for timestamps, alphabetical text, integers with arithmetic semantic, floats, numeric where the ordering is significant. This is not the default, except with collocated tables that go into one tablet only. For non-colocated tables, you define range sharding by mentioning ASC or DESC in the index or primary key definition.<br>
Contrary to hash sharding, they are not immediately split into multiple tablets because the range of values is unknown when the table is created. When you already know the data that you will load, you can define the split values in the CREATE TABLE statement to pre-split it. In all cases, auto-split will split a tablet when it grows, to keep tablet size in control. For example an index on first names may see <code>range: [&lt;start&gt;, DocKey([], ["Jeff"]))</code>, <code>range: [DocKey([], ["Jeff"]), DocKey([], ["Martin"]))</code> and <code>range: [DocKey([], ["Martin"]), &lt;end&gt;)</code> if the volume of rows between those names is balanced. Range sharding allows index scans for point queries as well as range queries.</p></li>
</ul>

<p>From a <strong>read</strong> point of view, the choice is easy. When you have only <strong>point queries</strong>, hash-sharding is great to distribute immediately without additional concern. When you may have <strong>range queries</strong>, you define range sharding.</p>

<p>From a <strong>write</strong> point of view, hash sharding is optimal for throughput because concurrent inserts will go to multiple tablets. Range sharding may add pressure on some hotpots when the concurrent inserts have the same or close values for the indexed column. </p>

<p>Those hotspots are encountered when a number is generated from a sequence, or a timestamp taking its value from the current time, or simply when a value becomes popular (think of thousands of users 'liking' a new post, at the same time, from a popular influencer). For this case, and after this long introduction, I'll introduce a third case:</p>

<ul>
<li>
<strong>Prefixed Range Sharding</strong>. The idea here is to use range sharding, because we expect range queries, but prefixing the key with a low cardinality hash value, and use range sharding on it. I'll explain this with an example. The idea is to distribute but to a few ranges only.</li>
</ul>

<h2>
  
  
  Pgbench example
</h2>

<p>YugabyteDB is compatible with PostgreSQL. I create the PostgreSQL PgBench tables:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>pgbench <span class="nt">--initialize</span> <span class="nt">--init-steps</span><span class="o">=</span>dtpG 

</code></pre>

</div>



<p>This initializes the tables by (d)eleting them if already exist, creating the (t)ables with (p)rimary key and (G)enerateing some rows. You can ignore the message about FILLFACTOR which is used in PostgreSQL to mitigate the bloat issues- There's no bloat with YugabyteDB's MVCC implementation. For the same reason, I didn't (v)acuum in the initialization steps because YugabyteDB doesn't need vaccum to.</p>

<p>I insert 20 million rows into the <code>pgbench_history</code> by running the 'simple' PgBench workload:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>pgbench <span class="nt">--client</span><span class="o">=</span>20 <span class="nt">--transactions</span><span class="o">=</span>1000000 <span class="nt">--protocol</span><span class="o">=</span>prepared <span class="nt">--builtin</span><span class="o">=</span>simple <span class="nt">--no-vacuum</span> 

</code></pre>

</div>



<p>If your <code>pgbench</code> client is far from the nodes you connect to, you can generate less rows and increase the size with an <code>insert as select</code>. PgBench is a row-by-row application.</p>

<p>I'll create a first index that illustrates my point. <code>pgbench_history</code> has an <code>mtime</code> column that is a timestamp:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>yugabyte=# \d pgbench_history

                    Table "public.pgbench_history"
 Column |            Type             | Collation | Nullable | Default
--------+-----------------------------+-----------+----------+---------
 tid    | integer                     |           |          |
 bid    | integer                     |           |          |
 aid    | integer                     |           |          |
 delta  | integer                     |           |          |
 mtime  | timestamp without time zone |           |          |
 filler | character(22)               |           |          |
</code></pre>

</div>



<p>This column is set to the transaction's <code>CURRENT_TIMESTAMP</code>:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="n">yugabyte</span><span class="o">=#</span> <span class="err">\</span><span class="o">!</span> <span class="n">pgbench</span> <span class="c1">--show-script=simple</span>
<span class="c1">-- simple-update: &lt;builtin: simple update&gt;</span>
<span class="err">\</span><span class="k">set</span> <span class="n">aid</span> <span class="n">random</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100000</span> <span class="o">*</span> <span class="p">:</span><span class="k">scale</span><span class="p">)</span>
<span class="err">\</span><span class="k">set</span> <span class="n">bid</span> <span class="n">random</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="o">*</span> <span class="p">:</span><span class="k">scale</span><span class="p">)</span>
<span class="err">\</span><span class="k">set</span> <span class="n">tid</span> <span class="n">random</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span> <span class="o">*</span> <span class="p">:</span><span class="k">scale</span><span class="p">)</span>
<span class="err">\</span><span class="k">set</span> <span class="n">delta</span> <span class="n">random</span><span class="p">(</span><span class="o">-</span><span class="mi">5000</span><span class="p">,</span> <span class="mi">5000</span><span class="p">)</span>
<span class="k">BEGIN</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">pgbench_accounts</span> <span class="k">SET</span> <span class="n">abalance</span> <span class="o">=</span> <span class="n">abalance</span> <span class="o">+</span> <span class="p">:</span><span class="n">delta</span> <span class="k">WHERE</span> <span class="n">aid</span> <span class="o">=</span> <span class="p">:</span><span class="n">aid</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">abalance</span> <span class="k">FROM</span> <span class="n">pgbench_accounts</span> <span class="k">WHERE</span> <span class="n">aid</span> <span class="o">=</span> <span class="p">:</span><span class="n">aid</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">pgbench_history</span> <span class="p">(</span><span class="n">tid</span><span class="p">,</span> <span class="n">bid</span><span class="p">,</span> <span class="n">aid</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">mtime</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(:</span><span class="n">tid</span><span class="p">,</span> <span class="p">:</span><span class="n">bid</span><span class="p">,</span> <span class="p">:</span><span class="n">aid</span><span class="p">,</span> <span class="p">:</span><span class="n">delta</span><span class="p">,</span> <span class="k">CURRENT_TIMESTAMP</span><span class="p">);</span>
<span class="k">END</span><span class="p">;</span>
</code></pre>

</div>



<p>That's exactly the kind of column where you want to distribute the writes but read by range.</p>

<p>You can also note that the <code>tid</code> column has a value from 1 to 10 and I'll use that later, in one alternative to the solution.</p>

<p>The application behavior for this <code>mtime</code> column has two properties: </p>

<ul>
<li>the values inserted by concurrent transactions are very close, which may create hotspot on an range index</li>
<li>they are slightly different by a few milliseconds, so that a hash function can avoid hostpots</li>
</ul>

<h2>
  
  
  Indexing and Access patterns
</h2>

<p>Nobody will run a point query for a specific timestamp (given its millisecond precision). This means that an HASH index on <code>mtime</code> is useless.</p>

<p>This <code>mtime</code> column will be typically used by two kind of range queries:</p>

<ul>
<li>find the transactions on a range of time, for example counting the transactions in the last hour:
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code> <span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">pgbench_history</span> 
 <span class="k">where</span> <span class="n">mtime</span> <span class="o">&gt;</span> <span class="err">$</span><span class="mi">1</span><span class="p">;</span> 
<span class="p">;</span>
</code></pre>

</div>



<ul>
<li>find the last transactions, a typical Top-N query with an ORDER BY and LIMIT:
</li>
</ul>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code> <span class="k">select</span> <span class="o">*</span>
 <span class="k">from</span> <span class="n">pgbench_history</span>
 <span class="k">order</span> <span class="k">by</span> <span class="n">mtime</span> <span class="k">desc</span> <span class="k">limit</span> <span class="err">$</span><span class="mi">1</span>
<span class="p">;</span>
</code></pre>

</div>



<p>In this table, I have 20 million rows and 4096 were recently inserted. I want the queries to be scalable, not depending on the size of the table but only on the size of the expected result. In terms of time complexity, I want O(1) rather than O(N). This, in a SQL databases, is achieved by creating an index that stores the requested values clustered and ordered, where we can directly seek to the start of the specified range and read next rows from there.</p>

<h3>
  
  
  Simple range index
</h3>

<p>The following range index can serve those queries:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="k">create</span> <span class="k">index</span> <span class="n">pgbench_history_mtime</span>
<span class="k">on</span> <span class="n">pgbench_history</span> <span class="p">(</span> <span class="n">mtime</span> <span class="k">desc</span> <span class="p">)</span>
<span class="p">;</span>
</code></pre>

</div>



<p>The execution plans look good:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="n">yugabyte</span><span class="o">=#</span> <span class="k">explain</span> <span class="p">(</span><span class="k">analyze</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="k">verbose</span><span class="p">,</span> <span class="n">costs</span> <span class="k">off</span><span class="p">,</span> <span class="n">summary</span> <span class="k">off</span><span class="p">)</span>
 <span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">pgbench_history</span>
 <span class="k">where</span> <span class="n">mtime</span> <span class="o">&gt;</span> <span class="nb">timestamp</span> <span class="s1">'2023-10-8 16:00:00'</span>
<span class="p">;</span>

                                                        <span class="n">QUERY</span> <span class="n">PLAN</span>
<span class="c1">--------------------------------------------------------------------------------------------------------------------------</span>
 <span class="k">Aggregate</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">9</span><span class="p">.</span><span class="mi">907</span><span class="p">..</span><span class="mi">9</span><span class="p">.</span><span class="mi">907</span> <span class="k">rows</span><span class="o">=</span><span class="mi">1</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
   <span class="k">Output</span><span class="p">:</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
   <span class="o">-&gt;</span>  <span class="k">Index</span> <span class="k">Only</span> <span class="n">Scan</span> <span class="k">using</span> <span class="n">pgbench_history_mtime</span> <span class="k">on</span> <span class="k">public</span><span class="p">.</span><span class="n">pgbench_history</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">2</span><span class="p">.</span><span class="mi">593</span><span class="p">..</span><span class="mi">9</span><span class="p">.</span><span class="mi">674</span> <span class="k">rows</span><span class="o">=</span><span class="mi">4096</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
         <span class="k">Output</span><span class="p">:</span> <span class="n">mtime</span>
         <span class="k">Index</span> <span class="n">Cond</span><span class="p">:</span> <span class="p">(</span><span class="n">pgbench_history</span><span class="p">.</span><span class="n">mtime</span> <span class="o">&gt;</span> <span class="s1">'2023-10-08 16:00:00'</span><span class="p">::</span><span class="nb">timestamp</span> <span class="k">without</span> <span class="nb">time</span> <span class="k">zone</span><span class="p">)</span>
         <span class="n">Heap</span> <span class="n">Fetches</span><span class="p">:</span> <span class="mi">0</span>
         <span class="k">Storage</span> <span class="k">Index</span> <span class="k">Read</span> <span class="n">Requests</span><span class="p">:</span> <span class="mi">4</span>
         <span class="k">Storage</span> <span class="k">Index</span> <span class="k">Read</span> <span class="n">Execution</span> <span class="nb">Time</span><span class="p">:</span> <span class="mi">8</span><span class="p">.</span><span class="mi">773</span> <span class="n">ms</span>
<span class="p">(</span><span class="mi">8</span> <span class="k">rows</span><span class="p">)</span>

<span class="n">yugabyte</span><span class="o">=#</span> <span class="k">explain</span> <span class="p">(</span><span class="k">analyze</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="k">verbose</span><span class="p">,</span> <span class="n">costs</span> <span class="k">off</span><span class="p">,</span> <span class="n">summary</span> <span class="k">off</span><span class="p">)</span>
 <span class="k">select</span> <span class="o">*</span>
 <span class="k">from</span> <span class="n">pgbench_history</span>
 <span class="k">order</span> <span class="k">by</span> <span class="n">mtime</span> <span class="k">desc</span> <span class="k">limit</span> <span class="mi">5</span>
<span class="p">;</span>

                                                    <span class="n">QUERY</span> <span class="n">PLAN</span>
<span class="c1">------------------------------------------------------------------------------------------------------------------</span>
 <span class="k">Limit</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">2</span><span class="p">.</span><span class="mi">870</span><span class="p">..</span><span class="mi">2</span><span class="p">.</span><span class="mi">875</span> <span class="k">rows</span><span class="o">=</span><span class="mi">5</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
   <span class="k">Output</span><span class="p">:</span> <span class="n">tid</span><span class="p">,</span> <span class="n">bid</span><span class="p">,</span> <span class="n">aid</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">mtime</span><span class="p">,</span> <span class="n">filler</span>
   <span class="o">-&gt;</span>  <span class="k">Index</span> <span class="n">Scan</span> <span class="k">using</span> <span class="n">pgbench_history_mtime</span> <span class="k">on</span> <span class="k">public</span><span class="p">.</span><span class="n">pgbench_history</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">2</span><span class="p">.</span><span class="mi">869</span><span class="p">..</span><span class="mi">2</span><span class="p">.</span><span class="mi">872</span> <span class="k">rows</span><span class="o">=</span><span class="mi">5</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
         <span class="k">Output</span><span class="p">:</span> <span class="n">tid</span><span class="p">,</span> <span class="n">bid</span><span class="p">,</span> <span class="n">aid</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">mtime</span><span class="p">,</span> <span class="n">filler</span>
         <span class="k">Storage</span> <span class="k">Table</span> <span class="k">Read</span> <span class="n">Requests</span><span class="p">:</span> <span class="mi">1</span>
         <span class="k">Storage</span> <span class="k">Table</span> <span class="k">Read</span> <span class="n">Execution</span> <span class="nb">Time</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">327</span> <span class="n">ms</span>
         <span class="k">Storage</span> <span class="k">Index</span> <span class="k">Read</span> <span class="n">Requests</span><span class="p">:</span> <span class="mi">1</span>
         <span class="k">Storage</span> <span class="k">Index</span> <span class="k">Read</span> <span class="n">Execution</span> <span class="nb">Time</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">384</span> <span class="n">ms</span>
<span class="p">(</span><span class="mi">8</span> <span class="k">rows</span><span class="p">)</span>

<span class="n">yugabyte</span><span class="o">=#</span> <span class="k">drop</span> <span class="k">index</span> <span class="n">pgbench_history_mtime</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">INDEX</span>
</code></pre>

</div>



<p>This is fast and scalable: <code>Index Scan</code>, with the where clause as <code>Index Cond.</code> and no additional <code>Sort</code> to fetch the Top-N rows. With the <code>dist</code> option, the <code>explain analyze</code> shows the read requests: 4 to get the 4096 rows from a range (rows are fetched by batches) and 1 to get the Top-N rows. With this, the response time stays in single-digits milliseconds.</p>

<p>However, as mentioned earlier, this index will create a hotpost where all concurrent insert will write their index entries into the same tablet. I remove this index for this reason: <code>drop index pgbench_history_mtime</code> and look for other solutions.</p>

<p>Here is a screenshot of my YugabyteDB 3-node cluster with <code>pgbench</code> running with such index:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--aBN1Zkce--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/bfay9f4v7k40vp0wbj4k.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--aBN1Zkce--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/bfay9f4v7k40vp0wbj4k.png" alt="Image description" width="800" height="220"></a><br>
Not all operations are well distributed. The node that holds the range for the current time receives more write operations.</p>
<h3>
  
  
  Hash Index
</h3>

<p>With hash-sharding, the writes would be scalable but the two queries cannot use the index for two reasons:</p>

<ul>
<li>the range of interest can be found at 65536 places. In each, the entries are ordered on <code>mtime</code> but getting those would require 65536 read request which can take minutes when one read is 1 millisecond</li>
<li>with hash sharding, the tablets are read with no specific order and a Top-N query will require a Sort operation.</li>
</ul>

<p>Here are the execution plans:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="n">yugabyte</span><span class="o">=#</span> <span class="k">create</span> <span class="k">index</span> <span class="n">pgbench_history_mtime</span>
 <span class="k">on</span> <span class="n">pgbench_history</span> <span class="p">(</span> <span class="n">mtime</span> <span class="n">hash</span> <span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span>

<span class="n">yugabyte</span><span class="o">=#</span> <span class="k">explain</span> <span class="p">(</span><span class="k">analyze</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="k">verbose</span><span class="p">,</span> <span class="n">costs</span> <span class="k">off</span><span class="p">,</span> <span class="n">summary</span> <span class="k">off</span><span class="p">)</span>
 <span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">pgbench_history</span>
 <span class="k">where</span> <span class="n">mtime</span> <span class="o">&gt;</span> <span class="nb">timestamp</span> <span class="s1">'2023-10-8 16:00:00'</span>
<span class="p">;</span>

                                              <span class="n">QUERY</span> <span class="n">PLAN</span>
<span class="c1">-----------------------------------------------------------------------------------------------------</span>
 <span class="n">Finalize</span> <span class="k">Aggregate</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">9614</span><span class="p">.</span><span class="mi">158</span><span class="p">..</span><span class="mi">9614</span><span class="p">.</span><span class="mi">159</span> <span class="k">rows</span><span class="o">=</span><span class="mi">1</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
   <span class="k">Output</span><span class="p">:</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
   <span class="o">-&gt;</span>  <span class="n">Seq</span> <span class="n">Scan</span> <span class="k">on</span> <span class="k">public</span><span class="p">.</span><span class="n">pgbench_history</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">9614</span><span class="p">.</span><span class="mi">142</span><span class="p">..</span><span class="mi">9614</span><span class="p">.</span><span class="mi">147</span> <span class="k">rows</span><span class="o">=</span><span class="mi">6</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
         <span class="k">Output</span><span class="p">:</span> <span class="n">tid</span><span class="p">,</span> <span class="n">bid</span><span class="p">,</span> <span class="n">aid</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">mtime</span><span class="p">,</span> <span class="n">filler</span>
         <span class="n">Remote</span> <span class="n">Filter</span><span class="p">:</span> <span class="p">(</span><span class="n">pgbench_history</span><span class="p">.</span><span class="n">mtime</span> <span class="o">&gt;</span> <span class="s1">'2023-10-08 16:00:00'</span><span class="p">::</span><span class="nb">timestamp</span> <span class="k">without</span> <span class="nb">time</span> <span class="k">zone</span><span class="p">)</span>
         <span class="k">Partial</span> <span class="k">Aggregate</span><span class="p">:</span> <span class="k">true</span>
         <span class="k">Storage</span> <span class="k">Table</span> <span class="k">Read</span> <span class="n">Requests</span><span class="p">:</span> <span class="mi">1</span>
         <span class="k">Storage</span> <span class="k">Table</span> <span class="k">Read</span> <span class="n">Execution</span> <span class="nb">Time</span><span class="p">:</span> <span class="mi">9614</span><span class="p">.</span><span class="mi">028</span> <span class="n">ms</span>
<span class="p">(</span><span class="mi">8</span> <span class="k">rows</span><span class="p">)</span>

<span class="n">yugabyte</span><span class="o">=#</span> <span class="k">explain</span> <span class="p">(</span><span class="k">analyze</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="k">verbose</span><span class="p">,</span> <span class="n">costs</span> <span class="k">off</span><span class="p">,</span> <span class="n">summary</span> <span class="k">off</span><span class="p">)</span>
 <span class="k">select</span> <span class="o">*</span>
 <span class="k">from</span> <span class="n">pgbench_history</span>
 <span class="k">order</span> <span class="k">by</span> <span class="n">mtime</span> <span class="k">desc</span> <span class="k">limit</span> <span class="mi">5</span>
<span class="p">;</span>

                                              <span class="n">QUERY</span> <span class="n">PLAN</span>
<span class="c1">------------------------------------------------------------------------------------------------------</span>
 <span class="k">Limit</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">132874</span><span class="p">.</span><span class="mi">603</span><span class="p">..</span><span class="mi">132874</span><span class="p">.</span><span class="mi">607</span> <span class="k">rows</span><span class="o">=</span><span class="mi">5</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
   <span class="k">Output</span><span class="p">:</span> <span class="n">tid</span><span class="p">,</span> <span class="n">bid</span><span class="p">,</span> <span class="n">aid</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">mtime</span><span class="p">,</span> <span class="n">filler</span>
   <span class="o">-&gt;</span>  <span class="n">Sort</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">132874</span><span class="p">.</span><span class="mi">602</span><span class="p">..</span><span class="mi">132874</span><span class="p">.</span><span class="mi">603</span> <span class="k">rows</span><span class="o">=</span><span class="mi">5</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
         <span class="k">Output</span><span class="p">:</span> <span class="n">tid</span><span class="p">,</span> <span class="n">bid</span><span class="p">,</span> <span class="n">aid</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">mtime</span><span class="p">,</span> <span class="n">filler</span>
         <span class="n">Sort</span> <span class="k">Key</span><span class="p">:</span> <span class="n">pgbench_history</span><span class="p">.</span><span class="n">mtime</span> <span class="k">DESC</span>
         <span class="n">Sort</span> <span class="k">Method</span><span class="p">:</span> <span class="n">top</span><span class="o">-</span><span class="n">N</span> <span class="n">heapsort</span>  <span class="n">Memory</span><span class="p">:</span> <span class="mi">25</span><span class="n">kB</span>
         <span class="o">-&gt;</span>  <span class="n">Seq</span> <span class="n">Scan</span> <span class="k">on</span> <span class="k">public</span><span class="p">.</span><span class="n">pgbench_history</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">5</span><span class="p">.</span><span class="mi">044</span><span class="p">..</span><span class="mi">130002</span><span class="p">.</span><span class="mi">114</span> <span class="k">rows</span><span class="o">=</span><span class="mi">20000000</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
               <span class="k">Output</span><span class="p">:</span> <span class="n">tid</span><span class="p">,</span> <span class="n">bid</span><span class="p">,</span> <span class="n">aid</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">mtime</span><span class="p">,</span> <span class="n">filler</span>
               <span class="k">Storage</span> <span class="k">Table</span> <span class="k">Read</span> <span class="n">Requests</span><span class="p">:</span> <span class="mi">19533</span>
               <span class="k">Storage</span> <span class="k">Table</span> <span class="k">Read</span> <span class="n">Execution</span> <span class="nb">Time</span><span class="p">:</span> <span class="mi">125982</span><span class="p">.</span><span class="mi">337</span> <span class="n">ms</span>
<span class="p">(</span><span class="mi">10</span> <span class="k">rows</span><span class="p">)</span>

<span class="n">yugabyte</span><span class="o">=#</span> <span class="k">drop</span> <span class="k">index</span> <span class="n">pgbench_history_mtime</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">INDEX</span>
</code></pre>

</div>



<p>The range query is not so bad thanks to the expression pushdown offloading the filter to the storage (<code>Remote Filter</code>) but the Top-N query reads all rows (<code>rows=20000000</code>) to be ordered by the PostgreSQL backend (<code>Sort</code>) before being able to return the interesting ones. We need a better solution.</p>

<h2>
  
  
  Prefixed Range Sharding
</h2>

<p>Let's combine the advantages of hash and range sharding with a range index that is prefixed by a low cardinality hash value. </p>

<p>I'll use the <code>tid</code> column which has a low cardinality (values 1 to 10) and will distribute the concurrent inserts coming from multiple tellers.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="k">create</span> <span class="k">index</span> <span class="n">pgbench_history_tid_mtime</span>
 <span class="k">on</span> <span class="n">pgbench_history</span><span class="p">(</span> <span class="n">tid</span> <span class="k">asc</span> <span class="p">,</span> <span class="n">mtime</span> <span class="k">desc</span> <span class="p">)</span>
 <span class="n">split</span> <span class="k">at</span> <span class="k">values</span> <span class="p">(</span> <span class="p">(</span><span class="mi">2</span><span class="p">),(</span><span class="mi">3</span><span class="p">),(</span><span class="mi">4</span><span class="p">),(</span><span class="mi">5</span><span class="p">),(</span><span class="mi">6</span><span class="p">),(</span><span class="mi">7</span><span class="p">),(</span><span class="mi">8</span><span class="p">),(</span><span class="mi">9</span><span class="p">),(</span><span class="mi">10</span><span class="p">)</span> <span class="p">)</span>
<span class="p">;</span>
</code></pre>

</div>



<p>While still distributing the inserts, this avoids the two problems of hash-sharding:</p>

<ul>
<li>There are only 10 ranges to read rather than 65536. Even with 1 millisecond calls, this query stays around 10 milliseconds</li>
<li>The query planner knows that each range scan will preserve the order, even when split into multiple tablets, and can skip the <code>Sort</code> operation and return the first rows as they are fetched from the storage.</li>
</ul>

<p>To distribute the inserts to multiple tablets, I explicitly pre-split to one tablet per prefix value. When table grows, further auto-splitting may happen automatically.</p>

<h3>
  
  
  Range query with a table's column prefix
</h3>

<p>The range query doesn't need any change to use this index efficiently:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="n">yugabyte</span><span class="o">=#</span> <span class="k">explain</span> <span class="p">(</span><span class="k">analyze</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="k">verbose</span><span class="p">,</span> <span class="n">costs</span> <span class="k">off</span><span class="p">,</span> <span class="n">summary</span> <span class="k">off</span><span class="p">)</span>
 <span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">pgbench_history</span>
 <span class="k">where</span> <span class="n">mtime</span> <span class="o">&gt;</span> <span class="nb">timestamp</span> <span class="s1">'2023-10-8 16:00:00'</span>
<span class="p">;</span>

                                                          <span class="n">QUERY</span> <span class="n">PLAN</span>
<span class="c1">-------------------------------------------------------------------------------------------------------------------------------</span>
 <span class="k">Aggregate</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">15</span><span class="p">.</span><span class="mi">898</span><span class="p">..</span><span class="mi">15</span><span class="p">.</span><span class="mi">899</span> <span class="k">rows</span><span class="o">=</span><span class="mi">1</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
   <span class="k">Output</span><span class="p">:</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
   <span class="o">-&gt;</span>  <span class="k">Index</span> <span class="k">Only</span> <span class="n">Scan</span> <span class="k">using</span> <span class="n">pgbench_history_tid_mtime</span> <span class="k">on</span> <span class="k">public</span><span class="p">.</span><span class="n">pgbench_history</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">0</span><span class="p">.</span><span class="mi">963</span><span class="p">..</span><span class="mi">15</span><span class="p">.</span><span class="mi">614</span> <span class="k">rows</span><span class="o">=</span><span class="mi">4096</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
         <span class="k">Output</span><span class="p">:</span> <span class="n">tid</span><span class="p">,</span> <span class="n">mtime</span>
         <span class="k">Index</span> <span class="n">Cond</span><span class="p">:</span> <span class="p">(</span><span class="n">pgbench_history</span><span class="p">.</span><span class="n">mtime</span> <span class="o">&gt;</span> <span class="s1">'2023-10-08 16:00:00'</span><span class="p">::</span><span class="nb">timestamp</span> <span class="k">without</span> <span class="nb">time</span> <span class="k">zone</span><span class="p">)</span>
         <span class="n">Heap</span> <span class="n">Fetches</span><span class="p">:</span> <span class="mi">0</span>
         <span class="k">Storage</span> <span class="k">Index</span> <span class="k">Read</span> <span class="n">Requests</span><span class="p">:</span> <span class="mi">10</span>
         <span class="k">Storage</span> <span class="k">Index</span> <span class="k">Read</span> <span class="n">Execution</span> <span class="nb">Time</span><span class="p">:</span> <span class="mi">14</span><span class="p">.</span><span class="mi">200</span> <span class="n">ms</span>
<span class="p">(</span><span class="mi">8</span> <span class="k">rows</span><span class="p">)</span>
</code></pre>

</div>



<p>The number of read requests is exactly the number of tablets. There's only one seek into each tablet to get the rows within the requested range.</p>

<h2>
  
  
  Top-N query with a table's column prefix
</h2>

<p>The Top-N query is not directly pushed down (at least in this version - YugabyteDB 2.19.2) but I leverage the distinct pushdown to get the values of the index prefix, and then join this to the table to get a Top-N range scan for each bucket:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="n">yugabyte</span><span class="o">=#</span> <span class="k">explain</span> <span class="p">(</span><span class="n">costs</span> <span class="k">off</span><span class="p">,</span> <span class="n">summary</span> <span class="k">off</span><span class="p">,</span> <span class="k">analyze</span><span class="p">,</span> <span class="n">dist</span><span class="p">)</span>
 <span class="k">with</span> <span class="n">buckets</span> <span class="k">as</span> <span class="p">(</span>
 <span class="c1">-- get distinct value for the first column in the index</span>
 <span class="k">select</span> <span class="k">distinct</span> <span class="n">tid</span> <span class="k">from</span> <span class="n">pgbench_history</span>
 <span class="c1">-- workaround for https://github.com/yugabyte/yugabyte-db/issues/16771</span>
 <span class="k">where</span> <span class="n">tid</span> <span class="o">&gt;=</span> <span class="mi">0</span>
<span class="p">)</span> <span class="k">select</span> <span class="k">rows</span><span class="p">.</span><span class="o">*</span>
 <span class="c1">-- for each distinct value</span>
 <span class="k">from</span> <span class="n">buckets</span>
 <span class="c1">-- access by the index to the top-n rows</span>
 <span class="p">,</span> <span class="k">lateral</span><span class="p">(</span>
  <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">pgbench_history</span>
  <span class="k">where</span> <span class="n">tid</span> <span class="o">=</span> <span class="n">buckets</span><span class="p">.</span><span class="n">tid</span>
  <span class="k">order</span> <span class="k">by</span> <span class="n">mtime</span> <span class="k">desc</span> <span class="k">limit</span> <span class="mi">5</span>
 <span class="p">)</span> <span class="k">rows</span>
<span class="p">;</span>

                                                                                                                                                                                                      <span class="n">QUERY</span> <span class="n">PLAN</span>
<span class="c1">-----------------------------------------------------------------------------------------------------------------------------------------------</span>
 <span class="n">Nested</span> <span class="n">Loop</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">3</span><span class="p">.</span><span class="mi">580</span><span class="p">..</span><span class="mi">21</span><span class="p">.</span><span class="mi">877</span> <span class="k">rows</span><span class="o">=</span><span class="mi">50</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
   <span class="n">CTE</span> <span class="n">buckets</span>
     <span class="o">-&gt;</span>  <span class="k">Unique</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">0</span><span class="p">.</span><span class="mi">637</span><span class="p">..</span><span class="mi">0</span><span class="p">.</span><span class="mi">821</span> <span class="k">rows</span><span class="o">=</span><span class="mi">10</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
           <span class="o">-&gt;</span>  <span class="k">Index</span> <span class="k">Only</span> <span class="n">Scan</span> <span class="k">using</span> <span class="n">pgbench_history_tid_mtime</span> <span class="k">on</span> <span class="n">pgbench_history</span> <span class="n">pgbench_history_1</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">0</span><span class="p">.</span><span class="mi">636</span><span class="p">..</span><span class="mi">0</span><span class="p">.</span><span class="mi">811</span> <span class="k">rows</span><span class="o">=</span><span class="mi">10</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                 <span class="k">Index</span> <span class="n">Cond</span><span class="p">:</span> <span class="p">(</span><span class="n">tid</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
                 <span class="n">Heap</span> <span class="n">Fetches</span><span class="p">:</span> <span class="mi">0</span>
                 <span class="k">Storage</span> <span class="k">Index</span> <span class="k">Read</span> <span class="n">Requests</span><span class="p">:</span> <span class="mi">10</span>
                 <span class="k">Storage</span> <span class="k">Index</span> <span class="k">Read</span> <span class="n">Execution</span> <span class="nb">Time</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">507</span> <span class="n">ms</span>
   <span class="o">-&gt;</span>  <span class="n">CTE</span> <span class="n">Scan</span> <span class="k">on</span> <span class="n">buckets</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">0</span><span class="p">.</span><span class="mi">639</span><span class="p">..</span><span class="mi">0</span><span class="p">.</span><span class="mi">830</span> <span class="k">rows</span><span class="o">=</span><span class="mi">10</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
   <span class="o">-&gt;</span>  <span class="k">Limit</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">2</span><span class="p">.</span><span class="mi">099</span><span class="p">..</span><span class="mi">2</span><span class="p">.</span><span class="mi">102</span> <span class="k">rows</span><span class="o">=</span><span class="mi">5</span> <span class="n">loops</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
         <span class="o">-&gt;</span>  <span class="k">Index</span> <span class="n">Scan</span> <span class="k">using</span> <span class="n">pgbench_history_tid_mtime</span> <span class="k">on</span> <span class="n">pgbench_history</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">2</span><span class="p">.</span><span class="mi">086</span><span class="p">..</span><span class="mi">2</span><span class="p">.</span><span class="mi">088</span> <span class="k">rows</span><span class="o">=</span><span class="mi">5</span> <span class="n">loops</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
               <span class="k">Index</span> <span class="n">Cond</span><span class="p">:</span> <span class="p">(</span><span class="n">tid</span> <span class="o">=</span> <span class="n">buckets</span><span class="p">.</span><span class="n">tid</span><span class="p">)</span>
               <span class="k">Storage</span> <span class="k">Table</span> <span class="k">Read</span> <span class="n">Requests</span><span class="p">:</span> <span class="mi">1</span>
               <span class="k">Storage</span> <span class="k">Table</span> <span class="k">Read</span> <span class="n">Execution</span> <span class="nb">Time</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">370</span> <span class="n">ms</span>
               <span class="k">Storage</span> <span class="k">Index</span> <span class="k">Read</span> <span class="n">Requests</span><span class="p">:</span> <span class="mi">1</span>
               <span class="k">Storage</span> <span class="k">Index</span> <span class="k">Read</span> <span class="n">Execution</span> <span class="nb">Time</span><span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">665</span> <span class="n">ms</span>
<span class="p">(</span><span class="mi">16</span> <span class="k">rows</span><span class="p">)</span>
</code></pre>

</div>



<p>Again, the number of rad request is limited to the number of tablets to get the distinct values, and the number of nested loops is limited by the low-cardinality of this column.</p>

<h2>
  
  
  Modulo-Prefixed Range Sharding
</h2>

<p>The previous index was using a low-cardinality column that already exists in the table. When there's no such column, there's no need to create one because you can index a virtual column, as an expression.</p>

<p>I create such expression by applying a hash function (<code>yb_hash_code()</code>) and and reduce the cardinality by taking the modulo ( <code>%8</code> can reduce it to 8 values from 0 to 7). As my index is on <code>mtime</code>, I create an index that adds the <code>(yb_hash_code(mtime)%8)</code> expression in front of it:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="k">create</span> <span class="k">index</span> <span class="n">pgbench_history_mod_mtime</span>
 <span class="k">on</span> <span class="n">pgbench_history</span><span class="p">(</span> <span class="p">(</span><span class="n">yb_hash_code</span><span class="p">(</span><span class="n">mtime</span><span class="p">)</span><span class="o">%</span><span class="mi">8</span><span class="p">)</span> <span class="k">asc</span> <span class="p">,</span> <span class="n">mtime</span> <span class="k">desc</span> <span class="p">)</span>
 <span class="n">split</span> <span class="k">at</span> <span class="k">values</span> <span class="p">(</span> <span class="p">(</span><span class="mi">1</span><span class="p">),(</span><span class="mi">2</span><span class="p">),(</span><span class="mi">3</span><span class="p">),(</span><span class="mi">4</span><span class="p">),(</span><span class="mi">5</span><span class="p">),(</span><span class="mi">6</span><span class="p">),(</span><span class="mi">7</span><span class="p">)</span> <span class="p">)</span>
<span class="p">;</span>
</code></pre>

</div>



<p>This is different from hash-sharding because the prefix <code>(yb_hash_code(mtime)%8) asc</code> is limited to 8 different values, and ordered with range sharding. This avoids the two issues of hash-sharding:</p>

<ul>
<li>There are only 8 ranges to read rather than 65536.</li>
<li>The query planner knows that each range scan will preserve the order.</li>
</ul>

<p>To distribute the inserts, I've explicitly pre-split to one tablet per prefix value. When table grows, further auto-splitting may happen automatically.</p>

<h3>
  
  
  Range query with modulo-expression index prefix
</h3>

<p>The range query doesn't need any change to use this index efficiently:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="n">yugabyte</span><span class="o">=#</span> <span class="k">explain</span> <span class="p">(</span><span class="k">analyze</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="k">verbose</span><span class="p">,</span> <span class="n">costs</span> <span class="k">off</span><span class="p">,</span> <span class="n">summary</span> <span class="k">off</span><span class="p">)</span>
 <span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">pgbench_history</span>
 <span class="k">where</span> <span class="n">mtime</span> <span class="o">&gt;</span> <span class="nb">timestamp</span> <span class="s1">'2023-10-8 16:00:00'</span>
<span class="p">;</span>

                                                          <span class="n">QUERY</span> <span class="n">PLAN</span>
<span class="c1">-------------------------------------------------------------------------------------------------------------------------------</span>
 <span class="k">Aggregate</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">11</span><span class="p">.</span><span class="mi">310</span><span class="p">..</span><span class="mi">11</span><span class="p">.</span><span class="mi">310</span> <span class="k">rows</span><span class="o">=</span><span class="mi">1</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
   <span class="k">Output</span><span class="p">:</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
   <span class="o">-&gt;</span>  <span class="k">Index</span> <span class="k">Only</span> <span class="n">Scan</span> <span class="k">using</span> <span class="n">pgbench_history_mod_mtime</span> <span class="k">on</span> <span class="k">public</span><span class="p">.</span><span class="n">pgbench_history</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">2</span><span class="p">.</span><span class="mi">143</span><span class="p">..</span><span class="mi">11</span><span class="p">.</span><span class="mi">046</span> <span class="k">rows</span><span class="o">=</span><span class="mi">4096</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
         <span class="k">Output</span><span class="p">:</span> <span class="p">((</span><span class="n">yb_hash_code</span><span class="p">(</span><span class="n">mtime</span><span class="p">)</span> <span class="o">%</span> <span class="mi">8</span><span class="p">)),</span> <span class="n">mtime</span>
         <span class="k">Index</span> <span class="n">Cond</span><span class="p">:</span> <span class="p">(</span><span class="n">pgbench_history</span><span class="p">.</span><span class="n">mtime</span> <span class="o">&gt;</span> <span class="s1">'2023-10-08 16:00:00'</span><span class="p">::</span><span class="nb">timestamp</span> <span class="k">without</span> <span class="nb">time</span> <span class="k">zone</span><span class="p">)</span>
         <span class="n">Heap</span> <span class="n">Fetches</span><span class="p">:</span> <span class="mi">0</span>
         <span class="k">Storage</span> <span class="k">Index</span> <span class="k">Read</span> <span class="n">Requests</span><span class="p">:</span> <span class="mi">8</span>
         <span class="k">Storage</span> <span class="k">Index</span> <span class="k">Read</span> <span class="n">Execution</span> <span class="nb">Time</span><span class="p">:</span> <span class="mi">9</span><span class="p">.</span><span class="mi">876</span> <span class="n">ms</span>
<span class="p">(</span><span class="mi">8</span> <span class="k">rows</span><span class="p">)</span>
</code></pre>

</div>



<h3>
  
  
  Top-N query with modulo-expression index prefix
</h3>

<p>The Top-N query must explicitely get all distinct values get each range by a nested loop, with a correlated LATERAL query:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="n">yugabyte</span><span class="o">=#</span> <span class="k">explain</span> <span class="p">(</span><span class="n">costs</span> <span class="k">off</span><span class="p">,</span> <span class="n">summary</span> <span class="k">off</span><span class="p">,</span> <span class="k">analyze</span><span class="p">,</span> <span class="n">dist</span><span class="p">)</span>
 <span class="k">with</span> <span class="n">buckets</span> <span class="k">as</span> <span class="p">(</span>
 <span class="c1">-- get distinct value for the first column in the index</span>
 <span class="k">select</span> <span class="k">distinct</span> <span class="p">((</span><span class="n">yb_hash_code</span><span class="p">(</span><span class="n">mtime</span><span class="p">)</span> <span class="o">%</span> <span class="mi">8</span><span class="p">))</span> <span class="k">mod</span> <span class="k">from</span> <span class="n">pgbench_history</span>
 <span class="c1">-- workaround for https://github.com/yugabyte/yugabyte-db/issues/16771</span>
 <span class="k">where</span> <span class="p">((</span><span class="n">yb_hash_code</span><span class="p">(</span><span class="n">mtime</span><span class="p">)</span> <span class="o">%</span> <span class="mi">8</span><span class="p">))</span> <span class="o">&gt;=</span> <span class="mi">0</span>
<span class="p">)</span> <span class="k">select</span> <span class="k">rows</span><span class="p">.</span><span class="o">*</span>
 <span class="c1">-- for each distinct value</span>
 <span class="k">from</span> <span class="n">buckets</span>
 <span class="c1">-- access by the index to the top-n rows</span>
 <span class="p">,</span> <span class="k">lateral</span><span class="p">(</span>
  <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">pgbench_history</span>
  <span class="k">where</span> <span class="p">((</span><span class="n">yb_hash_code</span><span class="p">(</span><span class="n">mtime</span><span class="p">)</span> <span class="o">%</span> <span class="mi">8</span><span class="p">))</span> <span class="o">=</span> <span class="n">buckets</span><span class="p">.</span><span class="k">mod</span>
  <span class="k">order</span> <span class="k">by</span> <span class="n">mtime</span> <span class="k">desc</span> <span class="k">limit</span> <span class="mi">5</span>
 <span class="p">)</span> <span class="k">rows</span>
<span class="p">;</span>

                                                                  <span class="n">QUERY</span> <span class="n">PLAN</span>
<span class="c1">----------------------------------------------------------------------------------------------------------------------------------------------</span>
 <span class="n">Nested</span> <span class="n">Loop</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">3</span><span class="p">.</span><span class="mi">812</span><span class="p">..</span><span class="mi">16</span><span class="p">.</span><span class="mi">741</span> <span class="k">rows</span><span class="o">=</span><span class="mi">40</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
   <span class="n">CTE</span> <span class="n">buckets</span>
     <span class="o">-&gt;</span>  <span class="k">Unique</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">1</span><span class="p">.</span><span class="mi">327</span><span class="p">..</span><span class="mi">1</span><span class="p">.</span><span class="mi">456</span> <span class="k">rows</span><span class="o">=</span><span class="mi">8</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
           <span class="o">-&gt;</span>  <span class="k">Index</span> <span class="k">Only</span> <span class="n">Scan</span> <span class="k">using</span> <span class="n">pgbench_history_mod_mtime</span> <span class="k">on</span> <span class="n">pgbench_history</span> <span class="n">pgbench_history_1</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">1</span><span class="p">.</span><span class="mi">326</span><span class="p">..</span><span class="mi">1</span><span class="p">.</span><span class="mi">447</span> <span class="k">rows</span><span class="o">=</span><span class="mi">8</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                 <span class="k">Index</span> <span class="n">Cond</span><span class="p">:</span> <span class="p">(((</span><span class="n">yb_hash_code</span><span class="p">(</span><span class="n">mtime</span><span class="p">)</span> <span class="o">%</span> <span class="mi">8</span><span class="p">))</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
                 <span class="n">Heap</span> <span class="n">Fetches</span><span class="p">:</span> <span class="mi">0</span>
                 <span class="k">Storage</span> <span class="k">Index</span> <span class="k">Read</span> <span class="n">Requests</span><span class="p">:</span> <span class="mi">8</span>
                 <span class="k">Storage</span> <span class="k">Index</span> <span class="k">Read</span> <span class="n">Execution</span> <span class="nb">Time</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">203</span> <span class="n">ms</span>
   <span class="o">-&gt;</span>  <span class="n">CTE</span> <span class="n">Scan</span> <span class="k">on</span> <span class="n">buckets</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">1</span><span class="p">.</span><span class="mi">329</span><span class="p">..</span><span class="mi">1</span><span class="p">.</span><span class="mi">464</span> <span class="k">rows</span><span class="o">=</span><span class="mi">8</span> <span class="n">loops</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
   <span class="o">-&gt;</span>  <span class="k">Limit</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">1</span><span class="p">.</span><span class="mi">904</span><span class="p">..</span><span class="mi">1</span><span class="p">.</span><span class="mi">907</span> <span class="k">rows</span><span class="o">=</span><span class="mi">5</span> <span class="n">loops</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
         <span class="o">-&gt;</span>  <span class="k">Index</span> <span class="n">Scan</span> <span class="k">using</span> <span class="n">pgbench_history_mod_mtime</span> <span class="k">on</span> <span class="n">pgbench_history</span> <span class="p">(</span><span class="n">actual</span> <span class="nb">time</span><span class="o">=</span><span class="mi">1</span><span class="p">.</span><span class="mi">891</span><span class="p">..</span><span class="mi">1</span><span class="p">.</span><span class="mi">893</span> <span class="k">rows</span><span class="o">=</span><span class="mi">5</span> <span class="n">loops</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
               <span class="k">Index</span> <span class="n">Cond</span><span class="p">:</span> <span class="p">((</span><span class="n">yb_hash_code</span><span class="p">(</span><span class="n">mtime</span><span class="p">)</span> <span class="o">%</span> <span class="mi">8</span><span class="p">)</span> <span class="o">=</span> <span class="n">buckets</span><span class="p">.</span><span class="k">mod</span><span class="p">)</span>
               <span class="k">Storage</span> <span class="k">Table</span> <span class="k">Read</span> <span class="n">Requests</span><span class="p">:</span> <span class="mi">1</span>
               <span class="k">Storage</span> <span class="k">Table</span> <span class="k">Read</span> <span class="n">Execution</span> <span class="nb">Time</span><span class="p">:</span> <span class="mi">1</span><span class="p">.</span><span class="mi">126</span> <span class="n">ms</span>
               <span class="k">Storage</span> <span class="k">Index</span> <span class="k">Read</span> <span class="n">Requests</span><span class="p">:</span> <span class="mi">1</span>
</code></pre>

</div>



<p>The query must use exactly the same expression that was used in the index (<code>(yb_hash_code(mtime) % 8))</code> to benefit from the distinct push down. Them there's one read request per tablet to get the value, and one more read request per value to get the rows.</p>

<h2>
  
  
  Scalable writes with no hotspots
</h2>

<p>To verify the scalability of writes, I've run the PgBench inserts and checked the rad and write operations on the 3 nodes of my YugabyteDB cluster:<br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--UfoTMjdq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ca8imi24f6lzxyud6u6r.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--UfoTMjdq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ca8imi24f6lzxyud6u6r.png" alt="Image description" width="800" height="469"></a><br>
<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--xAmP-dXI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ehtpelvcq3dhwule5s22.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--xAmP-dXI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ehtpelvcq3dhwule5s22.png" alt="Image description" width="800" height="215"></a><br>
This was with the two indexes (with <code>tid</code> and on <code>(yb_hash_code(mtime) % 8)</code>. Of course, you don't need the two of them. Either you use a column from the table which you know is well distributed and low cardinality, or you build one with a hash value and modulo.</p>

<p>This is now scalable, adding more nodes will automatically re-distributed the tablets and increase the throughput, and the range queries will still be fast even when the tables are growing.</p>

<h2>
  
  
  To summarize
</h2>

<p>YugabyteDB provides all building blocks for scalable reads and writes, to optimize the infinity of use-cases that can run on an SQL database:</p>

<ul>
<li>the necessary optimizations in the DocDB distributed storage to avoid too many remote calls, like the skip scan and distinct pushdowns</li>
<li>all PostgreSQL features in the YSQL query layer to build efficient queries on top of the distributed transactions, like the Common Table Expression and lateral joins</li>
</ul>

<p>Some queries do not need any transformation, some may benefit from rewriting the queries to leverage the optimized access paths. If you need transparent rewrites for those, YugabyteDB is open source and you can contribute by opening issues or pull requests.</p>

 </details> 
 <hr /> 

 #### - [10 Cool CodePen Demos (September¬†2023)](https://dev.to/alvaromontoro/10-cool-codepen-demos-september-2023-2pk) 
 <details><summary>Article</summary> <h2>
  
  
  3D Room ‚Äî ThreeJS
</h2>

<p><a href="https://codepen.io/ricardoolivaalonso">Ricardo Oliva Alonso</a> has some fantastic 3D rooms coded in HTML and CSS. He built a room using ThreeJS this time, and the results are incredible. It is a beautiful, elegant room that can be rotated and zoomed in to see the details.</p>

<p><iframe height="600" src="https://codepen.io/ricardoolivaalonso/embed/KKbWGNZ?height=600&amp;default-tab=result&amp;embed-version=2">
</iframe>
</p>




<h2>
  
  
  Common Application Message Colors
</h2>

<p>In this demo of a progressively enhanced accordion component, <a href="https://codepen.io/aardrian">Adrian Roselli</a> shares some past choices for message colors (which coincidentally match the disability pride flag colors‚Ä¶ ‚Äúfor funsies‚Äù).</p>

<p><iframe height="600" src="https://codepen.io/aardrian/embed/qBLNYBe?height=600&amp;default-tab=result&amp;embed-version=2">
</iframe>
</p>




<h2>
  
  
  Gooey Menu Concept
</h2>

<p>There are serious components and fun components. This is one of the latter. <a href="https://codepen.io/ksenia-k">Ksenia Kondrashova</a> brings an animated menu that would make the Nickelodeon team super-happy. Maybe not to use in production, but as a prototype, it is terrific.</p>

<p><iframe height="600" src="https://codepen.io/ksenia-k/embed/gOZgLgR?height=600&amp;default-tab=result&amp;embed-version=2">
</iframe>
</p>




<h2>
  
  
  Kurzgesagt submarine
</h2>

<p><a href="https://codepen.io/MergimUjkani">Mergim Ujkani</a> creates an animated (and interactive) piece of CSS Art. Move the mouse in front of this submarine, and the lights will follow around‚Ä¶ and all in HTML and CSS, without any JavaScript.</p>

<p><iframe height="600" src="https://codepen.io/MergimUjkani/embed/XWoKVWo?height=600&amp;default-tab=result&amp;embed-version=2">
</iframe>
</p>




<h2>
  
  
  100% CSS Breakout (game)
</h2>

<p>Prepare to get your mind blown by <a href="https://codepen.io/propjockey">Jane Ori</a>. She coded an Arkanoid-style game entirely in HTML and CSS, without a single line of JavaScript in view‚Ä¶ and the result is, well, you need to check it üòâ</p>

<p><iframe height="600" src="https://codepen.io/propjockey/embed/dywNyBQ?height=600&amp;default-tab=result&amp;embed-version=2">
</iframe>
</p>




<h2>
  
  
  Bouncy Pagination
</h2>

<p><a href="https://codepen.io/cobra_winfrey">Adam Kuhn</a> (aka Cobra Winfrey) creates beautiful experiences. This month, he shared a fun pagination component for a CodePen Challenge. Click on the different pages, and see the component bend and throw the ball to the correct location.</p>

<p><iframe height="600" src="https://codepen.io/cobra_winfrey/embed/PoXbbZO?height=600&amp;default-tab=result&amp;embed-version=2">
</iframe>
</p>




<h2>
  
  
  Physics Playground
</h2>

<p><a href="https://codepen.io/ksenia-k">Ksenia Kondrashova</a> repeats in this month‚Äôs list. In particular with a particle experiment that shows the physics of particles when rotating and shaking a box. The movement is natural and hypnotizing.</p>

<p><iframe height="600" src="https://codepen.io/ksenia-k/embed/abPwMdr?height=600&amp;default-tab=result&amp;embed-version=2">
</iframe>
</p>




<h2>
  
  
  Mail form with attachment
</h2>

<p>Who said that components have to be boring? This form and file-upload component are proof of the contrary. Microinteractions, previews, and animations create a wholesome experience beautifully crafted by <a href="https://codepen.io/nicolasjesenberger">Nicolas Jesenberger</a>.</p>

<p><iframe height="600" src="https://codepen.io/nicolasjesenberger/embed/MWZJWEe?height=600&amp;default-tab=result&amp;embed-version=2">
</iframe>
</p>




<h2>
  
  
  70s ovals
</h2>

<p>This generative art demo by <a href="https://codepen.io/loficodes">LoFi</a> is classy and elegant. I like the simplicity in the design and how the colors combine to create an experience reminiscing the 70s‚Äîa great job.</p>

<p><iframe height="600" src="https://codepen.io/loficodes/embed/qBLjaey?height=600&amp;default-tab=result&amp;embed-version=2">
</iframe>
</p>




<h2>
  
  
  Octagon Octahedron Octopus
</h2>

<p>A low-poly octopus drawn in 3D CSS by <a href="https://codepen.io/MackFitz">Fitz</a>. Click on the Play button to see it animated. The octopus movement is natural (or as natural as it can be for a low-poly version). It makes it an impressive demo if you want to see animations, trigonometric functions, and 3D CSS together in action.</p>

<p><iframe height="600" src="https://codepen.io/MackFitz/embed/vYvdjRN?height=600&amp;default-tab=result&amp;embed-version=2">
</iframe>
</p>




<p>And that‚Äôs all for the September list. For more cool CodePen demos, check last month‚Äôs article: <a href="https://dev.to/alvaromontoro/10-cool-codepen-demos-august-2023-bge">https://dev.to/alvaromontoro/10-cool-codepen-demos-august-2023-bge</a></p>

 </details> 
 <hr /> 
<!-- BLOG-POST-LIST:END -->
</table>
</details>


<!-- TODO
Change the 3stats boxes around, possibly two on top and one on bottom
Fix RSSfeed
Fix Spotify Playlists
Fix Socials [Portfolio, Discord, Linkedin]
In the future, add Public Repositories of Selected Projects
-->
