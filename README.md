<!-- VISITOR BADGE -->
<!-- https://github.com/hehuapei/visitor-badge -->

<img align="right" src="https://visitor-badge.laobi.icu/badge?page_id=mao1910.mao1910&left_color=%2379DAF9&right_color=%23FE6E96" />


<!-- TYPING SVG -->
<!-- https://github.com/DenverCoder1/readme-typing-svg -->

<h1 align="center">
    <img src="https://readme-typing-svg.herokuapp.com/?font=Righteous&size=35&center=true&vCenter=true&width=500&height=70&color=FE6E96&font=poppins&duration=5000&lines=Hi+There!+👋;+I'm+Mao!;" />
</h1>

<br/>

<!-- CODE/TERMINAL ABOUT ME -->
<h1 align="center">
<img src="./assets/terminal-5.gif" alt="Terminal" />
</h1>

<br/><br/><br/>


<!-- TECHNOLOGIES LOGOS -->
<!-- https://github.com/tandpfun/skill-icons -->

<h2 align="center">💻 Languages / Frameworks / Tools ⚒️</h2>
<div align="center">
    <img src="https://skillicons.dev/icons?i=javascript,typescript,angular,react,html,css,scss,bootstrap,cs,java,spring" />
    <img src="https://skillicons.dev/icons?i=flutter,firebase,supabase,mysql,git,github,gitlab,vscode,idea,maven,figma" />
</div>

<br/><br/><br/>


<!-- CONTRIBUTIONS SNAKE GAME -->
<!-- https://github.com/Platane/snk -->

<div align="center">
  <h2> My Contributionssss🐍 </h2>
  <br>
  <img alt="contributions-eating Snake" src="https://raw.githubusercontent.com/mao1910/mao1910/output/github-contribution-grid-snake.svg" />

  <!-- Four lines below suggested by Planate for Dark mode-->
  <picture>
  <source media="(prefers-color-scheme: dark)" srcset="github-snake-dark.svg" />
  <source media="(prefers-color-scheme: light)" srcset="github-snake.svg" />
  </picture>
  
  <br/><br/><br/>
</div>


<!-- GITHUB STATS -->
<!-- https://github.com/DenverCoder1/github-readme-streak-stats -->
<!-- https://github.com/anuraghazra/github-readme-stats -->
<!-- https://github-readme-stats-mao1910.vercel.app/ My own Vercel deployment-->

<h2 align="center"> Stats📝 </h2>
  <br>
<div align=center>
  <img width=429 src="https://github-readme-stats-mao1910.vercel.app/api?username=mao1910&count_private=true&show_icons=true&theme=dracula&rank_icon=github&hide=contribs&border_radius=10&border_color=79DAF9" alt="github stats"/>
  <img width=396 src="https://streak-stats.demolab.com/?user=mao1910&count_private=true&theme=dracula&currStreakNum=79DAF9&currStreakLabel=FE6E96&border_radius=10&border=79DAF9" alt="streak stats"/>
  <br/>
  <img src="https://github-readme-stats-mao1910.vercel.app/api/top-langs/?username=mao1910&layout=compact&theme=dracula&border_radius=10&size_weight=0.5&count_weight=0.5&border_color=79DAF9" alt="languages stats" />
</div>

<br/><br/><br/>


<!-- FOOTER -->
<!-- https://github.com/DenverCoder1/readme-typing-svg -->
<!-- https://readme-typing-svg.demolab.com/demo/ -->

<a href="https://git.io/typing-svg"><img src="https://readme-typing-svg.demolab.com?font=Poppins&pause=1000&color=FE6E96&width=535&lines=Thanks+for+dropping+by!;Feel+free+to+check+any+of+the+Socials+below+%F0%9F%91%87;Or+the+Joke+Of+The+Day+if+you're+down+for+a+giggle+%F0%9F%98%9D;Hope+to+see+you+again+%F0%9F%91%8A;Uh%3F+You're+still+here%3F;Well...+I'm+running+out+of+things+to+say...;Tell+you+what%2C+due+to+your+effort+and+perseverance%2C;I+shall+present+you+with+a+short+poem%3A;%22To+code%2C+or+not+to+code%2C+that+is+the+question%3A;Whether+'tis+nobler+in+the+IDE+to+debug;The+errors+and+issues+of+outrageous+software%2C;Or+to+take+up+the+keyboard+against+a+sea+of+bugs;And+by+coding%2C+end+them.%22;by+William+Shakespeare%2C+probably.+;Pretty+sure+that's+Hamlet's.;Alrighty%2C+this+has+been+fun.;But+I'll+restart+the+loop+now...+see+ya+soon!" alt="Typing SVG" /></a>


<!--  SOCIAL NETWORKS -->
<!-- https://github.com/alexandresanlim/Badges4-README.md-Profile -->

  <div> 
    <a href="https://www.deviantart.com/madeinkobaia/art/my-profile-is-under-construction-265626465" target="_blank"><img src="https://img.shields.io/badge/-LinkedIn-%230077B5?style=for-the-badge&logo=linkedin&logoColor=white" target="_blank"></a> <!-- ADD LINKEDIN PROFILE -->
    <a href = "https://www.nicepng.com/ourpic/u2q8o0t4t4r5o0r5_website-under-construction-png-graphic-transparent-website-under/"><img src="https://img.shields.io/badge/Portfolio-4285F4?style=for-the-badge&logo=Google-chrome&logoColor=white" target="_blank"></a> <!-- ADD PORTFOLIO WEBSITE -->
    <a href="https://discord.gg" target="_blank"><img src="https://img.shields.io/badge/Discord-7289DA?style=for-the-badge&logo=discord&logoColor=white" target="_blank"></a> <!-- ADD DISCORD -->
    <a href = "mailto:mao1910dev@gmail.com"><img src="https://img.shields.io/badge/Gmail-D14836?style=for-the-badge&logo=gmail&logoColor=white" target="_blank"></a>
  </div>


<!-- SPOTIFY PLAYING-->
<!-- https://github.com/novatorem/novatorem -->
<!-- https://spotify-now-playing-novatorem-git-main-mao1910.vercel.app/ My own Vercel deployment-->

[<img width=438px src="https://spotify-now-playing-git-main-mao1910.vercel.app//api/spotify/?border_color=FE6E96" alt="Mao Spotify Now Playing" />](https://open.spotify.com/user/31542et242zglhf42ydrtqgvuvde)


<!-- JOKE OF THE DAY -->
<!-- https://github.com/ABSphreak/readme-jokes -->
<!-- https://readme-jokes-git-master-mao1910.vercel.app/ My own Vercel deployment-->

<details>
<summary>I've got a Joke for you. Wanna hear it? 🙈</summary>

<br/>

 <tr>
 <td style="padding-top:4px"><img src = "https://readme-jokes-git-master-mao1910.vercel.app/api?&theme=dracula"></td>
 </tr>

</details>


<!-- RSS FEED -->
<!-- https://github.com/gautamkrishnar/blog-post-workflow -->

<details>
<summary>📕 &nbsp;RSS feed</summary>

<br/>

<!-- BLOG-POST-LIST:START -->
 #### - [A complete guide on Behavioral Design Pattern and Chain of Responsibility Pattern in Java](https://dev.to/ifourtechnolab/a-complete-guide-on-behavioral-design-pattern-and-chain-of-responsibility-pattern-in-java-1ejj) 
 <details><summary>Article</summary> <p>In this blog, we’ll learn behavioral design patterns where and when we can use this particular pattern, and its types.</p>

<p>Also, we’ll particularly focus on the chain of responsibility pattern which is a type of behavioral design pattern.</p>

<h2>
  
  
  What is Behavioral Design Pattern?
</h2>

<p>A design pattern in which more emphasis is given to how the objects interact with each other.</p>

<p>Also as the name suggests a chain of responsibility i.e., objects have their responsibilities/tasks to perform.</p>

<p>In behavioral design patterns, there should be minimum hard coding, the objects should be loosely coupled and coherence should be more.</p>

<p>Now, let us understand the terms coupling and coherence. These are significant terms in design patterns and also in software engineering.</p>

<p>Coupling - Coupling means interdependency here in terms of objects. The objects should be less dependent on each other for a particular task, otherwise, due to a failure or delay in one object can lead to a system failure.</p>

<p>Coherence - Coherence means that the objects/modules should work together so that they complement each other rather than creating a burden on the system.</p>

<h4>
  
  
  Read More: <a href="https://www.ifourtechnolab.com/blog/a-complete-guide-on-structural-design-pattern-in-java">A Complete Guide On Structural Design Pattern In Java</a>
</h4>

<h2>
  
  
  Types of Behavioral Design Pattern:
</h2>

<ul>
<li>Interpreter Pattern: As the name suggests it is used to interpret a pattern in a particular way.</li>
<li>Mediator Pattern: This design pattern acts as a mediator between different classes so that they can communicate properly and loosely coupled manner.</li>
<li>Command Pattern: Here the request by the client is wrapped and converted into a command. It is also known as a data-driven pattern.</li>
<li>State Pattern: As the name suggests, it is related to the state of an object in different classes.</li>
<li>Chain of Responsibility Pattern: Used when we want a chain of objects.</li>
<li>Memento Pattern: This design pattern is used when we want to change the state of an object to the previous form.</li>
<li>Template Pattern: In template pattern, there is an abstract class which set the implementation so other class can use them according to it.</li>
<li>Visitor Pattern: In this method, there is a visitor class that will change the algorithm of the particular element.</li>
<li>Null Object: We use this pattern when we have null values and do nothing relationship.</li>
<li>Strategy Pattern: We can use this pattern when we want to change the algorithm or behavior of a class at runtime.</li>
<li>Iterator Pattern: This is one of the most common design patterns, it is used when want to access data sequentially from a collection. In java, iterator pattern is used in iterator also.</li>
<li>Observer Pattern: When we want to observe and respond according to change in an object we use an observer pattern. When an object changes its relationship with other objects which are in entity-relationship also changes so, we need observer pattern.</li>
</ul>

<h2>
  
  
  What is a Chain of Responsibility Pattern?
</h2>

<p>A design pattern in which objects show a chain behavior is a chain of responsibility pattern.</p>

<p>Whenever a user sends a request it passes through a chain of an object and any object can send a response accordingly. So there is the least coupling between the objects.</p>

<h2>
  
  
  Advantages of using Chain of Responsibility Pattern:
</h2>

<ul>
<li>Less coupling in the system, so less interdependency.</li>
<li>The structure becomes more flexible due to less coupling and more coherence.</li>
</ul>

<h4>
  
  
  Searching for <a href="https://www.ifourtechnolab.com/java-development-company">Reliable Java Development Company</a>?
</h4>

<h2>
  
  
  Example for Chain of Responsibility Pattern:
</h2>

<p>Now, let us understand the chain of responsibility pattern with an example. The given below UML diagram will make you easily understand.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--pMcWhyzT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/24bkald3le5siogdvfi9.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--pMcWhyzT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/24bkald3le5siogdvfi9.png" alt="Image description" width="656" height="414"></a><br>
 [<a href="https://www.javatpoint.com/images/designpattern/chainofresponsibilityuml.jpg">Img Source</a>]</p>

<p>So here we have three different logger class which extends the main abstract logger class and a client class.</p>

<p>Each class has its attributes and methods like Logger has output info, error info, debug info as attributes, and set Logger, Message, display Log Info as methods.</p>

<p>Console Based Logger class has a console-based logger and displays Log Info as methods but no attributes of its own. Debug Based Logger has Debug Based Logger(int levels) and displays Log Info as methods but no attributes of it</p>

<p>The client class which is Chain of Responsibility Client has de chain() and main methods.</p>

<p><strong>Main logger class</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>public abstract class Logger {  
    public static int OUTPUTINFO = 1;  
    public static int ERRORINFO = 2;  
    public static int DEBUGINFO = 3;  
    protected int levels;  
    protected Logger nextLevelLogger;  
public void setNextLevelLogger( Logger nextLevelLogger ) 
{  
        this.nextLevelLogger = nextLevelLogger;  
    }  
        public void logMessage( int levels, String msg )
{  
        if(this.levels &lt;= levels){  
            displayLogInfo(msg);  
        }  
        if (nextLevelLogger != null) {  
            nextLevelLogger.logMessage(levels, msg);  
        }  
    }  
    protected abstract void displayLogInfo(String msg);  
}  

</code></pre>

</div>



<p><strong>Console based logger class</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>public class DebugBasedLogger extends Logger {  
  public DebugBasedLogger(int levels) {  
      this.levels = levels;  
  }  
  @Override  
  protected void displayLogInfo(String msg) {  
      System.out.println("DEBUG LOGGER INFO: " + msg);  
  }  
}

</code></pre>

</div>



<p><strong>Error based logger class</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>public class ErrorBasedLogger extends Logger {  
  public ErrorBasedLogger(int levels) {  
      this.levels=levels;  
  }  
  @Override  
  protected void displayLogInfo(String msg) {  
      System.out.println("ERROR LOGGER INFO: " + msg);  
  }  
}

</code></pre>

</div>



<p><strong>Client class / main class</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>public class ChainofResponsibilityClient {  
  private static Logger doChaining(){  
    Logger consoleLogger = new ConsoleBasedLogger(Logger.OUTPUTINFO);  

    Logger errorLogger = new ErrorBasedLogger(Logger.ERRORINFO);  
    consoleLogger.setNextLevelLogger(errorLogger);  

    Logger debugLogger = new DebugBasedLogger(Logger.DEBUGINFO);  
    errorLogger.setNextLevelLogger(debugLogger);  

    return consoleLogger;   
    }  
    public static void main(String args[]){  
    Logger chainLogger = doChaining();  

        chainLogger.logMessage(Logger.OUTPUTINFO, "Enter the sequence of values ");  
        chainLogger.logMessage(Logger.ERRORINFO, "An error has occurred now");  
        chainLogger.logMessage(Logger.DEBUGINFO, "This was the error now debugging is compiled");  
        }  
}  

</code></pre>

</div>



<p><strong>Output:</strong></p>

<p>AbilityClient</p>

<p>CONSOLE LOGGER INFO: Enter the sequence of values</p>

<p>CONSOLE LOGGER INFO: An error has occurred now</p>

<p>ERROR LOGGER INFO: An error has occurred now</p>

<p>CONSOLE LOGGER INFO: This was the error now debugging is compiled</p>

<p>ERROR LOGGER INFO: This was the error now debugging is compiled</p>

<p>DEBUG LOGGER INFO: This was the error now debugging is compiled</p>

<h2>
  
  
  Conclusion
</h2>

<p>So in this blog, we focused learning on the chain of responsibility pattern which is one of the behavioral design patterns, its uses, advantages, and also when to use these design patterns, etc. along with an example.</p>

 </details> 
 <hr /> 

 #### - [Solving "Binary Tree Level Order Traversal" Leet code Question](https://dev.to/leetcode/solving-binary-tree-level-order-traversal-leet-code-question-1pgh) 
 <details><summary>Article</summary> <h2>
  
  
  Leet code Question no: 102
</h2>

<p><strong>Companies asked this Question:</strong><br>
<em>Company: no of times</em><br>
Amazon 2<br>
Bloomberg 11<br>
Uber 2<br>
Apple 2<br>
LinkedIn 25<br>
Microsoft 13<br>
Facebook 12<br>
Oracle 7<br>
Google 5<br>
ServiceNow 3<br>
Splunk 2<br>
Adobe 2<br>
Docusign 2<br>
Accolite 2<br>
TikTok 2</p>

<h2>
  
  
  Intuition
</h2>

<p>We aim to perform a level-order traversal of a binary tree, collecting nodes at each level into sublists.</p>

<h2>
  
  
  Approach
</h2>

<ol>
<li>Utilize a queue for level-order traversal, initializing an empty list <code>WrapList</code> to store results.</li>
<li>While the queue is not empty, dequeue nodes, collect their values into sublists, and enqueue their children.</li>
<li>Add sublists to <code>WrapList</code> as levels are processed and return it as the result.</li>
</ol>

<h2>
  
  
  Complexity
</h2>

<ul>
<li>Time complexity: O(n) - We visit each node once during the traversal.</li>
<li>Space complexity: O(n) - The space usage grows with the number of nodes due to the queue and the result list.</li>
</ul>

<h2>
  
  
  Code
</h2>



<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode() {}
 *     TreeNode(int val) { this.val = val; }
 *     TreeNode(int val, TreeNode left, TreeNode right) {
 *         this.val = val;
 *         this.left = left;
 *         this.right = right;
 *     }
 * }
 */
class Solution {
    public List&lt;List&lt;Integer&gt;&gt; levelOrder(TreeNode root) {
        List&lt;List&lt;Integer&gt;&gt; WrapList = new LinkedList&lt;&gt;();

        if(root == null)
            return WrapList;

        Queue&lt;TreeNode&gt; queue =  new LinkedList&lt;&gt;();
        queue.offer(root);

        while(!queue.isEmpty()){
            int levelNum = queue.size();
            List&lt;Integer&gt; subList = new LinkedList&lt;&gt;();

            for(int i = 0 ;  i &lt; levelNum ; i++){
                TreeNode node = queue.poll();
                subList.add(node.val);

                if(node.left != null) queue.offer(node.left);
                if(node.right != null) queue.offer(node.right);
            }

            WrapList.add(subList);
        }

        return WrapList;
    }
}
</code></pre>

</div>



<p>Happy coding,<br>
shiva</p>

 </details> 
 <hr /> 

 #### - [How is Apache APISIX Fast?](https://dev.to/apisix/how-is-apache-apisix-fast-283f) 
 <details><summary>Article</summary> <p>"High speed," "minimum latency," and "ultimate performance" are often used to characterize <a href="https://api7.ai/apisix">Apache APISIX</a>. Even when someone asks me about APISIX, my answer always includes "high-performance cloud native API gateway."</p>

<p>Performance benchmarks (vs. <a href="https://api7.ai/blog/apisix-kong-3-0-performance-comparison">Kong</a>, <a href="https://apisix.apache.org/blog/2021/06/10/apache-apisix-and-envoy-performance-comparison/">Envoy</a>) confirm these characteristics are indeed accurate (<a href="https://github.com/api7/apisix-benchmark">test yourself</a>).</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Lo_5Igxw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://static.apiseven.com/uploads/2023/06/08/L0HjyWGM_apisix-vs-kong-light.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Lo_5Igxw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://static.apiseven.com/uploads/2023/06/08/L0HjyWGM_apisix-vs-kong-light.png" alt="High speed, minimum latency, and ultimate performance" width="800" height="607"></a></p>

<p><em><a href="https://github.com/api7/apisix-benchmark">Tests run</a> for 10 rounds with 5000 unique routes on Standard D8s v3 (8 vCPUs, 32 GiB memory).</em></p>

<p>But how does APISIX achieve this?</p>

<p>To answer that question, we must look at three things: etcd, hash tables, and radix trees.</p>

<p>In this article, we will look under the hood of APISIX and see what these are and how all of these work together to keep APISIX maintaining peak performance while handling significant traffic.</p>

<h2>
  
  
  etcd as the Configuration Center
</h2>

<p>APISIX uses <a href="https://etcd.io/">etcd</a> to store and synchronize configurations.</p>

<p>etcd is designed to work as a key-value store for configurations of large-scale distributed systems. APISIX is intended to be distributed and highly scalable from the ground up, and using etcd over traditional databases facilitates that.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--FWCXTIFO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://static.apiseven.com/uploads/2023/06/12/wjH9wJfU_architecture.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--FWCXTIFO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://static.apiseven.com/uploads/2023/06/12/wjH9wJfU_architecture.png" alt="APISIX architecture" width="800" height="628"></a></p>

<p>Another key indispensable feature for API gateways is to be highly available, avoiding downtime and data loss. You can efficiently achieve this by deploying multiple instances of etcd to ensure a fault-tolerant, cloud native architecture.</p>

<p>APISIX can read/write configurations from/to etcd with minimum latency. Changes to the configuration files are notified instantly, allowing APISIX to monitor only the etcd updates instead of polling a database frequently, which can add performance overhead.</p>

<p>This <a href="https://etcd.io/docs/v3.5/learning/why/#comparison-chart">chart</a> summarizes how etcd compares with other databases.</p>

<h2>
  
  
  Hash Tables for IP Addresses
</h2>

<p>IP address-based allowlists/denylists are a common use case for API gateways.</p>

<p>To achieve high performance, APISIX stores the list of IP addresses in a hash table and uses it for matching (O(1)) than iterating through the list (O(N)).</p>

<p>As the number of IP addresses in the list increases, the performance impact of using hash tables for storage and matching becomes apparent.</p>

<p>Under the hood, APISIX uses the <a href="https://github.com/api7/lua-resty-ipmatcher">lua-resty-ipmatcher</a> library to implement this functionality. The example below shows how the library is used:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="kd">local</span> <span class="n">ipmatcher</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">"resty.ipmatcher"</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">ip</span> <span class="o">=</span> <span class="n">ipmatcher</span><span class="p">.</span><span class="n">new</span><span class="p">({</span>
    <span class="s2">"162.168.46.72"</span><span class="p">,</span>
    <span class="s2">"17.172.224.47"</span><span class="p">,</span>
    <span class="s2">"216.58.32.170"</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">ngx</span><span class="p">.</span><span class="n">say</span><span class="p">(</span><span class="n">ip</span><span class="p">:</span><span class="n">match</span><span class="p">(</span><span class="s2">"17.172.224.47"</span><span class="p">))</span> <span class="c1">-- true</span>
<span class="n">ngx</span><span class="p">.</span><span class="n">say</span><span class="p">(</span><span class="n">ip</span><span class="p">:</span><span class="n">match</span><span class="p">(</span><span class="s2">"176.24.76.126"</span><span class="p">))</span> <span class="c1">-- false</span>
</code></pre>

</div>



<p>The library uses Lua tables which are hash tables. The IP addresses are hashed and stored as indices in a table, and to search for a given IP address, you just have to index the table and test whether it is nil or not.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--heQ91Gyb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://static.apiseven.com/uploads/2023/06/12/5N5UFBWG_hash-table.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--heQ91Gyb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://static.apiseven.com/uploads/2023/06/12/5N5UFBWG_hash-table.png" alt="Storing IP addresses in a hash table" width="800" height="391"></a></p>

<p><em>To search for an IP address, it first computes the hash (index) and checks its value. If it is non-empty, we have a match. This is done in constant time O(1).</em></p>

<h2>
  
  
  Radix Trees for Routing
</h2>

<p>Please forgive me for tricking you into a data structures lesson! But hear me out; this is where it gets interesting.</p>

<p>A key area where APISIX optimizes performance is route matching.</p>

<p>APISIX matches a route with a request from its URI, HTTP methods, host, and other information (see <a href="https://github.com/apache/apisix/blob/98e56716fdf76b97c90531cac24de811d841c296/conf/config-default.yaml#L77">router</a>). And this needs to be efficient.</p>

<p>If you have read the previous section, an obvious answer would be to use a hash algorithm. But route matching is tricky because multiple requests can match the same route.</p>

<p>For example, if we have a route <code>/api/*</code>, then both <code>/api/create</code> and <code>/api/destroy</code> must match the route. But this is not possible with a hash algorithm.</p>

<p>Regular expressions can be an alternate solution. Routes can be configured in a regex, and it can match multiple requests without the need to hardcode each request.</p>

<p>If we take our previous example, we can use the regex <code>/api/[A-Za-z0-9]+</code> to match both <code>/api/create</code> and <code>/api/destroy</code>. More complex regexes could match more complex routes.</p>

<p>But regex is slow! And we know APISIX is fast. So instead, APISIX uses radix trees which are compressed prefix trees (trie) that work really well for fast lookups.</p>

<p>Let's look at a simple example. Suppose we have the following words:</p>

<ul>
<li>romane</li>
<li>romanus</li>
<li>romulus</li>
<li>rubens</li>
<li>ruber</li>
<li>rubicon</li>
<li>rubicundus</li>
</ul>

<p>A prefix tree would store it like this:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--AHrULzXK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://static.apiseven.com/uploads/2023/06/12/wDoV1tl6_prefix-tree.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--AHrULzXK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://static.apiseven.com/uploads/2023/06/12/wDoV1tl6_prefix-tree.png" alt="Prefix tree" width="800" height="1001"></a></p>

<p><em>The highlighted traversal shows the word "rubens."</em></p>

<p>A radix tree optimizes a prefix tree by merging child nodes if a node only has one child node. Our example trie would look like this as a radix tree:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--42OAahPV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://static.apiseven.com/uploads/2023/06/12/ePG0v1sB_radix-tree.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--42OAahPV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://static.apiseven.com/uploads/2023/06/12/ePG0v1sB_radix-tree.png" alt="Radix tree" width="800" height="412"></a></p>

<p><em>The highlighted traversal still shows the word "rubens." But the tree looks much smaller!</em></p>

<p>When you <a href="https://docs.api7.ai/apisix/getting-started/configure-routes">create routes in APISIX</a>, APISIX stores them in these trees.</p>

<p>APISIX can then work flawlessly because the time it takes to match a route only depends on the length of the URI in the request and is independent of the number of routes (O(K), K is the length of the key/URI).</p>

<p>So APISIX will be as quick as it is when matching 10 routes when you first start out and 5000 routes when you scale.</p>

<p>This crude example shows how APISIX can store and match routes using radix trees:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ULcVMM_8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://static.apiseven.com/uploads/2023/06/12/eiOwAjNu_apisix-route-matching.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ULcVMM_8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://static.apiseven.com/uploads/2023/06/12/eiOwAjNu_apisix-route-matching.png" alt="Crude example of route matching in APISIX" width="800" height="414"></a></p>

<p><em>The highlighted traversal shows the route <code>/user/*</code> where the <code>*</code> represents a prefix. So a URI like <code>/user/navendu</code> will match this route. The example code below should give more clarity to these ideas.</em></p>

<p>APISIX uses the <a href="https://github.com/api7/lua-resty-radixtree">lua-resty-radixtree</a> library, which wraps around <a href="https://github.com/antirez/rax">rax</a>, a radix tree implementation in C. This improves the performance compared to implementing the library in pure Lua.</p>

<p>The example below shows how the library is used:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight lua"><code><span class="kd">local</span> <span class="n">radix</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">"resty.radixtree"</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">rx</span> <span class="o">=</span> <span class="n">radix</span><span class="p">.</span><span class="n">new</span><span class="p">({</span>
    <span class="p">{</span>
        <span class="n">paths</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"/api/*action"</span> <span class="p">},</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"metadata /api/action"</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="n">paths</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"/user/:name"</span> <span class="p">},</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"metadata /user/name"</span> <span class="p">},</span>
        <span class="n">methods</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"GET"</span> <span class="p">},</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="n">paths</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"/admin/:name"</span> <span class="p">},</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"metadata /admin/name"</span> <span class="p">},</span>
        <span class="n">methods</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"GET"</span><span class="p">,</span> <span class="s2">"POST"</span><span class="p">,</span> <span class="s2">"PUT"</span> <span class="p">},</span>
        <span class="n">filter_fun</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">vars</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">vars</span><span class="p">[</span><span class="s2">"arg_access"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"admin"</span>
        <span class="k">end</span>
    <span class="p">}</span>
<span class="p">})</span>

<span class="kd">local</span> <span class="n">opts</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">matched</span> <span class="o">=</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="c1">-- matches the first route</span>
<span class="n">ngx</span><span class="p">.</span><span class="n">say</span><span class="p">(</span><span class="n">rx</span><span class="p">:</span><span class="n">match</span><span class="p">(</span><span class="s2">"/api/create"</span><span class="p">,</span> <span class="n">opts</span><span class="p">))</span> <span class="c1">-- metadata /api/action</span>
<span class="n">ngx</span><span class="p">.</span><span class="n">say</span><span class="p">(</span><span class="s2">"action: "</span><span class="p">,</span> <span class="n">opts</span><span class="p">.</span><span class="n">matched</span><span class="p">.</span><span class="n">action</span><span class="p">)</span> <span class="c1">-- action: create</span>

<span class="n">ngx</span><span class="p">.</span><span class="n">say</span><span class="p">(</span><span class="n">rx</span><span class="p">:</span><span class="n">match</span><span class="p">(</span><span class="s2">"/api/destroy"</span><span class="p">,</span> <span class="n">opts</span><span class="p">))</span> <span class="c1">-- metadata /api/action</span>
<span class="n">ngx</span><span class="p">.</span><span class="n">say</span><span class="p">(</span><span class="s2">"action: "</span><span class="p">,</span> <span class="n">opts</span><span class="p">.</span><span class="n">matched</span><span class="p">.</span><span class="n">action</span><span class="p">)</span> <span class="c1">-- action: destroy</span>

<span class="kd">local</span> <span class="n">opts</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">method</span> <span class="o">=</span> <span class="s2">"GET"</span><span class="p">,</span>
    <span class="n">matched</span> <span class="o">=</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="c1">-- matches the second route</span>
<span class="n">ngx</span><span class="p">.</span><span class="n">say</span><span class="p">(</span><span class="n">rx</span><span class="p">:</span><span class="n">match</span><span class="p">(</span><span class="s2">"/user/bobur"</span><span class="p">,</span> <span class="n">opts</span><span class="p">))</span> <span class="c1">-- metadata /user/name</span>
<span class="n">ngx</span><span class="p">.</span><span class="n">say</span><span class="p">(</span><span class="s2">"name: "</span><span class="p">,</span> <span class="n">opts</span><span class="p">.</span><span class="n">matched</span><span class="p">.</span><span class="n">name</span><span class="p">)</span> <span class="c1">-- name: bobur</span>

<span class="kd">local</span> <span class="n">opts</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">,</span>
    <span class="n">var</span> <span class="o">=</span> <span class="n">ngx</span><span class="p">.</span><span class="n">var</span><span class="p">,</span>
    <span class="n">matched</span> <span class="o">=</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="c1">-- matches the third route</span>
<span class="c1">-- the value for `arg_access` is obtained from `ngx.var`</span>
<span class="n">ngx</span><span class="p">.</span><span class="n">say</span><span class="p">(</span><span class="n">rx</span><span class="p">:</span><span class="n">match</span><span class="p">(</span><span class="s2">"/admin/nicolas"</span><span class="p">,</span> <span class="n">opts</span><span class="p">))</span> <span class="c1">-- metadata /admin/name</span>
<span class="n">ngx</span><span class="p">.</span><span class="n">say</span><span class="p">(</span><span class="s2">"admin name: "</span><span class="p">,</span> <span class="n">opts</span><span class="p">.</span><span class="n">matched</span><span class="p">.</span><span class="n">name</span><span class="p">)</span> <span class="c1">-- admin name: nicolas</span>
</code></pre>

</div>



<p>The ability to manage a large number of routes efficiently has made APISIX the API gateway of choice for <a href="https://api7.ai/category/usercase">many large-scale projects</a>.</p>

<h2>
  
  
  Look under the Hood
</h2>

<p>There is only so much I can explain about the inner workings of APISIX in one article.</p>

<p>But the best part is that the libraries mentioned here and Apache APISIX are <a href="https://github.com/apache/apisix/">entirely open source</a>, meaning you can look under the hood and modify things yourself.</p>

<p>And if you can improve APISIX to get that final bit of performance, you can <a href="https://apisix.apache.org/docs/general/contributor-guide/">contribute the changes</a> back to the project and let everyone benefit from your work.</p>

 </details> 
 <hr /> 

 #### - [How Do You Create Inclusive Workplaces?](https://dev.to/devteam/how-do-you-create-inclusive-workplaces-d5m) 
 <details><summary>Article</summary> <p><em>Welcome to Code Chatter, your go-to series for conversational coding insights. What makes this series of questions different from all the others? Well, truth be told, not much, but they're still thought-provoking and fun. Join us as we explore the coding world, one witty question at a time.</em></p>

<blockquote>
<p>What advice would you offer to companies looking to create more inclusive workplaces for women, non-white, or disabled individuals in the tech industry?<br>
Follow the DEVteam for more discussions and online camaraderie!</p>
</blockquote>


<div class="ltag__user ltag__user__id__1">
  <a href="/devteam" class="ltag__user__link profile-image-link">
    <div class="ltag__user__pic">
      <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--vzeA_jD8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://res.cloudinary.com/practicaldev/image/fetch/s--CMkjYEfB--/c_fill%2Cf_auto%2Cfl_progressive%2Ch_150%2Cq_auto%2Cw_150/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/1/9a7650bd-c94f-4330-b5af-ef29fbec1a39.jpg" alt="devteam image">
    </div>
  </a>
  <div class="ltag__user__content">
    <h2>
      <a href="/devteam" class="ltag__user__link">The DEV Team</a>
      Follow
    </h2>
    <div class="ltag__user__summary">
      <a href="/devteam" class="ltag__user__link">
        The team behind this very platform. 😄
      </a>
    </div>
  </div>
</div>
 

 </details> 
 <hr /> 

 #### - [Silver Screen Code: What's Your Job's Movie Genre?](https://dev.to/codenewbieteam/silver-screen-code-whats-your-jobs-movie-genre-49l7) 
 <details><summary>Article</summary> <p><em>Get a glimpse into the daily experiences, work routines, and unique perspectives of tech professionals, both novice and experienced alike, in "A Day in the Life."</em></p>

<blockquote>
<p>If your job was a movie, what genre would it be? For bonus points: what's the title?</p>
</blockquote>

<p>Follow the <a href="https://dev.to/codenewbieteam">CodeNewbie Org</a> and <a href="https://dev.to/t/codenewbie">#codenewbie</a> for more discussions and online camaraderie!</p>

<p><em><div class="ltag__user ltag__user__id__2167">
  <a href="/codenewbieteam" class="ltag__user__link profile-image-link">
    <div class="ltag__user__pic">
      <a href="https://res.cloudinary.com/practicaldev/image/fetch/s--DL6l24W8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://res.cloudinary.com/practicaldev/image/fetch/s--gvVCmWqP--/c_fill%2Cf_auto%2Cfl_progressive%2Ch_150%2Cq_auto%2Cw_150/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/2167/a575e4d1-42a8-471a-ab8a-a9240b002aa8.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--DL6l24W8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://res.cloudinary.com/practicaldev/image/fetch/s--gvVCmWqP--/c_fill%2Cf_auto%2Cfl_progressive%2Ch_150%2Cq_auto%2Cw_150/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/2167/a575e4d1-42a8-471a-ab8a-a9240b002aa8.png" alt="codenewbieteam image"></a>
    </div>
  </a>
  <div class="ltag__user__content">
    <h2>
      <a href="/codenewbieteam" class="ltag__user__link">CodeNewbie</a>
      Follow
    </h2>
    <div class="ltag__user__summary">
      <a href="/codenewbieteam" class="ltag__user__link">
        The most supportive community of programmers and people learning to code.  Part of the DEV family.


      </a>
    </div>
  </div>
</div>
</em></p>

 </details> 
 <hr /> 
<!-- BLOG-POST-LIST:END -->
</table>
</details>


<!-- TODO
Change the 3stats boxes around, possibly two on top and one on bottom
Fix RSSfeed
Fix Spotify Playlists
Fix Socials [Portfolio, Discord, Linkedin]
In the future, add Public Repositories of Selected Projects
-->
