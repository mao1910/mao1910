<!-- VISITOR BADGE -->
<!-- https://github.com/hehuapei/visitor-badge -->

<img align="right" src="https://visitor-badge.laobi.icu/badge?page_id=mao1910.mao1910&left_color=%2379DAF9&right_color=%23FE6E96" />


<!-- TYPING SVG -->
<!-- https://github.com/DenverCoder1/readme-typing-svg -->

<h1 align="center">
    <img src="https://readme-typing-svg.herokuapp.com/?font=Righteous&size=35&center=true&vCenter=true&width=500&height=70&color=FE6E96&font=poppins&duration=5000&lines=Hi+There!+üëã;+I'm+Mao!;" />
</h1>

<br/>

<!-- CODE/TERMINAL ABOUT ME -->
<h1 align="center">
<img src="./assets/terminal-5.gif" alt="Terminal" />
</h1>

<br/><br/><br/>


<!-- TECHNOLOGIES LOGOS -->
<!-- https://github.com/tandpfun/skill-icons -->

<h2 align="center">üíª Languages / Frameworks / Tools ‚öíÔ∏è</h2>
<div align="center">
    <img src="https://skillicons.dev/icons?i=javascript,typescript,angular,react,html,css,scss,bootstrap,cs,java,spring" />
    <img src="https://skillicons.dev/icons?i=flutter,firebase,supabase,mysql,git,github,gitlab,vscode,idea,maven,figma" />
</div>

<br/><br/><br/>


<!-- CONTRIBUTIONS SNAKE GAME -->
<!-- https://github.com/Platane/snk -->

<div align="center">
  <h2> My Contributionssssüêç </h2>
  <br>
  <img alt="contributions-eating Snake" src="https://raw.githubusercontent.com/mao1910/mao1910/output/github-contribution-grid-snake.svg" />

  <!-- Four lines below suggested by Planate for Dark mode-->
  <picture>
  <source media="(prefers-color-scheme: dark)" srcset="github-snake-dark.svg" />
  <source media="(prefers-color-scheme: light)" srcset="github-snake.svg" />
  </picture>
  
  <br/><br/><br/>
</div>


<!-- GITHUB STATS -->
<!-- https://github.com/DenverCoder1/github-readme-streak-stats -->
<!-- https://github.com/anuraghazra/github-readme-stats -->
<!-- https://github-readme-stats-mao1910.vercel.app/ My own Vercel deployment-->

<h2 align="center"> Statsüìù </h2>
  <br>
<div align=center>
  <img width=429 src="https://github-readme-stats-mao1910.vercel.app/api?username=mao1910&count_private=true&show_icons=true&theme=dracula&rank_icon=github&hide=contribs&border_radius=10&border_color=79DAF9" alt="github stats"/>
  <img width=396 src="https://streak-stats.demolab.com/?user=mao1910&count_private=true&theme=dracula&currStreakNum=79DAF9&currStreakLabel=FE6E96&border_radius=10&border=79DAF9" alt="streak stats"/>
  <br/>
  <img src="https://github-readme-stats-mao1910.vercel.app/api/top-langs/?username=mao1910&layout=compact&theme=dracula&border_radius=10&size_weight=0.5&count_weight=0.5&border_color=79DAF9" alt="languages stats" />
</div>

<br/><br/><br/>


<!-- FOOTER -->
<!-- https://github.com/DenverCoder1/readme-typing-svg -->
<!-- https://readme-typing-svg.demolab.com/demo/ -->

<a href="https://git.io/typing-svg"><img src="https://readme-typing-svg.demolab.com?font=Poppins&pause=1000&color=FE6E96&width=535&lines=Thanks+for+dropping+by!;Feel+free+to+check+any+of+the+Socials+below+%F0%9F%91%87;Or+the+Joke+Of+The+Day+if+you're+down+for+a+giggle+%F0%9F%98%9D;Hope+to+see+you+again+%F0%9F%91%8A;Uh%3F+You're+still+here%3F;Well...+I'm+running+out+of+things+to+say...;Tell+you+what%2C+due+to+your+effort+and+perseverance%2C;I+shall+present+you+with+a+short+poem%3A;%22To+code%2C+or+not+to+code%2C+that+is+the+question%3A;Whether+'tis+nobler+in+the+IDE+to+debug;The+errors+and+issues+of+outrageous+software%2C;Or+to+take+up+the+keyboard+against+a+sea+of+bugs;And+by+coding%2C+end+them.%22;by+William+Shakespeare%2C+probably.+;Pretty+sure+that's+Hamlet's.;Alrighty%2C+this+has+been+fun.;But+I'll+restart+the+loop+now...+see+ya+soon!" alt="Typing SVG" /></a>


<!--  SOCIAL NETWORKS -->
<!-- https://github.com/alexandresanlim/Badges4-README.md-Profile -->

  <div> 
    <a href="https://www.deviantart.com/madeinkobaia/art/my-profile-is-under-construction-265626465" target="_blank"><img src="https://img.shields.io/badge/-LinkedIn-%230077B5?style=for-the-badge&logo=linkedin&logoColor=white" target="_blank"></a> <!-- ADD LINKEDIN PROFILE -->
    <a href = "https://www.nicepng.com/ourpic/u2q8o0t4t4r5o0r5_website-under-construction-png-graphic-transparent-website-under/"><img src="https://img.shields.io/badge/Portfolio-4285F4?style=for-the-badge&logo=Google-chrome&logoColor=white" target="_blank"></a> <!-- ADD PORTFOLIO WEBSITE -->
    <a href="https://discord.gg" target="_blank"><img src="https://img.shields.io/badge/Discord-7289DA?style=for-the-badge&logo=discord&logoColor=white" target="_blank"></a> <!-- ADD DISCORD -->
    <a href = "mailto:mao1910dev@gmail.com"><img src="https://img.shields.io/badge/Gmail-D14836?style=for-the-badge&logo=gmail&logoColor=white" target="_blank"></a>
  </div>


<!-- SPOTIFY PLAYING-->
<!-- https://github.com/novatorem/novatorem -->
<!-- https://spotify-now-playing-novatorem-git-main-mao1910.vercel.app/ My own Vercel deployment-->

[<img width=438px src="https://spotify-now-playing-git-main-mao1910.vercel.app//api/spotify/?border_color=FE6E96" alt="Mao Spotify Now Playing" />](https://open.spotify.com/user/31542et242zglhf42ydrtqgvuvde)


<!-- JOKE OF THE DAY -->
<!-- https://github.com/ABSphreak/readme-jokes -->
<!-- https://readme-jokes-git-master-mao1910.vercel.app/ My own Vercel deployment-->

<details>
<summary>I've got a Joke for you. Wanna hear it? üôà</summary>

<br/>

 <tr>
 <td style="padding-top:4px"><img src = "https://readme-jokes-git-master-mao1910.vercel.app/api?&theme=dracula"></td>
 </tr>

</details>


<!-- RSS FEED -->
<!-- https://github.com/gautamkrishnar/blog-post-workflow -->

<details>
<summary>üìï &nbsp;RSS feed</summary>

<br/>

<!-- BLOG-POST-LIST:START -->
 #### - [üî•TOPüî• WordPress Themes You Should KNOW...](https://dev.to/noobizdev/top-wordpress-themes-you-should-know-4bme) 
 <details><summary>Article</summary> <p>Selecting the right WordPress theme is crucial for a blog's success. Here are the top 10 WordPress themes for blogs in 2023, compiled from various reputable sources:<br>
<br></p>

<blockquote>
<p>We love hearing from our followers, so please give us a like and a follow!‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</p>
</blockquote>



<h2>
  
  
  Choosing the Right WordPress Theme
</h2>

<p>Choosing the right WordPress theme is crucial for the success of your website. Here's why it matters:<br>
User Experience: A well-designed theme enhances user experience, making your site more appealing and easier to navigate.</p>

<ol>
<li>Branding: Your theme should align with your brand's identity, ensuring consistency in colors, fonts, and style.</li>
<li>Performance: Themes impact your site's speed. A poorly coded theme can slow down your website, affecting SEO and user satisfaction.</li>
<li>Responsiveness: Mobile-friendliness is vital for SEO and user engagement. A responsive theme ensures your site looks great on all devices.</li>
<li>Security: Themes with regular updates and strong security features protect your site from vulnerabilities and hacking attempts.</li>
<li>Customization: Choose a theme that allows you to customize elements easily without coding, giving you flexibility in design and layout.</li>
<li>SEO Friendliness: Some themes are optimized for SEO, helping your content rank higher in search engine results.</li>
<li>Support and Updates: Opt for themes with active developers who provide support and updates, ensuring compatibility with the latest WordPress versions.


</li>
</ol>

<h2>
  
  
  Top 10 WordPress Themes for Blogs
</h2>

<ol>
<li>
<strong>Hestia</strong>: A versatile, free theme suitable for blogs of all types. It's recommended by ThemeIsle as one of the best free options for 2023.</li>
<li>
<strong>Divi</strong>: Known for its flexibility and powerful features, Divi is a popular choice among bloggers. Elegant Themes ranks it among the top options for bloggers in 2023.</li>
<li>
<strong>Astra</strong>: A lightweight and customizable theme that's great for bloggers. It's mentioned as a top pick by Neil Patel.</li>
<li>
<strong>GeneratePress</strong>: Known for its speed and performance, GeneratePress is a free theme recommended by WPBeginner for bloggers in 2023.</li>
<li>
<strong>Schema Lite</strong>: A free theme known for its SEO-friendly design, making it a solid choice for bloggers. It's featured in ThemeIsle's list.</li>
<li>
<strong>OceanWP</strong>: Another lightweight and customizable theme suitable for bloggers. It's mentioned as a top pick by Kinsta.</li>
<li>
<strong>Baskerville</strong>: A minimalist theme with a focus on typography, ideal for bloggers looking for a clean and elegant design. It's a recommendation from ThemeIsle.</li>
<li>
<strong>Blossom</strong> Feminine: Tailored for female bloggers, this theme offers a feminine and stylish design. It's among the expert picks at WPBeginner.</li>
<li>
<strong>Newspaper</strong>: If you're running a news-oriented blog, the Newspaper theme offers a professional and feature-rich solution. It's featured in Elegant Themes' list.</li>
<li>
<strong>Soledad</strong>: A versatile theme with numerous layout options, making it suitable for various blog niches. It's mentioned in Kinsta's list of top themes for 2023.

</li>
</ol>

<p>These themes offer diverse options, so you can choose the one that best suits your blog's niche and style. also</p>

<p><br><br>
You can also compare <strong><a href="https://noobizdev.tech/choosing-the-best-wordpress-themes-for-your-website/">the best WordPress Themes</a></strong> with features such as <strong>free</strong> or <strong>woocommerce</strong> or <strong>mobile friendly</strong> and with <strong>strong seo</strong> and <strong>high speed</strong> in this article...<br>
<br></p>

<h2>
  
  
  Conclusion
</h2>

<p>In summary, the right WordPress theme impacts your site's appearance, performance, security, and user experience. It's a pivotal decision in building a successful online presence.</p>




<blockquote>
<p>If you enjoyed this post, make sure to save it for later!</p>

<p>Don't forget to leave a comment if you need any help...</p>

<p>Thanks for reading, See you next time... ‚ù§Ô∏èüëã</p>


</blockquote>

 </details> 
 <hr /> 

 #### - [Generate New Project Code Using "create-blank-app" command and ChatGPT](https://dev.to/ngduc/generate-new-project-code-using-create-blank-app-command-and-chatgpt-1a2m) 
 <details><summary>Article</summary> <p>Setting up a new project can be a tedious task, especially when you're dealing with multiple tech stacks. Wouldn't it be great if we could automate this process with a single command? That's where <strong>create-blank-app</strong> comes into play.</p>

<p>With the advent of AI technologies in the programming world, developers are now finding more efficient ways to create project codes. One of the latest techniques involves using OpenAI's ChatGPT to generate new project code. This method simplifies and accelerates the process of initializing projects with various tech stacks. In this blog post, we introduce a tool named <strong>create-blank-app</strong> (or <strong>cba</strong> for short), which leverages this cutting-edge technique.</p>

<h3>
  
  
  Simplify Your Project Initialization with 'create-blank-app'
</h3>

<p><strong>create-blank-app</strong> is a powerful command-line tool designed to simplify the process of creating new apps. Users can search for tech stacks using keywords, which makes this tool highly flexible and customizable. One of the unique features of create-blank-app is its support for generative AI. With just one command, you can leverage the power of AI to kick-start your project.</p>

<p>To install <strong>create-blank-app</strong>, assume you already have NodeJS installed, just run: <code>$ npm install create-blank-app -g</code></p>

<h3>
  
  
  Supported Tech Stacks
</h3>

<p><strong>create-blank-app</strong> supports a wide range of popular tech stacks:</p>

<p>Frontend Frameworks: Vite, bun, create-react-app (CRA), create-next-app (CNA), create-nuxt-app, angular, create-web3js-app (CWA), and create-react-native-app (Expo)<br>
Backend Framework: Express-generator-typescript<br>
Mobile: React-native init<br>
Bundler: Vite (vue, react, preact, lit-element, svelte app)</p>

<h3>
  
  
  Using ChatGPT with create-blank-app
</h3>

<p>In addition to these tech stacks, create-blank-app also supports ChatGPT to generate a new app using a prompt file. This feature turbocharges the app creation process by allowing you to leverage the power of AI.</p>

<p>Steps to generate a New Project using ChatGPT:</p>

<ol>
<li>Set OpenAI api key like <code>$ export OPENAI_API_KEY=&lt;yourkey&gt;</code>
</li>
<li>Create an empty directory, inside, write your prompt in the <strong>"prompt" file</strong> (or "prompt.gpt4" for gpt-4 model).</li>
<li>Outside that directory, run: <code>$ cba &lt;name&gt;</code>
</li>
</ol>

<h3>
  
  
  Wrapping Up
</h3>

<p>Embrace the future of coding with 'create-blank-app', setting up a new project with your desired tech stack is just a command away. The support for ChatGPT adds another layer of convenience, not only does it save you time and effort, but with AI-driven code generation, it also opens new possibilities. We encourage you to try it out, contribute on GitHub, and share your feedback to help us improve.</p>

<ul>
<li>Github: <a href="https://github.com/ngduc/create-blank-app">https://github.com/ngduc/create-blank-app</a>
</li>
</ul>

 </details> 
 <hr /> 

 #### - [Some aspects of Merkle Tree](https://dev.to/sergeyshandar/some-aspects-of-merkle-tree-19jo) 
 <details><summary>Article</summary> <p>Previously, I shared <a href="https://dev.to/sergeyshandar/data-vendor-lock-in-and-web3-5cm8">my thoughts</a> about how we can solve data vendor lock-in problem using <a href="https://en.wikipedia.org/wiki/Content-addressable_network">content-addressable network (CAN)</a> and <a href="https://en.wikipedia.org/wiki/Content-addressable_storage">content-addressable storage (CAS)</a> for personal use. As mentioned in the article, we don't care how our network works as long as we can download a data block for a specific hash because we can always validate the downloaded data against the hash value. There is one problem with validation. If the hash validation fails and our file is quite big (say several gigabytes),  we waste our network time and resources for nothing.</p>

<p>We wouldn't have such a problem if we could validate small parts of the data block while downloading the entire data block. One of the solutions is to use <a href="https://en.wikipedia.org/wiki/Merkle_tree">Merkle Tree</a> for our hash function. There are a lot of good articles and videos about it, and I don't want to repeat them. I want to focus on some of the essential aspects of the Merkle tree that you should know if you would like to implement one.</p>

<h2>
  
  
  Definitions
</h2>

<p><code>f</code> is a <a href="https://en.wikipedia.org/wiki/One-way_compression_function">cryptographic compress hash function</a> that accepts two digests and returns one. For example, <code>h01 = f(h0, h1)</code>.</p>

<p>We split a data block into a list of digests <code>[d0, d1, ..., dN]</code>. Let's assume that <code>N</code> is <code>2^P</code>, where <code>P</code> is the height of the corresponding Merkle tree. Our tree will look like this:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ecENwlmJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/fu9vhl16reu0jul38l9n.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ecENwlmJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/fu9vhl16reu0jul38l9n.png" alt="Merkle tree" width="691" height="703"></a></p>

<h2>
  
  
  Second Preimage Attack
</h2>

<p>If we know data for a specific hash, we can create a collision because the tree doesn't distinguish between hash digest and data digests. So, it's possible to send hash digests instead of actual data. In this case, the validation will succeed, but the data will differ.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--tdIIE2Bk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8us8n69jfgr1kla5vbj6.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--tdIIE2Bk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8us8n69jfgr1kla5vbj6.png" alt="Second preimage attack" width="439" height="543"></a></p>

<p>It's called <a href="https://en.wikipedia.org/wiki/Preimage_attack">second preimage attack</a>. To prevent such attacks, we need to separate data from hashes.</p>

<p>We can use another hash function for the data blocks to convert them into hash digests. Let's call it <code>g</code>.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--8Fj6TdVe--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rx2wyhc249d30s1e7no4.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--8Fj6TdVe--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rx2wyhc249d30s1e7no4.png" alt="Fix # 1" width="661" height="823"></a></p>

<p>The <code>g</code> function should differ from <code>f</code>.</p>

<p>Another way to fix the issue is to extend a digest with one bit. If the bit is<br>
set to <code>0</code>, then it's data; otherwise, it's a result of the <code>f</code> hash function.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--x3f1fqlU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/lp2qdyj83655uj5h5abd.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--x3f1fqlU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/lp2qdyj83655uj5h5abd.png" alt="Fix # 2" width="730" height="685"></a></p>

<p>Note that such extended digest should not be used to transfer secure data because short messages can be easily restored.</p>

<h2>
  
  
  Tails
</h2>

<p>Actual data usually is not aligned to <code>2^P</code>. One way to fix the problem is to add one bit <code>1</code> and then fill the rest with  zeros.</p>

<h2>
  
  
  Length Extension Attack
</h2>

<p>If we have one Merkle Tree hash, we can use it as a node in another tree and create a valid hash for a new data block. This is called <a href="https://en.wikipedia.org/wiki/Length_extension_attack">length extension attack</a>. <br>
To solve it, we can transform a root hash into another hash before publishing it.</p>

<h2>
  
  
  No Shift Resistance
</h2>

<p>Merkle Tree is a very good idea to split data blocks into parts. We can even reduce traffic if some parts are the same. Or, we don't need to download some parts if we already have them in our hash table.  However, it only works if the same data parts are aligned with Merkle Tree parts. This is a big limitation of Merkle Tree.</p>

 </details> 
 <hr /> 

 #### - [Everything I Learnt From Making a Service Worker Build Plugin](https://dev.to/hedgehog125/everything-i-learnt-from-making-a-service-worker-build-plugin-3n64) 
 <details><summary>Article</summary> <p>Since I've now finished my <a href="https://www.npmjs.com/package/sveltekit-adapter-versioned-worker">3rd service worker build plugin</a>, I thought I'd share what I learnt, since I had to figure out a surprising amount by myself. In addition, this post also compiles and expands on the suggestions I thought were relevant from the following:</p>

<ul>
<li>
<a href="https://redfin.engineering/how-to-fix-the-refresh-button-when-using-service-workers-a8e27af6df68">"How to Fix the Refresh Button When Using Service Workers"</a> by Dan Fabulich</li>
<li>
<a href="https://www.thecodeship.com/web-development/guide-service-worker-pitfalls-best-practices/">"A guide to Service Workers - pitfalls and best practices"</a> by Ayman Farhat</li>
<li>
<a href="https://gist.github.com/mmazzarolo/e87a11d24f85b952ee30792316f56d47">"Service Workers Tips"</a> by Matteo Mazzarolo</li>
<li>
<a href="https://www.youtube.com/watch?v=Hzxy6ml-FYE">"Handling updates offline-first - HTTP 203"</a> published by Google Chrome Developers</li>
</ul>

<h1>
  
  
  Quick Explanations
</h1>

<p>If you're trying to make your own build plugin, you'll need to know the APIs in more detail, but here's a quick rundown just so you can understand this post...</p>

<p>Service workers intercept requests from the clients (tabs and windows) they control. When a service worker is first downloaded or when it's updated, it enters the <code>"installing"</code> stage, firing the <code>"install"</code> event. Once that event finishes (and doesn't throw), it becomes <code>"waiting"</code>. If there's no existing active service worker, this one will become it*, but otherwise it'll wait until there are no clients before becoming active. This means you can have both an active and a waiting worker simultaneously. However, you can have the waiting service worker call <code>skipWaiting</code>, which is what some of this post is about.</p>

<p>*But it won't control the existing clients unless <code>clients.claim</code> is called.</p>



<p>With that all out of the way, here's everything I learnt and what I now consider to be best practices for service workers...</p>
<h1>
  
  
  #0: They're Complicated
</h1>

<p>While the basics of the Service Worker API are relatively simple, things get complicated once you start trying to do things properly. Because of this, you'll likely end up making your own general service worker build plugin, rather than something specific to a particular project. This is probably a bit more sensible than making your own JavaScript framework, and you'll learn a lot, but just keep in mind that it could take months (my most recent took about 4).</p>

<p>If you can, use something like <a href="https://developer.chrome.com/docs/workbox/">Workbox</a> or, if it's suitable, my own: <a href="https://www.npmjs.com/package/sveltekit-adapter-versioned-worker">Versioned Worker</a> <em>(wink wink nudge nudge)</em>.</p>
<h1>
  
  
  #1: Version Your Cache
</h1>

<p>Starting with a simpler thing: make sure you use a unique ID for each version of your app you store with the Cache API. In <a href="https://www.npmjs.com/package/sveltekit-adapter-versioned-worker">Versioned Worker</a>, I have the ID follow this format:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>{the prefix set in the config}-{the app version}
</code></pre>

</div>



<p>Alternatively, you could generate a random string at build time instead of having a version number.</p>

<p>Each service worker should then only serve from its own cache to avoid issues from mismatched versions. Remember that once a new service worker is installed, there'll usually still be another service worker that's active, and the new worker shouldn't interfere with it.</p>

<p>This approach also makes it easier to remove old cache as you can just remove all other cache objects (not the current one) that have your prefix.</p>

<h1>
  
  
  #2: Put Your Service Worker in the Right Folder
</h1>

<p>In my, and <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register#:~:text=an%20active%20registration.-,There%20is%20frequent%20confusion%20surrounding%20the%20meaning%20and%20use%20of%20scope.%20Since%20a%20service%20worker%20can%27t%20have%20a%20scope%20broader%20than%20its%20own%20location%2C%20only%20use%20the%20scope%20option%20when%20you%20need%20a%20scope%20that%20is%20narrower%20than%20the%20default.,-Syntax">possibly also Mozilla's opinion</a>, the importance of the <code>"scope"</code> argument in <code>navigator.serviceWorker.register</code> is generally overstated. Since you can only use it to narrow the scope of a service worker, I'd instead think about what folder* you're going to have the service worker file in. Most of the time, it should be at the root of your site, meaning it has a URL like <code>example.com/service-worker.js</code>. However, if some routes have separate codebases, like if you're using GitHub pages, you probably want it to look more like this:</p>

<ul>
<li>
<code>example.com/Text-Editor/service-worker.js</code>, which controls tabs with URLs starting with <code>example.com/Text-Editor</code>
</li>
<li>And <code>example.com/Cool-Game/service-worker.js</code>, which controls tabs with URLs starting with <code>example.com/Cool-Game</code>
</li>
</ul>

<p>*Yes, I know URLs don't really have folders, but I think it's a good way to think about this.</p>

<h1>
  
  
  #3: Service Workers Intercept <em>All</em> Requests From Controlled Clients
</h1>

<p>Somewhat embarrassingly, I only recently found out that requests outside of the service worker's scope (including cross origin requests) are still intercepted. There are some restrictions when it comes to CORS, but the Service Worker API really does give you a lot of control. It turns out that the scope actually just dictates what clients are controlled. And all requests from controlled clients are intercepted.</p>

<h1>
  
  
  #4: Take Advantage of Reload Opportunities
</h1>

<p>Moving onto a more complicated one: in an SPA, you might be able to sneak in a reload for an update as part of certain actions. Pretty much any in-app navigation can work, but think about how much data you'll need to transfer and how noticeable it'll be to users. The client should also check with the service worker that it's the only client, since you don't want to have 2 versions running at once. In Versioned Worker, this process looks like a bit like this:</p>

<ul>
<li>
<code>reloadOpportunity</code> is called, optionally with a URL to navigate to as part of it and some state to give to the new version.</li>
<li>If there's no waiting service worker, this process stops.</li>
<li>It asks the service worker how many clients it has.</li>
<li>If there's more than 1, this process stops.</li>
<li>The client then sets a SessionStorage item to mark there being some state and sends the state to the waiting service worker. Alternatively, you can just store the state in SessionStorage.</li>
<li>The waiting service worker then holds onto the state by using <code>ExtendableMessageEvent.waitUntil</code> in the <code>message</code> listener and calls <code>skipWaiting</code>. This should ensure that the service worker remains running until the state is requested again in a second.</li>
<li>The client either receives a message from the service worker telling it to reload, or a <code>"controllerchange"</code> event is detected, triggering a reload.</li>
<li>The client reloads using the new version and notices the SessionStorage indicates there's some state.</li>
<li>It asks the now active service worker for the state, then uses the data to put the app back in a similar state to before.</li>
<li>The promise provided to the <code>waitUntil</code> resolves, allowing the browser to shut down the service worker again*.</li>
</ul>

<p>*See #5.</p>

<p>And in MPAs, this is even easier, provided you implement #10.</p>

<h1>
  
  
  #5: When the Service Worker Starts and Stops
</h1>

<p>Service workers almost always start because of an event they received (that might even be the only time?). They can be stopped anytime there aren't any ongoing <code>ExtendableEvent</code>s, but browsers will generally let them idle for a bit while they're controlling clients. Browsers will typically kill misbehaving service workers though. For example, Chrome will kill them if either of the following happen:</p>

<ul>
<li>The main thread of the service worker is blocked for 30 seconds or more</li>
<li>An ExtendableEvent runs for more than 5 minutes*</li>
</ul>

<p>*Though, I wonder if Chrome allows that if there are some other ongoing ExtendableEvents that are currently under that limit.</p>

<p>Rather confusingly, a lot of resources state service workers "live" (they also have the quotes) forever, referring to how they're saved until the site data is cleared. So let me clear this up: saving in this context just means that the browser stores the necessary information to restart the service worker, sometimes involving a bytecode cache. It <em>doesn't</em> mean that the state of the service worker will be preserved, and therefore all the top-level code will be re-run.</p>

<p><strong>More information</strong>: <a href="https://chromium.googlesource.com/chromium/src/+/main/docs/security/service-worker-security-faq.md">Service worker FAQ</a></p>

<h1>
  
  
  #6: Wait Until the Page has Loaded/Hydrated Before Registering
</h1>

<p>I haven't experimented too much with this one, but in Versioned Worker I do wait until hydration has finished before registering. This is so the service worker doesn't compete with the page for bandwidth and CPU time. Remember that the service worker isn't used for the very first page load anyway.</p>

<h1>
  
  
  #7: How the Service Worker Itself is Cached
</h1>

<p>The request for the service worker itself <em>isn't</em> intercepted by the active service worker. The same also applies to its imports (both <code>importScripts</code> and <code>import</code>) and <code>fetch</code>es. Therefore, you should avoid storing all but potentially the latter in CacheStorage.</p>

<p>Starting a few years ago, all the major browsers decided to ignore the cache headers for the service worker entry. Instead, the whole file is requested (unless <code>updateViaCache</code> is set to <code>"all"</code>) and compared byte-by-byte.</p>

<p>Because of this, and also because doing so breaks things, you should avoid changing the service worker filename.</p>

<p>As a failsafe, the browser will also treat the HTTP cache for it as stale if it's more than 24 hours old. This also seems to apply to imports, but I haven't been able to fully verify this (the browser might just be freeing up space).</p>

<h1>
  
  
  #8: Use an importScripts Wrapper
</h1>

<p>Because of how the caching works, it's a good idea to use an <code>importScripts</code> wrapper for your service worker to improve the efficiency of update checks. The code looks like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="c1">// service-worker.js</span>
<span class="nx">importScripts</span><span class="p">(</span><span class="dl">"</span><span class="s2">assets/innerSw.&lt;computed hash&gt;.js</span><span class="dl">"</span><span class="p">);</span>
<span class="cm">/* ^ You can also use a search parameter to cache bust, like this:
  "assets/innerSw.js?v=42"
*/</span>

<span class="c1">// assets/innerSw.&lt;computed hash&gt;.js</span>
<span class="cm">/* &lt;the actual service worker code&gt; */</span>
</code></pre>

</div>



<p>Then make sure you've left the <code>updateViaCache</code> option of <code>navigator.serviceWorker.register</code> as its default value of <code>"imports"</code>. The browser will now only download <code>service-worker.js</code> to check for updates.</p>

<p><strong>Tip</strong>: If you can, <a href="https://www.keycdn.com/blog/cache-control-immutable">set your server to cache the inner service worker indefinitely</a> as we've got cache busting. Note that the HTTP cache will be ignored by the browser for the outer service worker, unless <code>updateViaCache</code> is set to <code>"all"</code>.</p>

<h1>
  
  
  #9: Don't Require a Service Worker to be Active
</h1>

<p>Despite browser support for service workers being good for the past few years, they should still be a progressive enhancement. This is because they aren't/can't be used in the following situations:</p>

<ul>
<li>The first load. Although if you have to, you can wait for it to install and then have it claim the client.</li>
<li>Hard reloads.</li>
<li>In Firefox private windows.</li>
<li>In Firefox if cookies are disabled or set to be cleared on quit.</li>
</ul>

<h1>
  
  
  #10: How to Fix the Browser's Reload and Work Around Other Quirks
</h1>

<p>Dan Fabulich already wrote <a href="https://redfin.engineering/how-to-fix-the-refresh-button-when-using-service-workers-a8e27af6df68">a whole article just on the first bit</a>, but I've got some more to add.</p>

<p>The problem is that when you reload a webpage, the new page is loaded before the old one is discarded. Because of this, the browser doesn't swap out the active service worker with the waiting one.</p>

<p>The main oversight in his guide is that during the first navigation into the scope of a service worker, the client isn't in <code>clients.matchAll</code>. This means that opening a 2nd in-scope tab when there's a waiting service worker will cause the 1st one to refresh*!</p>

<p>*If the page is set to reload when the controller changes, which I do in Versioned Worker.</p>

<p>It also doesn't work in Firefox due to a <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1113522">bug that <em>still</em> hasn't been fixed</a>. Thankfully, this can be worked around by allowing the page to be reloaded for an update within 300ms of it loading. This is pretty unnoticeable to users and surprisingly even means the PWA can update more smoothly in Firefox than Chrome, as Chrome takes about a second to reload the page. Removing the logic around checking for a waiting service worker from the active worker might fix this, but I haven't experimented with that yet.</p>

<p>The other thing is that with his code, the page can get stuck loading. At least in Chrome, there just seems to be some weirdness with calling <code>skipWaiting</code> when there are ongoing requests. Because of this, I suggest calling it every 100ms until the returned promise resolves.</p>

<p>Anyway, in Versioned Worker, this all looks like this:</p>

<ul>
<li>When the active service worker receives a GET request with a mode of <code>"navigate"</code>, it checks if there's a waiting worker</li>
<li>If there is one, it checks if there's 1 client or less with <code>clients.matchAll()</code>
</li>
<li>If that condition is also met, it sends the reload page (more on that in a second)</li>
<li>Otherwise it sends the page as normal</li>
<li>If, on a non-reload page, there's a waiting service worker within 300ms of the page loading, tell the waiting service worker to potentially skip waiting</li>
<li>If the waiting service worker gets the message, it checks if there's 1 client or less</li>
<li>If that condition passes, <code>skipWaiting</code> is called and <code>await</code>ed with a timeout of 100ms</li>
<li>If it times out, the active service worker is told to finish and the client is told to reload</li>
<li>Because the active service worker was told to finish, the client is sent the reload page</li>
</ul>

<p>Then the code for the reload page is similar to this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight html"><code><span class="nt">&lt;script&gt;</span>
    <span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nb">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span><span class="p">.</span><span class="nx">getRegistration</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="nx">registration</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nx">registration</span><span class="p">?.</span><span class="nx">waiting</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">reloadOnce</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="nx">sendConditionalSkip</span><span class="p">();</span>
                <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">const</span> <span class="nx">start</span> <span class="o">=</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
                    <span class="kd">const</span> <span class="nx">event</span> <span class="o">=</span> <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="p">{</span>
                        <span class="nb">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">,</span> <span class="nx">resolve</span><span class="p">,</span> <span class="p">{</span>
                            <span class="na">once</span><span class="p">:</span> <span class="kc">true</span>
                        <span class="p">});</span>
                        <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">resolve</span><span class="p">(</span><span class="kc">null</span><span class="p">),</span> <span class="mi">500</span><span class="p">);</span>
                    <span class="p">});</span>

                    <span class="k">if</span> <span class="p">(</span>
                        <span class="nx">event</span><span class="p">?.</span><span class="nx">data</span><span class="p">?.</span><span class="nx">type</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">vw-skipFailed</span><span class="dl">"</span> <span class="c1">// More than 1 client</span>
                        <span class="o">||</span> <span class="p">(</span><span class="o">!</span> <span class="nx">registration</span><span class="p">.</span><span class="nx">waiting</span><span class="p">)</span>
                    <span class="p">)</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="nx">reloadOnce</span><span class="p">();</span>
                    <span class="p">}</span>

                    <span class="nx">sendConditionalSkip</span><span class="p">();</span>

                    <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="p">{</span>
                        <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">resolve</span><span class="p">(),</span> <span class="mi">100</span> <span class="o">-</span> <span class="p">(</span><span class="nx">performance</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="nx">start</span><span class="p">));</span>
                    <span class="p">});</span>
                <span class="p">}</span>

                <span class="kd">function</span> <span class="nx">sendConditionalSkip</span><span class="p">()</span> <span class="p">{</span>
                    <span class="nx">registration</span><span class="p">.</span><span class="nx">waiting</span><span class="p">?.</span><span class="nx">postMessage</span><span class="p">({</span>
                        <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">conditionalSkipWaiting</span><span class="dl">"</span>
                    <span class="p">});</span>
                <span class="p">}</span>
            <span class="p">});</span>
            <span class="nb">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">controllerchange</span><span class="dl">"</span><span class="p">,</span> <span class="nx">reloadOnce</span><span class="p">);</span>


            <span class="kd">let</span> <span class="nx">reloading</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="kd">function</span> <span class="nx">reloadOnce</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">reloading</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
                <span class="nx">reloading</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

                <span class="nx">location</span><span class="p">.</span><span class="nx">reload</span><span class="p">();</span>
                <span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">location</span><span class="p">.</span><span class="nx">reload</span><span class="p">(),</span> <span class="mi">1000</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})();</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>

</div>



<p><strong>Note</strong>: The "conditionalSkipWaiting" message is the same skip waiting message that was mentioned earlier. However, the active service worker won't be told to finish as part of it. Also note that if the waiting service worker tells this page that there's more than 1 client, the page will reload without an update, fixing that flaw I mentioned earlier.</p>

<p>Due to back/forwards cache, it's also important that the reload page is sent with the <code>cache-control</code> header set to <code>"no-store"</code>. You should also have some code to reload the page again if the user is sent back to the old page after the app was reloaded for an update. Versioned Worker's implementation of this is a bit more complicated as it has some timeouts and other logic, but here's a basic approach:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="kd">let</span> <span class="nx">reloading</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">reloadOnce</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">reloading</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="nx">reloading</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="nx">location</span><span class="p">.</span><span class="nx">reload</span><span class="p">();</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">pageshow</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">location</span><span class="p">.</span><span class="nx">reload</span><span class="p">());</span>
<span class="p">}</span>
</code></pre>

</div>



<p>Hopefully that tip was still of some use to you considering the complexity. If anyone's interested, I could see if I can make a proper tutorial on it.</p>

<h1>
  
  
  #11: Don't Cache non-oks
</h1>

<p>With the longest one now done, here's a simpler one... Remember that if you're using <code>Cache.put</code> that <code>fetch</code> doesn't throw for error responses. So, check if the <code>ok</code> property is <code>true</code> and handle things accordingly. If this is in an <code>"install"</code> event listener, you might want make the promise passed to <code>waitUntil</code> throw, as that'll cause the install to fail. If you're calling an <code>async</code> function for this, you can just <code>throw</code> one:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">install</span><span class="dl">"</span><span class="p">,</span> <span class="nx">installEvent</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">installEvent</span><span class="p">.</span><span class="nx">waitUntil</span><span class="p">(</span>
        <span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">resp</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="dl">"</span><span class="s2">/something</span><span class="dl">"</span><span class="p">);</span>
            <span class="c1">// ^ Network errors will throw by themselves, so no try/catch needed</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="k">throw</span> <span class="dl">"</span><span class="s2">Install failed</span><span class="dl">"</span><span class="p">;</span>

            <span class="c1">// ...</span>
        <span class="p">})()</span>
    <span class="p">);</span>
<span class="p">});</span>
</code></pre>

</div>



<h1>
  
  
  #12: Passthrough Fetch Listeners <em>Can</em> be Fine
</h1>

<p>A passthrough fetch listener looks like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">fetch</span><span class="dl">"</span><span class="p">,</span> <span class="nx">fetchEvent</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">fetchEvent</span><span class="p">.</span><span class="nx">respondWith</span><span class="p">(</span><span class="nx">fetch</span><span class="p">(</span><span class="nx">fetchEvent</span><span class="p">.</span><span class="nx">request</span><span class="p">));</span>
<span class="p">});</span>
</code></pre>

</div>



<p>Many articles say to avoid doing things like this and I think it's true to some extent. Certainly if you <em>just</em> have that code, you might as well not register a fetch listener. However, having a passthrough listener allows you to use and/or modify the response before sending it, which can be useful. For example, by default in Versioned Worker, I always call <code>respondWith</code> for same origin requests, since the alternative is more confusing and usually not worth the headache.</p>

<p>So you can assess potential tradeoffs, here are the actual consequences of passthrough listeners like this:</p>

<ul>
<li>
<a href="https://stackoverflow.com/a/64359741/8760866">The streaming of responses won't be able to be properly terminated</a>. This is particularly problematic with video and audio, which often stop responses when skipping.</li>
<li>Request priorities might be less precise or lost entirely.</li>
<li>There's a slight increase in the initial latency. I've typically measured 0.6ms per request when the site is served over localhost, but it might be different over the internet.</li>
</ul>

<h1>
  
  
  #13: The Cache API Doesn't Support Range Requests
</h1>

<p>This combined with #12 makes offline streaming of video and audio an interesting challenge I haven't attempted yet. For now, in Versioned Worker I've just decided to treat range requests as full requests if it's in the cache list. But partial content responses can be saved if you chunk them up yourself and either store them in IndexedDB or as a virtual route (like <code>/__prefix-that-doesnt-clash__/video/1/2</code>) in CacheStorage.</p>

<p>If case you're wondering, you just get an error if the response status is 206 (partial content).</p>

<h1>
  
  
  #14: Cache Carefully
</h1>

<p>When caching resources, it's important you think about how you'll update them. While you can't accidentally stop yourself from updating your service worker, you don't want to be fighting it while you're releasing a critical fix. I use a slightly unconventional approach in Versioned Worker of generating files that tell the service worker what's changed, so I can't comment too much on the matter, but think about your durations and the effects of them.</p>

<p>Also, be careful when storing responses that were from the browser's HTTP cache, as they might be outdated already (but not necessarily stale yet). If you need to ensure a response is up-to-date, fetch it with the <code>mode</code> of <code>"no-cache"</code> to check the cache with the server or <code>"no-store"</code> to ignore the cache entirely.</p>






<p>Phew, that's everything. Hopefully you found this useful. Let me know in the comments if you've got any questions. üëã</p>

 </details> 
 <hr /> 

 #### - [XSS Attack - Why strip_tags is not enough](https://dev.to/rodrigojavornik/xss-attack-why-striptags-is-not-enough-5gmo) 
 <details><summary>Article</summary> <p>In PHP, it is common to use the <code>strip_tags()</code> function as a way to prevent XSS intrusion. However, this function does not even work to mitigate this type of attack, giving a false sense of security. But why?</p>

<h2>
  
  
  What is XSS?
</h2>

<p>XSS (Cross-Site Scripting) is a form of attack that occurs when an attacker exploits a vulnerability in a web application to insert malicious scripts into its pages. These scripts are executed in the browsers of the application's users and can compromise sensitive information, allow session theft, redirect to other sites, etc.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s---Cb68CjW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/feo4fipn297d3w3yq0yj.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s---Cb68CjW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/feo4fipn297d3w3yq0yj.png" alt="how xss attack works" width="800" height="460"></a></p>

<h2>
  
  
  Why strip_tags don't work?
</h2>

<p>The <code>strip_tags()</code> function is commonly used to remove HTML and PHP tags from a string. However, it is not designed to handle all forms of malicious input that can lead to XSS (Cross-Site Scripting) attacks. </p>

<p>Here are some reasons why <code>strip_tags()</code> falls short in mitigating XSS attacks:</p>

<ol>
<li>
<strong>Attribute-based attacks:</strong> XSS attacks can occur through attributes such as onmouseover or onclick, which can execute JavaScript code when triggered. <code>strip_tags()</code> does not remove or sanitize these attributes, allowing potential XSS vulnerabilities to remain.</li>
<li>
<strong>Tag obfuscation:</strong> Attackers can obfuscate the HTML tags and their attributes to bypass <code>strip_tags()</code>. They can use techniques such as mixing case variations, HTML entity encoding, or JavaScript-based obfuscation. <code>strip_tags()</code> alone cannot effectively handle these obfuscated tags.</li>
<li>
<strong>Context-awareness:</strong> XSS vulnerabilities can vary depending on the context in which the user input is displayed. <code>strip_tags()</code> does not have knowledge of the specific context and may allow certain tags or attributes that can still lead to XSS attacks.</li>
</ol>

<p>An example of malicious string that can be used in an XSS attack is as follows:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>this is a XSS attack &lt;script&gt;alert(‚Äúhello world‚Äù)&lt;script&gt;
</code></pre>

</div>


<p>If we apply the <code>strip_tags()</code> function, we obtain the following result:<br>
</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>this is a XSS attack alert(‚Äúhello world‚Äù)
</code></pre>

</div>


<p>Okay, in this case, it was indeed possible to clean the malicious code from the string. However, the attacker can use the following code:<br>
</p>
<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>this is a XSS attack &amp;lt;script&amp;gt; alert('oi') &amp;lt;/script&amp;gt;
</code></pre>

</div>


<p>The <code>strip_tags()</code> function will not sanitize the string in a way that prevents the injection of code into the page.</p>
<h2>
  
  
  How to prevent it?
</h2>

<p>The good way to deal with untrusted data is:</p>

<blockquote>
<p>Filter on input, escape on output</p>
</blockquote>

<p>This means that you handle the received data (filter), but only transform it (escape or encode) when you send it as output to another system that requires encoding.</p>

<p>There is no way around it. In the data sanitization phase, the only way to effectively prevent XSS attacks is by using a specific library, such as:</p>

<ul>
<li><a href="https://github.com/voku/anti-xss">AntiXSS</a></li>
<li><a href="http://htmlpurifier.org/">HTML Purifier</a></li>
</ul>

<p>These libraries provide robust mechanisms for preventing XSS attacks by sanitizing and properly handling user input and output.</p>

<p>Here, we are going to use the AntiXSS library.<br>
Now we can sanitize our strings in a much safer way:<br>
</p>
<div class="highlight js-code-highlight">
<pre class="highlight php"><code><span class="cp">&lt;?php</span>

<span class="kn">use</span> <span class="nc">voku\helper\AntiXSS</span><span class="p">;</span>

<span class="k">require_once</span> <span class="k">__DIR__</span> <span class="mf">.</span> <span class="s1">'/vendor/autoload.php'</span><span class="p">;</span>

<span class="nv">$antiXss</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AntiXSS</span><span class="p">();</span>
<span class="nv">$xssString</span> <span class="o">=</span> <span class="s2">"this is a XSS attack &amp;lt;script&amp;gt; alert('oi') &amp;lt;/script&amp;gt;"</span><span class="p">;</span>
<span class="nv">$clearString</span> <span class="o">=</span> <span class="nv">$antiXss</span><span class="o">-&gt;</span><span class="nf">xss_clean</span><span class="p">(</span><span class="nv">$xssString</span><span class="p">);</span>

<span class="c1">//this is a XSS attack</span>
<span class="k">echo</span> <span class="nv">$clearString</span><span class="p">;</span>
</code></pre>

</div>


<p>In the phase of outputting data, you can use template engines like <a href="https://twig.symfony.com">Twig</a> or <a href="https://laravel.com/docs/10.x/blade">Blade</a> or <a href="https://www.php.net/manual/en/function.htmlspecialchars.php">htmlspecialchars</a> function.</p>

<p>Great! Now we have a good way to sanitize XSS.</p>

<p>It's worth mentioning that sanitization is just one of the steps in preventing XSS. But that is a topic for another text...</p>


<h3>
  
  
  Do you like data sanitization? Then take a look at my PHP data sanitization library!
</h3>


<div class="ltag-github-readme-tag">
  <div class="readme-overview">
    <h2>
      <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--A9-wwsHG--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev.to/assets/github-logo-5a155e1f9a670af7944dd5e12375bc76ed542ea80224905ecaf878b9157cdefc.svg" alt="GitHub logo">
      <a href="https://github.com/rodrigojavornik">
        rodrigojavornik
      </a> / <a href="https://github.com/rodrigojavornik/PHPCleanup">
        PHPCleanup
      </a>
    </h2>
    <h3>
      A PHP Sanitation Library
    </h3>
  </div>
  <div class="ltag-github-body">
    
<div id="readme" class="md">
<h1>
PHP Cleanup</h1>
<h4>
A powerful sanitization library for PHP and Laravel. No dependencies</h4>
<h2>
Installation</h2>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto js-code-highlight">
<pre>composer require rodrigojavornik/php-cleanup</pre>

</div>
<h2>
Usage</h2>
<div class="highlight highlight-text-html-php notranslate position-relative overflow-auto js-code-highlight">
<pre><span class="pl-k">use</span> <span class="pl-v">PHPCleanup</span>\<span class="pl-v">Sanitize</span>
<span class="pl-v">Sanitize</span>::<span class="pl-en">input</span>()-&gt;<span class="pl-en">sanitize</span>(<span class="pl-s">' &lt;h1&gt;Hello World&lt;/h1&gt; '</span>);<span class="pl-c">//Hello World</span>
<span class="pl-v">Sanitize</span>::<span class="pl-en">trim</span>()-&gt;<span class="pl-en">captalize</span>()-&gt;<span class="pl-en">sanitize</span>(<span class="pl-s">' string    '</span>);<span class="pl-c">//String</span>
<span class="pl-v">Sanitize</span>::<span class="pl-en">trim</span>()-&gt;<span class="pl-en">lowercase</span>()-&gt;<span class="pl-en">sanitize</span>(<span class="pl-s">' MY name IS    '</span>);<span class="pl-c">//my name is</span>
<span class="pl-v">Sanitize</span>::<span class="pl-en">onlyNumbers</span>()-&gt;<span class="pl-en">sanitize</span>(<span class="pl-s">' abc1234'</span>);<span class="pl-c">//1234</span></pre>

</div>
<h2>
Available filters</h2>
<ul>
<li>
<a href="https://github.com/rodrigojavornik/PHPCleanup#captalize">captalize</a>: Capitalize a string;</li>
<li>
<a href="https://github.com/rodrigojavornik/PHPCleanup#captalizeall">captalizeAll</a>: Capitalize all string;</li>
<li>
<a href="https://github.com/rodrigojavornik/PHPCleanup#datetime">dateTime</a>: Transform a string in DateTime object;</li>
<li>
<a href="https://github.com/rodrigojavornik/PHPCleanup#email">email</a>: Removes all characters not allowed in an email address;</li>
<li>
<a href="https://github.com/rodrigojavornik/PHPCleanup#escape">escape</a>: Applies htmlspecialchars to value;</li>
<li>
<a href="https://github.com/rodrigojavornik/PHPCleanup#formatnumber">formatNumber</a>: Format a number with grouped thousands;</li>
<li>
<a href="https://github.com/rodrigojavornik/PHPCleanup#input">input</a>: Strip one whitespace from the beginning and end of a string and remove any HTML and PHP tags;</li>
<li>
<a href="https://github.com/rodrigojavornik/PHPCleanup#keys">keys</a>:  applies sanitaze to elements of an array;</li>
<li>
<a href="https://github.com/rodrigojavornik/PHPCleanup#lowercase">lowercase</a>‚Ä¶</li>
</ul>
</div>
  </div>
  <div class="gh-btn-container"><a class="gh-btn" href="https://github.com/rodrigojavornik/PHPCleanup">View on GitHub</a></div>
</div>



 </details> 
 <hr /> 
<!-- BLOG-POST-LIST:END -->
</table>
</details>


<!-- TODO
Change the 3stats boxes around, possibly two on top and one on bottom
Fix RSSfeed
Fix Spotify Playlists
Fix Socials [Portfolio, Discord, Linkedin]
In the future, add Public Repositories of Selected Projects
-->
