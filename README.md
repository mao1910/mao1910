<!-- VISITOR BADGE -->
<!-- https://github.com/hehuapei/visitor-badge -->

<img align="right" src="https://visitor-badge.laobi.icu/badge?page_id=mao1910.mao1910&left_color=%2379DAF9&right_color=%23FE6E96" />


<!-- TYPING SVG -->
<!-- https://github.com/DenverCoder1/readme-typing-svg -->

<h1 align="center">
    <img src="https://readme-typing-svg.herokuapp.com/?font=Righteous&size=35&center=true&vCenter=true&width=500&height=70&color=FE6E96&font=poppins&duration=5000&lines=Hi+There!+üëã;+I'm+Mao!;" />
</h1>

<br/>

<!-- CODE/TERMINAL ABOUT ME -->
<h1 align="center">
<img src="./assets/terminal-5.gif" alt="Terminal" />
</h1>

<br/><br/><br/>


<!-- TECHNOLOGIES LOGOS -->
<!-- https://github.com/tandpfun/skill-icons -->

<h2 align="center">üíª Languages / Frameworks / Tools ‚öíÔ∏è</h2>
<div align="center">
    <img src="https://skillicons.dev/icons?i=javascript,typescript,angular,react,html,css,scss,bootstrap,cs,java,spring" />
    <img src="https://skillicons.dev/icons?i=flutter,firebase,supabase,mysql,git,github,gitlab,vscode,idea,maven,figma" />
</div>

<br/><br/><br/>


<!-- CONTRIBUTIONS SNAKE GAME -->
<!-- https://github.com/Platane/snk -->

<div align="center">
  <h2> My Contributionssssüêç </h2>
  <br>
  <img alt="contributions-eating Snake" src="https://raw.githubusercontent.com/mao1910/mao1910/output/github-contribution-grid-snake.svg" />

  <!-- Four lines below suggested by Planate for Dark mode-->
  <picture>
  <source media="(prefers-color-scheme: dark)" srcset="github-snake-dark.svg" />
  <source media="(prefers-color-scheme: light)" srcset="github-snake.svg" />
  </picture>
  
  <br/><br/><br/>
</div>


<!-- GITHUB STATS -->
<!-- https://github.com/DenverCoder1/github-readme-streak-stats -->
<!-- https://github.com/anuraghazra/github-readme-stats -->
<!-- https://github-readme-stats-mao1910.vercel.app/ My own Vercel deployment-->

<h2 align="center"> Statsüìù </h2>
  <br>
<div align=center>
  <img width=429 src="https://github-readme-stats-mao1910.vercel.app/api?username=mao1910&count_private=true&show_icons=true&theme=dracula&rank_icon=github&hide=contribs&border_radius=10&border_color=79DAF9" alt="github stats"/>
  <img width=396 src="https://streak-stats.demolab.com/?user=mao1910&count_private=true&theme=dracula&currStreakNum=79DAF9&currStreakLabel=FE6E96&border_radius=10&border=79DAF9" alt="streak stats"/>
  <br/>
  <img src="https://github-readme-stats-mao1910.vercel.app/api/top-langs/?username=mao1910&layout=compact&theme=dracula&border_radius=10&size_weight=0.5&count_weight=0.5&border_color=79DAF9" alt="languages stats" />
</div>

<br/><br/><br/>


<!-- FOOTER -->
<!-- https://github.com/DenverCoder1/readme-typing-svg -->
<!-- https://readme-typing-svg.demolab.com/demo/ -->

<a href="https://git.io/typing-svg"><img src="https://readme-typing-svg.demolab.com?font=Poppins&pause=1000&color=FE6E96&width=535&lines=Thanks+for+dropping+by!;Feel+free+to+check+any+of+the+Socials+below+%F0%9F%91%87;Or+the+Joke+Of+The+Day+if+you're+down+for+a+giggle+%F0%9F%98%9D;Hope+to+see+you+again+%F0%9F%91%8A;Uh%3F+You're+still+here%3F;Well...+I'm+running+out+of+things+to+say...;Tell+you+what%2C+due+to+your+effort+and+perseverance%2C;I+shall+present+you+with+a+short+poem%3A;%22To+code%2C+or+not+to+code%2C+that+is+the+question%3A;Whether+'tis+nobler+in+the+IDE+to+debug;The+errors+and+issues+of+outrageous+software%2C;Or+to+take+up+the+keyboard+against+a+sea+of+bugs;And+by+coding%2C+end+them.%22;by+William+Shakespeare%2C+probably.+;Pretty+sure+that's+Hamlet's.;Alrighty%2C+this+has+been+fun.;But+I'll+restart+the+loop+now...+see+ya+soon!" alt="Typing SVG" /></a>


<!--  SOCIAL NETWORKS -->
<!-- https://github.com/alexandresanlim/Badges4-README.md-Profile -->

  <div> 
    <a href="https://www.linkedin.com/" target="_blank"><img src="https://img.shields.io/badge/-LinkedIn-%230077B5?style=for-the-badge&logo=linkedin&logoColor=white" target="_blank"></a> <!-- ADD LINKEDIN PROFILE -->
    <a href = "https://www.google.com"><img src="https://img.shields.io/badge/Portfolio-4285F4?style=for-the-badge&logo=Google-chrome&logoColor=white" target="_blank"></a> <!-- ADD PORTFOLIO WEBSITE -->
    <a href="https://discord.gg" target="_blank"><img src="https://img.shields.io/badge/Discord-7289DA?style=for-the-badge&logo=discord&logoColor=white" target="_blank"></a> <!-- ADD DISCORD -->
    <a href = "mao1910dev@gmail.com"><img src="https://img.shields.io/badge/Gmail-D14836?style=for-the-badge&logo=gmail&logoColor=white" target="_blank"></a>
  </div>


<!-- SPOTIFY PLAYING-->
<!-- https://github.com/novatorem/novatorem -->
<!-- https://spotify-now-playing-novatorem-git-main-mao1910.vercel.app/ My own Vercel deployment-->

[<img width=438px src="https://spotify-now-playing-git-main-mao1910.vercel.app//api/spotify/?border_color=FE6E96" alt="Mao Spotify Now Playing" />](https://open.spotify.com/user/31542et242zglhf42ydrtqgvuvde)


<!-- JOKE OF THE DAY -->
<!-- https://github.com/ABSphreak/readme-jokes -->
<!-- https://readme-jokes-git-master-mao1910.vercel.app/ My own Vercel deployment-->

<details>
<summary>I've got a Joke for you. Wanna hear it? üôà</summary>

<br/>

 <tr>
 <td style="padding-top:4px"><img src = "https://readme-jokes-git-master-mao1910.vercel.app/api?&theme=dracula"></td>
 </tr>

</details>


<!-- RSS FEED -->
<!-- https://github.com/gautamkrishnar/blog-post-workflow -->

<details>
<summary>üìï &nbsp;RSS feed</summary>

<br/>

<!-- BLOG-POST-LIST:START -->
 #### - [Build an AI Meme Generator with OpenAI's function calls, Part 2: Cron Jobs ‚è∞‚òéÔ∏è](https://dev.to/wasp/build-an-ai-meme-generator-with-openais-function-calls-part-2-cron-jobs-54nm) 
 <details><summary>Article</summary> <ul>
<li>
TL;DR

<ul>
<li>Before We Begin</li>
</ul>


</li>
<li>
Part 2

<ul>
<li>
Fetching &amp; Updating Templates w/ Cron Jobs

<ul>
<li>Defining our Daily Cron Job</li>
<li>Testing</li>
</ul>


</li>
<li>
Editing Memes

<ul>
<li>Server-Side Code</li>
<li>Client-Side Code</li>
</ul>


</li>
<li>Deleting Memes</li>
<li>Conclusion</li>
</ul>
</li>
</ul>

<p></p>

<h1>
  
  
  TL;DR
</h1>

<p>In this two-part tutorial, we‚Äôre going to build a full-stack instant Meme Generator app using:</p>

<ul>
<li>React &amp; NodeJS w/ TypeScript</li>
<li>OpenAI‚Äôs <a href="https://platform.openai.com/docs/guides/gpt/function-calling">Function Calling API</a>
</li>
<li>ImgFlip.com‚Äôs <a href="https://imgflip.com/api">meme creator API</a>
</li>
</ul>

<p><iframe width="710" height="399" src="https://www.youtube.com/embed/4rTXljsphQ8">
</iframe>
</p>

<p>You can check out a deployed version of the app we‚Äôre going to build here: <a href="https://damemerator.netlify.app">The Memerator</a></p>

<p>If you just want to see the code for the finished app, check out the <a href="https://github.com/vincanger/memerator">Memerator‚Äôs GitHub Repo</a></p>

<p><a href="https://dev.to/wasp/build-your-own-ai-meme-generator-learn-how-to-use-openais-function-calls-1p21">In Part 1 of this tutorial</a> we built the instant meme generation functionality of the app.</p>

<p>In order to create a meme image using ImgFlip.com‚Äôs API, we had to send a request with:</p>

<ul>
<li>the meme template <code>id</code> we want to use</li>
<li>and the two text blocks that will accompany the meme, e.g. <code>text0</code> and <code>text1</code>
</li>
</ul>

<p>Rather than doing this manually, we used OpenAI‚Äôs API to ask GPT to generate the meme text boxes for us. </p>

<p>To do this, we used their <code>function calling</code> feature to describe the function that includes our ImgFlip API request. This made sure that OpenAI‚Äôs response would always contain two text arguments in JSON format so that we could pass them correctly to the <a href="http://ImgFlip.com">ImgFlip.com</a> API.</p>

<p>The result is that we could get our app to instantly generate meme Images for us by just submitting some topics! ü§Ø</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--rrsx2pW6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/cj3iwdmm2y4w3zxl9qbd.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--rrsx2pW6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/cj3iwdmm2y4w3zxl9qbd.png" alt="Image description" width="564" height="499"></a></p>

<p>Now, in Part 2 of this tutorial, we will:</p>

<ul>
<li>add a daily recurring cron job to fetch more meme templates</li>
<li>implement <code>edit</code> and <code>delete</code> meme functionality</li>
</ul>

<p>Oh, and if you get stuck / have any questions, feel free to hop into the <a href="https://discord.gg/rzdnErX">Wasp Discord Server</a> and ask us!</p>

<p>Now let‚Äôs go üöÄ</p>

<p></p>

<h2>
  
  
  Before We Begin
</h2>

<p>We‚Äôre working hard at <a href="https://wasp-lang.dev">Wasp</a> to help you build web apps as easily as possible ‚Äî including making these tutorials, which are released weekly!</p>

<p>We would be super grateful if you could help us out by starring our repo on GitHub: <a href="https://www.github.com/wasp-lang/wasp">https://www.github.com/wasp-lang/wasp</a> üôè</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--XGQQslmS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://media1.giphy.com/media/ZfK4cXKJTTay1Ava29/giphy.gif%3Fcid%3D7941fdc6pmqo30ll0e4rzdiisbtagx97sx5t0znx4lk0auju%26ep%3Dv1_gifs_search%26rid%3Dgiphy.gif%26ct%3Dg" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--XGQQslmS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://media1.giphy.com/media/ZfK4cXKJTTay1Ava29/giphy.gif%3Fcid%3D7941fdc6pmqo30ll0e4rzdiisbtagx97sx5t0znx4lk0auju%26ep%3Dv1_gifs_search%26rid%3Dgiphy.gif%26ct%3Dg" alt="https://media1.giphy.com/media/ZfK4cXKJTTay1Ava29/giphy.gif?cid=7941fdc6pmqo30ll0e4rzdiisbtagx97sx5t0znx4lk0auju&amp;ep=v1_gifs_search&amp;rid=giphy.gif&amp;ct=g" width="480" height="400"></a></p>

<p><a href="https://www.github.com/wasp-lang/wasp" class="ltag_cta ltag_cta--branded">‚≠êÔ∏è Thanks For Your Support üôè</a>
</p>

<p></p>

<h1>
  
  
  Part 2.
</h1>

<p>So we‚Äôve got ourselves a really good basis for an app at this point.</p>

<p>We‚Äôre using <a href="https://platform.openai.com/docs/guides/gpt/function-calling">OpenAI‚Äôs function calling feature</a> to explain a function to GPT, and get it to return results for us in a format we can use to call that function.</p>

<p>This allows us to be certain GPT‚Äôs result will be usable in further parts of our application and opens up the door to creating AI agents.</p>

<p>If you think about it, we‚Äôve basically got ourselves a really simple Meme generating ‚Äúagent‚Äù. How cool is that?!</p>

<p></p>

<h2>
  
  
  Fetching &amp; Updating Templates with Cron Jobs
</h2>

<p>To be able to generate our meme images via <a href="https://imgflip.com/api">ImgFlip‚Äôs API</a>, we have to choose and send a meme template <code>id</code> to the API, along with the text arguments we want to fill it in with.</p>

<p>For example, the <code>Grandma Finds Internet</code> meme template has the following <code>id</code>:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--1dk6LR8e--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zoo4uainls9jxq7fzysv.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--1dk6LR8e--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zoo4uainls9jxq7fzysv.png" alt="Image description" width="800" height="254"></a></p>

<p>But the only way for us to get available meme templates from ImgFlip is to send a <code>GET</code> request to<br>
<a href="https://api.imgflip.com/get_memes">https://api.imgflip.com/get_memes</a>. And according to ImgFlip, the <strong>/get-memes</strong> endpoint works like this:</p>

<blockquote>
<p>Gets an array of popular memes that may be captioned with this API. The size of this array and the order of memes may change at any time. When this description was written, it returned 100 memes ordered by how many times they were captioned in the last 30 days</p>
</blockquote>

<p>So it returns a list of the top 100 memes from the last 30 days. And as this is always changing, we can run a daily cron job to fetch the list and update our database with any new templates that don‚Äôt already exist in it.</p>

<p>We know this will work because the ImgFlip docs for the <strong>/caption-image</strong> endpoint ‚Äî which we use to create a meme image ‚Äî says this:</p>

<blockquote>
<p><em>key:</em> template_id<br>
<em>value:</em> A template ID as returned by the <strong>get_memes</strong> response. Any ID that was ever returned from the <strong>get_memes</strong> response should work for this parameter‚Ä¶</p>
</blockquote>

<p>Awesome!</p>

<p></p>
<h3>
  
  
  Defining our Daily Cron Job
</h3>

<p>Now, to create an automatically <a href="https://wasp-lang.dev/docs/advanced/jobs">recurring cron job in Wasp</a> is really easy. </p>

<p>First, go to your <code>main.wasp</code> file and add:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="nx">job</span> <span class="nx">storeMemeTemplates</span> <span class="p">{</span>
  <span class="nl">executor</span><span class="p">:</span> <span class="nx">PgBoss</span><span class="p">,</span>
  <span class="nx">perform</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">fn</span><span class="p">:</span> <span class="k">import</span> <span class="p">{</span> <span class="nx">fetchAndStoreMemeTemplates</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@server/workers.js</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="nx">schedule</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">// daily at 7 a.m.</span>
    <span class="nl">cron</span><span class="p">:</span> <span class="dl">"</span><span class="s2">0 7 * * *</span><span class="dl">"</span> 
  <span class="p">},</span>
  <span class="nx">entities</span><span class="p">:</span> <span class="p">[</span><span class="nx">Template</span><span class="p">],</span>
<span class="p">}</span>
</code></pre>

</div>



<p>This is telling Wasp to run the <code>fetchAndStoreMemeTemplates</code> function every day at 7 a.m.</p>

<p>Next, create a new file in <code>src/server</code> called <code>workers.ts</code> and add the function:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="nx">axios</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">fetchAndStoreMemeTemplates</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">_args</span><span class="p">:</span> <span class="kr">any</span><span class="p">,</span> <span class="nx">context</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">.... &gt;&lt;&gt;&lt;&gt;&lt; get meme templates cron starting &gt;&lt;&gt;&lt;&gt;&lt; ....</span><span class="dl">'</span><span class="p">);</span>

  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://api.imgflip.com/get_memes</span><span class="dl">'</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nx">promises</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">memes</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="na">meme</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">context</span><span class="p">.</span><span class="nx">entities</span><span class="p">.</span><span class="nx">Template</span><span class="p">.</span><span class="nx">upsert</span><span class="p">({</span>
        <span class="na">where</span><span class="p">:</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">meme</span><span class="p">.</span><span class="nx">id</span> <span class="p">},</span>
        <span class="na">create</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">id</span><span class="p">:</span> <span class="nx">meme</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
          <span class="na">name</span><span class="p">:</span> <span class="nx">meme</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
          <span class="na">url</span><span class="p">:</span> <span class="nx">meme</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span>
          <span class="na">width</span><span class="p">:</span> <span class="nx">meme</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
          <span class="na">height</span><span class="p">:</span> <span class="nx">meme</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span>
          <span class="na">boxCount</span><span class="p">:</span> <span class="nx">meme</span><span class="p">.</span><span class="nx">box_count</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="na">update</span><span class="p">:</span> <span class="p">{},</span>
      <span class="p">});</span>
    <span class="p">});</span>

    <span class="k">await</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">promises</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">error fetching meme templates: </span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre>

</div>



<p>You can see that we send a <code>GET</code> request to the proper endpoint, then we loop through the array of memes it returns to us add any new templates to the database.</p>

<p>Notice that we use Prisma‚Äôs <code>upsert</code> method here. This allows us to create a new entity in the database if it doesn‚Äôt already exist. If it does, we don‚Äôt do anything, which is why <code>update</code> is left blank.</p>

<p>We use <code>[Promise.all()</code> to call that array of promises](<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all</a>) correctly.</p>

<p></p>

<h3>
  
  
  Testing
</h3>

<p>Now, assuming you‚Äôve got your app running with <code>wasp start</code>, you will see the cron job run in the console every day at 7 a.m.</p>

<p>If you want to test that the cron job is working correctly, you could run it on a faster schedule. Let‚Äôs try that now by changing it in our <code>main.wasp</code> file to run every minute:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="c1">//...</span>
  <span class="nx">schedule</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">// runs every minute.</span>
    <span class="nl">cron</span><span class="p">:</span> <span class="dl">"</span><span class="s2">* * * * *</span><span class="dl">"</span> 
  <span class="p">},</span>
</code></pre>

</div>



<p>First, your terminal where you ran <code>wasp start</code> to start your app should output the following:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="o">[</span>Server]  üîç Validating environment variables...
<span class="o">[</span>Server]  üöÄ <span class="s2">"Username and password"</span> auth initialized
<span class="o">[</span>Server]  Starting pg-boss...
<span class="o">[</span>Server]  pg-boss started!
<span class="o">[</span>Server]  Server listening on port 3001
</code></pre>

</div>



<p>‚Ä¶followed shortly after by:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="o">[</span>Server]  .... <span class="o">&gt;</span>&lt;<span class="o">&gt;</span>&lt;<span class="o">&gt;</span>&lt; get meme templates cron starting <span class="o">&gt;</span>&lt;<span class="o">&gt;</span>&lt;<span class="o">&gt;</span>&lt; ....
</code></pre>

</div>



<p>Great. We‚Äôve got an automatically recurring cron job going.</p>

<p>You can check your database for saved templates by opening another terminal window and running:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code>wasp db studio 
</code></pre>

</div>



<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--FBVxTeCV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/yldqge5186hegvzjyo30.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--FBVxTeCV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/yldqge5186hegvzjyo30.png" alt="Image description" width="631" height="344"></a></p>

<p></p>

<h2>
  
  
  Editing Memes
</h2>

<p>Unfortunately, sometimes GPT‚Äôs results have some mistakes. Or sometimes the idea is really good, but we want to further modify it to make it even better.</p>

<p>Well, that‚Äôs pretty simple for us to do since we can just make another call to <a href="https://imgflip.com/api">ImgFlip‚Äôs API</a>.</p>

<p>So let‚Äôs set do that by setting up a dedicated page where we:</p>

<ul>
<li>fetch that specific meme based on its <code>id</code>
</li>
<li>display a form to allow the user to edit the meme <code>text</code>
</li>
<li>send that info to a server-side Action which calls the ImgFlip API, generates a new image URL, and updates our <code>Meme</code> entity in the DB.</li>
</ul>

<p></p>

<h3>
  
  
  Server-Side Code
</h3>

<p>To make sure we can fetch the individual meme we want to edit, we first need to set up a Query that does this.</p>

<p>Go to your <code>main.wasp</code> file and add this Query declaration:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="nx">query</span> <span class="nx">getMeme</span> <span class="p">{</span>
  <span class="nl">fn</span><span class="p">:</span> <span class="k">import</span> <span class="p">{</span> <span class="nx">getMeme</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@server/queries.js</span><span class="dl">"</span><span class="p">,</span>
  <span class="nx">entities</span><span class="p">:</span> <span class="p">[</span><span class="nx">Meme</span><span class="p">]</span>
<span class="p">}</span>
</code></pre>

</div>



<p>Now go to <code>src/server/queries.ts</code> and add the following function:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="kd">type</span> <span class="p">{</span> <span class="nx">Meme</span><span class="p">,</span> <span class="nx">Template</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@wasp/entities</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="kd">type</span> <span class="p">{</span> <span class="nx">GetAllMemes</span><span class="p">,</span> <span class="nx">GetMeme</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@wasp/queries/types</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">type</span> <span class="nx">GetMemeArgs</span> <span class="o">=</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="kr">string</span> <span class="p">};</span>
<span class="kd">type</span> <span class="nx">GetMemeResult</span> <span class="o">=</span> <span class="nx">Meme</span> <span class="o">&amp;</span> <span class="p">{</span> <span class="na">template</span><span class="p">:</span> <span class="nx">Template</span> <span class="p">};</span>

<span class="c1">//...</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">getMeme</span><span class="p">:</span> <span class="nx">GetMeme</span><span class="o">&lt;</span><span class="nx">GetMemeArgs</span><span class="p">,</span> <span class="nx">GetMemeResult</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">id</span> <span class="p">},</span> <span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">context</span><span class="p">.</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nx">HttpError</span><span class="p">(</span><span class="mi">401</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">const</span> <span class="nx">meme</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">context</span><span class="p">.</span><span class="nx">entities</span><span class="p">.</span><span class="nx">Meme</span><span class="p">.</span><span class="nx">findUniqueOrThrow</span><span class="p">({</span>
    <span class="na">where</span><span class="p">:</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">id</span> <span class="p">},</span>
    <span class="na">include</span><span class="p">:</span> <span class="p">{</span> <span class="na">template</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="nx">meme</span><span class="p">;</span>
<span class="p">};</span>
</code></pre>

</div>



<p>We‚Äôre just fetching the single meme based on its <code>id</code> from the database.</p>

<p>We‚Äôre also including the related meme <code>Template</code> so that we have access to its <code>id</code> as well, because we need to send this to the ImgFlip API too.</p>

<p>Pretty simple!</p>

<p>Now let‚Äôs create our <code>editMeme</code> action by going to our <code>main.wasp</code> file and adding the following Action:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="c1">//...</span>

<span class="nx">action</span> <span class="nx">editMeme</span> <span class="p">{</span>
  <span class="nl">fn</span><span class="p">:</span> <span class="k">import</span> <span class="p">{</span> <span class="nx">editMeme</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@server/actions.js</span><span class="dl">"</span><span class="p">,</span>
  <span class="nx">entities</span><span class="p">:</span> <span class="p">[</span><span class="nx">Meme</span><span class="p">,</span> <span class="nx">Template</span><span class="p">,</span> <span class="nx">User</span><span class="p">]</span>
<span class="p">}</span>
</code></pre>

</div>



<p>Next, move over to the <code>server/actions.ts</code> file and let‚Äôs add the following server-side function:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="c1">//... other imports</span>
<span class="k">import</span> <span class="kd">type</span> <span class="p">{</span> <span class="nx">EditMeme</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@wasp/actions/types</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">//... other types</span>
<span class="kd">type</span> <span class="nx">EditMemeArgs</span> <span class="o">=</span> <span class="nb">Pick</span><span class="o">&lt;</span><span class="nx">Meme</span><span class="p">,</span> <span class="dl">'</span><span class="s1">id</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">text0</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">text1</span><span class="dl">'</span><span class="o">&gt;</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">editMeme</span><span class="p">:</span> <span class="nx">EditMeme</span><span class="o">&lt;</span><span class="nx">EditMemeArgs</span><span class="p">,</span> <span class="nx">Meme</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">text0</span><span class="p">,</span> <span class="nx">text1</span> <span class="p">},</span> <span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">context</span><span class="p">.</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nx">HttpError</span><span class="p">(</span><span class="mi">401</span><span class="p">,</span> <span class="dl">'</span><span class="s1">You must be logged in</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">const</span> <span class="nx">meme</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">context</span><span class="p">.</span><span class="nx">entities</span><span class="p">.</span><span class="nx">Meme</span><span class="p">.</span><span class="nx">findUniqueOrThrow</span><span class="p">({</span>
    <span class="na">where</span><span class="p">:</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">id</span> <span class="p">},</span>
    <span class="na">include</span><span class="p">:</span> <span class="p">{</span> <span class="na">template</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
  <span class="p">});</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">context</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">isAdmin</span> <span class="o">&amp;&amp;</span> <span class="nx">meme</span><span class="p">.</span><span class="nx">userId</span> <span class="o">!==</span> <span class="nx">context</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nx">HttpError</span><span class="p">(</span><span class="mi">403</span><span class="p">,</span> <span class="dl">'</span><span class="s1">You are not the creator of this meme</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">const</span> <span class="nx">memeUrl</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">generateMemeImage</span><span class="p">({</span>
    <span class="na">templateId</span><span class="p">:</span> <span class="nx">meme</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
    <span class="na">text0</span><span class="p">:</span> <span class="nx">text0</span><span class="p">,</span>
    <span class="na">text1</span><span class="p">:</span> <span class="nx">text1</span><span class="p">,</span>
  <span class="p">});</span>

  <span class="kd">const</span> <span class="nx">newMeme</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">context</span><span class="p">.</span><span class="nx">entities</span><span class="p">.</span><span class="nx">Meme</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span>
    <span class="na">where</span><span class="p">:</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">id</span> <span class="p">},</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">text0</span><span class="p">:</span> <span class="nx">text0</span><span class="p">,</span>
      <span class="na">text1</span><span class="p">:</span> <span class="nx">text1</span><span class="p">,</span>
      <span class="na">url</span><span class="p">:</span> <span class="nx">memeUrl</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="nx">newMeme</span><span class="p">;</span>
<span class="p">};</span>
</code></pre>

</div>



<p>As you can see, this function expects the <code>id</code> of the already existing meme, along with the new <code>text</code> boxes. That‚Äôs because we‚Äôre letting the user manually input/edit the text that GPT generated, rather than making another request the the OpenAI API.</p>

<p>Next, we look for that specific meme in our database, and if we don‚Äôt find it we throw an error (<code>findUniqueOrThrow</code>).</p>

<p>We check to make sure that that meme belongs to the user that is currently making the request, because we don‚Äôt want a different user to edit a meme that doesn‚Äôt belong to them.</p>

<p>Then we send the template <code>id</code> of that meme along with the new text to our previously created <code>generateMemeImage</code> function. This function calls the ImgFlip API and returns the url of the newly created meme image.</p>

<p>We then <code>update</code> the database to save the new URL to our Meme.</p>

<p>Awesome!</p>

<p></p>

<h3>
  
  
  Client-Side Code
</h3>

<p>Let‚Äôs start by adding a new route and page to our <code>main.wasp</code> file:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="c1">//...</span>

<span class="nx">route</span> <span class="nx">EditMemeRoute</span> <span class="p">{</span> <span class="nl">path</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/meme/:id</span><span class="dl">"</span><span class="p">,</span> <span class="nx">to</span><span class="p">:</span> <span class="nx">EditMemePage</span> <span class="p">}</span>
<span class="nx">page</span> <span class="nx">EditMemePage</span> <span class="p">{</span>
  <span class="nl">component</span><span class="p">:</span> <span class="k">import</span> <span class="p">{</span> <span class="nx">EditMemePage</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@client/pages/EditMemePage</span><span class="dl">"</span><span class="p">,</span>
  <span class="nx">authRequired</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</code></pre>

</div>



<p>There are two important things to notice:</p>

<ol>
<li>the path includes the <code>:id</code> parameter, which means we can access page for any meme in our database by going to, e.g. <code>memerator.com/meme/5</code>
</li>
<li>by using the <code>authRequired</code> option, we tell Wasp to automatically block this page from unauthorized users. Nice!</li>
</ol>

<p>Now, create this page by adding a new file called <code>EditMemePage.tsx</code> to <code>src/client/pages</code>. Add the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">FormEventHandler</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useQuery</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@wasp/queries</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">editMeme</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@wasp/actions/editMeme</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">getMeme</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@wasp/queries/getMeme</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useParams</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-router-dom</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AiOutlineEdit</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-icons/ai</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">function</span> <span class="nx">EditMemePage</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// http://localhost:3000/meme/573f283c-24e2-4c45-b6b9-543d0b7cc0c7</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">id</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useParams</span><span class="o">&lt;</span><span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="kr">string</span> <span class="p">}</span><span class="o">&gt;</span><span class="p">();</span>

  <span class="kd">const</span> <span class="p">[</span><span class="nx">text0</span><span class="p">,</span> <span class="nx">setText0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">text1</span><span class="p">,</span> <span class="nx">setText1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">isLoading</span><span class="p">,</span> <span class="nx">setIsLoading</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

  <span class="kd">const</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="nx">meme</span><span class="p">,</span> <span class="na">isLoading</span><span class="p">:</span> <span class="nx">isMemeLoading</span><span class="p">,</span> <span class="na">error</span><span class="p">:</span> <span class="nx">memeError</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">(</span><span class="nx">getMeme</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">id</span> <span class="p">});</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">meme</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setText0</span><span class="p">(</span><span class="nx">meme</span><span class="p">.</span><span class="nx">text0</span><span class="p">);</span>
      <span class="nx">setText1</span><span class="p">(</span><span class="nx">meme</span><span class="p">.</span><span class="nx">text1</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">meme</span><span class="p">]);</span>

  <span class="kd">const</span> <span class="nx">handleSubmit</span><span class="p">:</span> <span class="nx">FormEventHandler</span><span class="o">&lt;</span><span class="nx">HTMLFormElement</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="k">await</span> <span class="nx">editMeme</span><span class="p">({</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">text0</span><span class="p">,</span> <span class="nx">text1</span> <span class="p">});</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="na">error</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error generating meme: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
      <span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">isMemeLoading</span><span class="p">)</span> <span class="k">return</span> <span class="dl">'</span><span class="s1">Loading...</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">memeError</span><span class="p">)</span> <span class="k">return</span> <span class="dl">'</span><span class="s1">Error: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">memeError</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">'p-4'</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="p">=</span><span class="s">'text-3xl font-bold mb-4'</span><span class="p">&gt;</span>Edit Meme<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">form</span> <span class="na">onSubmit</span><span class="p">=</span><span class="si">{</span><span class="nx">handleSubmit</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">'flex gap-2 items-end'</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">'mb-2'</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">htmlFor</span><span class="p">=</span><span class="s">'text0'</span> <span class="na">className</span><span class="p">=</span><span class="s">'block font-bold mb-2'</span><span class="p">&gt;</span>
              Text 0:
            <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">textarea</span>
              <span class="na">id</span><span class="p">=</span><span class="s">'text0'</span>
              <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="nx">text0</span><span class="si">}</span>
              <span class="na">onChange</span><span class="p">=</span><span class="si">{</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">setText0</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span><span class="si">}</span>
              <span class="na">className</span><span class="p">=</span><span class="s">'border rounded px-2 py-1'</span>
            <span class="p">/&gt;</span>
          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">'mb-2'</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">htmlFor</span><span class="p">=</span><span class="s">'text1'</span> <span class="na">className</span><span class="p">=</span><span class="s">'block font-bold mb-2'</span><span class="p">&gt;</span>
              Text 1:
            <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>

            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">'flex items-center mb-2'</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">textarea</span>
                <span class="na">id</span><span class="p">=</span><span class="s">'text1'</span>
                <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="nx">text1</span><span class="si">}</span>
                <span class="na">onChange</span><span class="p">=</span><span class="si">{</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">setText1</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span><span class="si">}</span>
                <span class="na">className</span><span class="p">=</span><span class="s">'border rounded px-2 py-1'</span>
              <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">button</span>
          <span class="na">type</span><span class="p">=</span><span class="s">'submit'</span>
          <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="s2">`flex items-center gap-1 bg-primary-200 hover:bg-primary-300 border-2 text-black text-sm py-1 px-2 rounded </span><span class="p">${</span>
            <span class="nx">isLoading</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">opacity-50 cursor-not-allowed</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">cursor-pointer</span><span class="dl">'</span>
          <span class="p">}</span><span class="s2"> $}`</span><span class="si">}</span>
        <span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nc">AiOutlineEdit</span> <span class="p">/&gt;</span>
          <span class="si">{</span><span class="o">!</span><span class="nx">isLoading</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">Save Meme</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Saving...</span><span class="dl">'</span><span class="si">}</span>
        <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
      <span class="si">{</span><span class="o">!!</span><span class="nx">meme</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">'mt-4  mb-2 bg-gray-100 rounded-lg p-4'</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="p">=</span><span class="si">{</span><span class="nx">meme</span><span class="p">.</span><span class="nx">url</span><span class="si">}</span> <span class="na">width</span><span class="p">=</span><span class="s">'500px'</span> <span class="p">/&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">'flex flex-col items-start mt-2'</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="p">=</span><span class="s">'text-sm text-gray-700'</span><span class="p">&gt;</span>Topics: <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="p">=</span><span class="s">'text-sm italic text-gray-500'</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">meme</span><span class="p">.</span><span class="nx">topics</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="p">=</span><span class="s">'text-sm text-gray-700'</span><span class="p">&gt;</span>Audience: <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="p">=</span><span class="s">'text-sm italic text-gray-500'</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">meme</span><span class="p">.</span><span class="nx">audience</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="p">=</span><span class="s">'text-sm text-gray-700'</span><span class="p">&gt;</span>ImgFlip Template: <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="p">=</span><span class="s">'text-sm italic text-gray-500'</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">meme</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">)</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre>

</div>



<p>Some things to notice here are:</p>

<ol>
<li>because we‚Äôre using dynamic routes (<code>/meme/:id</code>), we pull the URL paramater <code>id</code> from the url with <code>useParams</code> hook.</li>
<li>we then pass that <code>id</code> within the <code>getMemes</code> Query to fetch that specific meme to edit: <code>useQuery(getMeme, { id: id })</code>

<ol>
<li>remember, our server-side action depends on this <code>id</code> in order to fetch the meme from our database</li>
</ol>


</li>
</ol>

<p>The rest of the page is just our form for calling the <code>editMeme</code> Action, as well as displaying the meme we want to edit.</p>

<p>That‚Äôs great!</p>

<p>Now that we have that <code>EditMemePage</code>, we need a way to navigate to it from the home page.</p>

<p>To do that, go back to the <code>Home.tsx</code> file, add the following imports at the top, and find the comment that says <code>{/* TODO: implement edit and delete meme features */}</code> and replace it with the following code:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight tsx"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Link</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@wasp/router</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AiOutlineEdit</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-icons/ai</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">//...</span>

<span class="p">{</span><span class="nx">user</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">isAdmin</span> <span class="o">||</span> <span class="nx">user</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">memeIdea</span><span class="p">.</span><span class="nx">userId</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">'flex items-center mt-2'</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nc">Link</span> <span class="na">key</span><span class="p">=</span><span class="si">{</span><span class="nx">memeIdea</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span> <span class="na">params</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">memeIdea</span><span class="p">.</span><span class="nx">id</span> <span class="p">}</span><span class="si">}</span> <span class="na">to</span><span class="p">=</span><span class="si">{</span><span class="s2">`/meme/:id`</span><span class="si">}</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">className</span><span class="p">=</span><span class="s">'flex items-center gap-1 bg-primary-200 hover:bg-primary-300 border-2 text-black text-xs py-1 px-2 rounded'</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">AiOutlineEdit</span> <span class="p">/&gt;</span>
        Edit Meme
      <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Link</span><span class="p">&gt;</span>
    <span class="si">{</span><span class="cm">/* TODO: add delete meme functionality */</span><span class="si">}</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">)}</span>
</code></pre>

</div>



<p>What‚Äôs really cool about this, is that Wasp‚Äôs <code>Link</code> component will give you <a href="https://wasp-lang.dev/docs/advanced/links">type-safe routes</a>, by making sure you‚Äôre following the pattern you defined in your <code>main.wasp</code> file.</p>

<p>And with that, so long as the authenticated user was the creator of the meme (or is an admin), the <code>Edit Meme</code> button will show up and direct the user to the <code>EditMemePage</code></p>

<p>Give it a try now. It should look like this:</p>

<p><iframe width="710" height="399" src="https://www.youtube.com/embed/ymSr2eRXz9c">
</iframe>
</p>

<p></p>

<h2>
  
  
  Deleting Memes
</h2>

<p>Ok. When I initially started writing this tutorial, I thought I‚Äôd also explain how to add <code>delete</code> meme functionality to the app as well.</p>

<p>But seeing as we‚Äôve gotten this far, and as the entire two-part tutorial is pretty long, I figured you should be able to implement yourself by this point.</p>

<p>So I‚Äôll leave you guide as to how to implement it yourself. Think of it as a bit of homework:</p>

<ol>
<li>define the <code>deleteMeme</code> Action in your <code>main.wasp</code> file</li>
<li>export the async function from the <code>actions.ts</code> file</li>
<li>import the Action in your client-side code</li>
<li>create a button which takes the meme‚Äôs <code>id</code> as an argument in your <code>deleteMeme</code> Action.</li>
</ol>

<p>If you get stuck, you can use the <code>editMeme</code> section as a guide. Or you can check out the <a href="https://github.com/vincanger/memerator/">finished app‚Äôs GitHub repo</a> for the completed code!</p>

<p></p>

<h1>
  
  
  Conclusion
</h1>

<p>There you have it! Your own instant meme generator ü§ñüòÜ</p>

<p>BTW, If you found this useful,¬†<strong>please show us your support by¬†<a href="https://github.com/wasp-lang/wasp">giving us a star on GitHub</a></strong>! It will help us continue to make more stuff just like it. </p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s---pOWaxHX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://res.cloudinary.com/practicaldev/image/fetch/s--tnDxibZC--/c_limit%252Cf_auto%252Cfl_progressive%252Cq_66%252Cw_800/https://res.cloudinary.com/practicaldev/image/fetch/s--OCpry2p9--/c_limit%25252Cf_auto%25252Cfl_progressive%25252Cq_66%25252Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/bky8z46ii7ayejprrqw3.gif" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s---pOWaxHX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://res.cloudinary.com/practicaldev/image/fetch/s--tnDxibZC--/c_limit%252Cf_auto%252Cfl_progressive%252Cq_66%252Cw_800/https://res.cloudinary.com/practicaldev/image/fetch/s--OCpry2p9--/c_limit%25252Cf_auto%25252Cfl_progressive%25252Cq_66%25252Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/bky8z46ii7ayejprrqw3.gif" alt="https://res.cloudinary.com/practicaldev/image/fetch/s--tnDxibZC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_800/https://res.cloudinary.com/practicaldev/image/fetch/s--OCpry2p9--/c_limit%252Cf_auto%252Cfl_progressive%252Cq_66%252Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/bky8z46ii7ayejprrqw3.gif" width="" height=""></a></p>

<p><a href="https://www.github.com/wasp-lang/wasp" class="ltag_cta ltag_cta--branded">‚≠êÔ∏è Thanks For Your Support üôè</a>
</p>

 </details> 
 <hr /> 

 #### - [How to Learn Programming in 2023](https://dev.to/scofieldidehen/how-to-learn-programming-in-2023-2981) 
 <details><summary>Article</summary> <p>In today's digital age, the role of programmers is more important than ever. Programming skills are highly valued and sought after in almost every industry. There is a huge demand for developers with the right technical abilities, from tech startups to established corporations.</p>

<p>Whether considering changing careers or starting, now is an exciting time to become a programmer. With the right dedication and focus, anyone can gain the necessary expertise to succeed as a professional developer.</p>

<h4>What Does a Programmer Do?</h4>

<p>Computer programmers write, test, and maintain the code that allows software applications and programs to function.</p>

<p>They take designs and specifications provided by software developers and engineers and turn them into logical sequences of instructions that computers can follow. Some common tasks programmers perform include:</p>

<ul>
    <li>Writing code in various programming languages like Python, Java, C++, etc.</li>
    <li>Debugging, testing, and refining code until the program operates correctly</li>
    <li>Collaborating with software developers to get a clear understanding of what functionality is needed</li>
    <li>Developing algorithms and flowcharts to outline the program processes logically</li>
    <li>Updating and expanding existing programs as needed</li>
    <li>Evaluating code to ensure it is valid, efficient, and meets industry standards</li>
    <li>Documenting every process thoroughly for reference.</li>
</ul>

<p>Programmers are integral to software deployment, building customized applications for end users and companies. They bring ideas to life using lines of code and their technical capabilities.</p>

<h4>Top Skills Needed to Become a Programmer</h4>

<p>While some programming skills can be developed over time on the job, some vital abilities are required to start a programming career.</p>

<p>Here are some of the most important skills every aspiring programmer should focus on building:</p>

<p><strong>Logical Thinking:</strong> Programming requires strong logical thinking abilities. You need to be able to break down complex problems analytically into smaller components and define logical steps to solve them. Thinking logically will help you develop solutions and troubleshoot issues.</p>

<p><strong>Attention to Detail:</strong> Good programmers have meticulous attention to detail. You must be extremely careful about the syntax, the spelling of code components, punctuation usage, and more. Missing small details can cause major issues.</p>

<p><strong>Patience and Perseverance:</strong> Debugging code and fixing flaws requires patience and perseverance. Issues often take significant time and effort to resolve fully. You must be willing to work through problems slowly.</p>

<p><strong>Communication Skills:</strong> Programmers work closely with others like designers, product managers, and end users. Strong written and verbal communication skills help in collaborations and explaining your work.</p>

<p><strong>Problem Solving:</strong> Identifying issues quickly and offering solutions is critical. Programmers need excellent problem-solving to develop code that handles expected and edge-case scenarios.</p>

<p><strong>Creativity:</strong> While programming involves logic, creativity comes in when designing solutions. You must be able to think creatively for innovation.</p>

<h4>Programming Languages to Learn</h4>

<p>While mastering a single language is a good start, learning multiple languages allows programmers to be versatile and exposes them to different techniques. Here are 5 of the top programming languages to consider learning:</p>

<p><strong>Python</strong> ‚Äì A very popular multipurpose language used for web development, data science, artificial intelligence, automation, and more. Python has a simple syntax and is a good first language.</p>

<p><strong>JavaScript</strong> ‚Äì The core language for web development and front-end programming. JavaScript allows the creation of interactive interfaces and dynamic behaviors.</p>

<p><strong>Java</strong> ‚Äì An object-oriented language well-suited for back-end development and Android apps. Java is robust and widely adopted by enterprises.</p>

<p><strong>C++</strong> ‚Äì A powerful general-purpose language with wide industry usage. C++ is commonly used for game engines, desktop apps, and high-performance computing.</p>

<p><strong>Go</strong> ‚Äì A relatively new systems programming language fast gaining popularity. Go is useful for building web services, network servers, and more.</p>

<h4>The Importance of Gaining Practical Coding Experience</h4>

<p>While learning syntax and concepts is critical, nothing beats hands-on coding experience when becoming a skilled programmer. Here are impactful ways to gain practical knowledge:</p>

<ul>
    <li>Take on freelance programming projects ‚Äì Small gigs let you code for actual clients to augment skills.</li>
    <li>Build your programs ‚Äì Create projects that interest you outside of work/education for practice.</li>
    <li>Contribute to open source projects ‚Äì Make contributions like fixing bugs on open source tools used by many.</li>
    <li>Follow programming tutorials/courses ‚Äì Interactive, hands-on tutorials are a great learning method.</li>
    <li>Participate in hackathons ‚Äì Rapidly build prototypes and get experience during timed hacking events.</li>
    <li>Intern or volunteer to code ‚Äì Look for opportunities to code at tech companies through internships or volunteering.</li>
    <li>Ask colleagues for help ‚Äì Experienced developers are often happy to mentor you if approached respectfully,</li>
</ul>

<p>Gaining significant experience writing code and seeing your work in action is invaluable prep for a coding career.</p>

<h4>Formal Education for Programmers</h4>

<p>While self-learning is completely viable, pursuing formal education has major advantages:</p>

<p><strong>Earn a programming certificate or diploma</strong> ‚Äì Many trade schools and technical institutes offer intensive certificate programs focused on coding skills. These can be completed much faster than degree programs.</p>

<p><strong>Obtain an undergraduate CS degree</strong> ‚Äì Majoring in computer science or software engineering gives you a broad computer systems and programming foundation. This is the traditional path to becoming a developer.</p>

<p><strong>Get a Master's in CS</strong> ‚Äì For those with an undergrad degree in another field, an MS in computer science can be obtained through a 1-2 year program to switch careers.</p>

<p><strong>Specialize with advanced degrees</strong> ‚Äì Further studies like a Master's or Ph.D. allow specializing in fields like artificial intelligence, cybersecurity, graphics, and more.</p>

<p><strong>Learn online</strong> ‚Äì Many reputed universities now offer affordable online CS degrees, allowing remote learning, such as <a href="https://pll.harvard.edu/subject/programming" rel="noopener noreferrer nofollow">Harvard</a>, <a href="https://news.stanford.edu/2021/03/22/famous-stanford-coding-course-free-online/" rel="noopener noreferrer nofollow">Standford</a>, <a href="https://www.edx.org/learn/coding" rel="noopener noreferrer nofollow">EDX</a>, and many others.</p>

<p>Formal degrees open up additional job prospects and higher starting salaries. However, they require long-term investments of time and tuition costs. Weigh the benefits of self-guided learning for your goals.</p>

<h4>Essential Self-Learning Resources</h4>

<p>For those focused on quickly developing skills and transitioning to programming outside of formal education, self-guided learning using the abundance of available resources online is the way to go. Here are some of the best resources:</p>

<p><strong>MOOCs (Massive Open Online Courses)</strong> ‚Äì Platforms like Coursera, Udacity, and edX offer free courses from top universities covering programming languages, theory, and specializations. These are very comprehensive.</p>

<p><strong>Coding Bootcamps</strong> ‚Äì Intensive bootcamps like <a href="https://www.lewagon.com/" rel="noopener noreferrer nofollow">Le Wagon</a>, General Assembly, and Thinkful include project-based learning and career support through partnerships with tech firms.</p>

<p><strong>Online Learning Platforms</strong> ‚Äì <a href="https://www.codecademy.com/" rel="noopener noreferrer nofollow">Codecademy,</a> <a href="https://www.freecodecamp.org/" rel="noopener noreferrer nofollow">FreeCodeCamp</a>, <a href="https://www.udemy.com/" rel="noopener noreferrer nofollow">Udemy</a>, and <a href="https://www.skillshare.com/" rel="noopener noreferrer nofollow">Skillshare</a> have extensive programming courses, including interactive coding environments. Paid courses are affordable.</p>

<p><strong>Coding Challenge Websites</strong> ‚Äì Platforms like <a href="https://www.hackerrank.com/" rel="noopener noreferrer nofollow">HackerRank</a>, <a href="https://www.codility.com/" rel="noopener noreferrer nofollow">Codility</a>, and <a href="https://leetcode.com/" rel="noopener noreferrer nofollow">LeetCode</a> have challenged libraries to practice coding questions and develop problem-solving speed.</p>

<p><strong>Programming Documentation</strong> ‚Äì Official language docs like <a href="http://Python.org" rel="noopener noreferrer nofollow">Python.org</a> and Mozilla Developer Network offer tutorials and references for syntax, libraries, and more.</p>

<p><strong>YouTube Channels/Podcasts</strong> ‚Äì Programming content creators share tutorials, projects, and explanations of concepts via free video and audio.</p>

<p><strong>Coding Meetups</strong> ‚Äì Local meetup groups offer workshops, collaboration opportunities, and advice for programmers of all skill levels.</p>

<p><strong>Programming Books</strong> ‚Äì Highly-rated books provide structured introductions to coding fundamentals and languages.</p>

<p>Using a combination of these resources is an effective way to start programming and build a portfolio.</p>

<h4>Getting Hired as a New Programmer</h4>

<p>Once you have acquired sufficient programming skills from self-learning and/or formal education, the next step is getting hired for an entry-level coding job. Here are tips for landing your first programming position:</p>

<p><strong>Building an impressive portfolio</strong> ‚Äì Create a portfolio highlighting real-world projects and code samples that convey your abilities. Share via GitHub or a personal site.</p>

<p><strong>Networking</strong> ‚Äì Attend local tech meetups and conferences to connect with the programmer community, partners, and potential employers.</p>

<p><strong>Looking for internships</strong> ‚Äì Paid/unpaid internships allow for gaining experience and making professional connections.</p>

<p><strong>Applying to code apprenticeships</strong> ‚Äì Programs like Andela provide training and facilitate matching apprentices with tech firms.</p>

<p><strong>Perfecting your resume</strong> ‚Äì Tailor your resume to each position and include relevant skills, projects, and coding languages used.</p>

<p><strong>Acquiring professional certificates</strong> ‚Äì Completing certifications in languages or frameworks signals focused knowledge.</p>

<p><strong>Showcasing soft skills</strong> ‚Äì During interviews, demonstrate communication ability, creativity, problem-solving, and passion for programming.</p>

<p><strong>Considering contract roles</strong> ‚Äì Contract coding allows gaining more experience before pursuing a full-time job.</p>

<p><strong>Expanding your search</strong> ‚Äì Look at startups and smaller companies alongside larger corporations.</p>

<p>Persistence and continually improving based on failures in the job hunt process are important. Be open to relocating if needed.</p>

<h4>Future Programming Career Advancement</h4>

<p>Once working in an entry-level coding role, programmers should continue learning new skills and expanding their capabilities to advance their careers over time through:</p>

<p><strong>Learning additional languages</strong> ‚Äì Master languages like C and Java to open up more back-end development roles.</p>

<p><strong>Picking up new frameworks/toolsets</strong> ‚Äì Gain expertise in trending frameworks like React, Angular, Node.js, etc. Update skills regularly.</p>

<p><strong>Improving speed and efficiency</strong> ‚Äì Push yourself to write optimized code and solve problems faster through practice.</p>

<p><strong>Gaining domain knowledge</strong> ‚Äì Understand the business/industry you work in and learn associated programming needs.</p>

<p><strong>Cultivating soft skills</strong> ‚Äì Develop team leadership, project management, and communication abilities.</p>

<p><strong>Earning advanced </strong>certifications demonstrates a commitment to specializations like security, AI, cloud computing, etc.</p>

<p><strong>Transitioning into architect roles</strong> ‚Äì Architects design complex systems and high-level software structures.</p>

<p><strong>Shifting to engineering management</strong> ‚Äì Experienced coders can manage teams of software engineers.</p>

<p><strong>Embracing roles beyond coding</strong> ‚Äì Move into product management, technical sales/marketing, startup funding, etc.</p>

<p><strong>Contracting as a consultant</strong> ‚Äì Work as an independent contractor across different projects.</p>

<p>There are many avenues beyond coding for career growth once fundamentals are strong. Ambition and continued learning enable advancing to senior programming or related leadership roles.</p>

<h4>Conclusion</h4>

<p>Demand for skilled programmers continues to rise rapidly. Now is an opportune time to start your programming journey. Master fundamental concepts, build projects, and gain hands-on experience.</p>

<p>Learn in-demand languages, expand your skills continuously, and be patient in your job search. With hard work and perseverance, an exciting career in programming awaits, allowing you to bring ideas to life through code while reaping financial and creative rewards. The possibilities in the digital age are endless for programmers who stay focused and flexible.</p>

<p>I hope you enjoyed reading this guide and feel motivated to start your programming journey.</p>

<p>If you find this post exciting, find more exciting posts on <a href="http://blog.learnhub.africa/" rel="noopener noreferrer nofollow">Learnhub Blog</a>; we write everything tech from <a href="https://blog.learnhub.africa/category/cloud-computing/" rel="noopener noreferrer nofollow">Cloud computing</a> to <a href="https://blog.learnhub.africa/category/frontend/" rel="noopener noreferrer nofollow">Frontend Dev</a>, <a href="https://blog.learnhub.africa/category/security/" rel="noopener noreferrer nofollow">Cybersecurity</a>, <a href="https://blog.learnhub.africa/category/data-science/" rel="noopener noreferrer nofollow">AI</a>, and <a href="https://blog.learnhub.africa/category/blockchain/" rel="noopener noreferrer nofollow">Blockchain</a>.</p>

 </details> 
 <hr /> 

 #### - [17 years of frustration: The best lesson I've learned about teaching](https://dev.to/apetryla/the-best-lesson-ive-learned-about-teaching-in-17-years-of-frustration-3pcc) 
 <details><summary>Article</summary> <p>Once, a young boy received a book as a gift from his grandparents. The boy's grandpa loved to play the accordion, so it was no surprise that the book was called 'Jaunasis pianistas' (The Young Pianist). However, it was still magical to the boy. He had been dreaming of learning how to play since he first saw the instrument. The excitement couldn't be held any longer. He turned the first page.</p>

<p>'The mind is not a vessel to be filled, but a fire to be kindled,' he read on the first page. It was the foreword to a teacher.</p>




<p>But this is not a story about learning piano or music. It's a story about teachers and teaching.</p>

<p>In my 6th grade, I had to choose a secondary language at school. Between German and Russian, the first one looked more interesting to me. So I chose it. What I didn't know is that for the next 5 years, I would have to endure a teacher who smiled at the beginning of the lesson and screamed at the end. She got angry when somebody made a mistake and called people idiots when they couldn't remember new words.</p>

<p>Five years is a long time. She did manage to fill my head with German words and grammar rules. But along with that, she filled me with pure anger towards the language and everything related to it.</p>

<p>At the end of the 10th grade, she came to us with her typical fake smile, saying how much fun it would be if we chose German for higher grades. Finally, I could tell her what I thought in her own language.</p>




<p>The last 12 years were enough not only to bury the words I used to know but also the hatred. Yesterday, I took the book again and started 'den Staub entfernen' (to dust off). It took me 12 years to get back to the starting point. For those who still have a "but" in their heads, I emphasize: a bad teacher can't teach you anything, even in 17 years (I think we could safely approximate this to a lifetime.)</p>

<p>Was I the only one? No, I wasn't. My friends experienced the same frustration, and my classmates endured similar difficulties. Even the younger pupils were not spared from the challenges. Among them was my brother, who is ten years younger than me. He, too, had the misfortune of "learning" from the same "teacher." Later on, he switched schools but unfortunately ended up with an even worse teacher. I did try to advise him to choose a different secondary language, but like me, he wanted to learn German."</p>

<p>Yesterday, I mentioned to him that I had started learning the language again. He gave me a long, deep look, but with all my effort, I couldn't decipher what was happening in his head.</p>




<p>'The mind is not a vessel to be filled, but a fire to be kindled.' - Plutarch.</p>

 </details> 
 <hr /> 

 #### - [The Benefits of Using JavaScript Libraries in Startup Projects](https://dev.to/plazarev/the-benefits-of-using-javascript-libraries-in-startup-projects-1p9p) 
 <details><summary>Article</summary> <p>The application development software industry has been on the upswing lately. According to <a href="https://www.statista.com/outlook/tmo/software/application-development-software/worldwide#analyst-opinion">Statista</a>, this segment has shown a growth rate of more than 5% in recent years and this positive dynamics is expected to continue in the future. And this is hardly surprising since these tools can significantly facilitate the overall application development process. </p>

<p>In the area of web development, JavaScript libraries often become such a magic bullet that helps developers to bring their ideas to life with less time and effort. </p>

<p>JavaScript libraries are beneficial for startups that are in the early stages of software product development. Drawing an analogy with the famous words of Archimedes on the need for a lever and a place to stand for moving the world, it can be said that many startup dev teams often require app development software to achieve their coding objectives. </p>

<p>In this article, we‚Äôll consider why JavaScript libraries benefit startup projects and how to obtain such tools without spending a fortune.</p>

<h1>
  
  
  Reasons for Using JavaScript Libraries in Your Startup Project
</h1>

<p>Inadequate or <a href="https://www.statista.com/statistics/1293880/global-work-challenges-for-software-developers/#:~:text=Among%20the%20most%20important%20challenges,part%2Dremote%20team%20in%202022">insufficient work tools are frequently named</a> among the most important challenges that developers experience during app building. Here it is often referred to as business-oriented software that focuses on process automation and data analytics to gain more business insights and increase efficiency. </p>

<p>Therefore, it is crucial to choose the right technology stack when starting a new business undertaking on the web. That‚Äôs where JavaScript libraries come into play.</p>

<p>There are plenty of open-source JavaScript libraries available on GitHub. These tools can help to deliver a lot of useful things absolutely free of charge. However, despite the appeal of such solutions, they have some significant drawbacks that may affect the delivery of a big project. </p>

<p>First and foremost, you can hardly count on the possibility to implement complex functionalities and get timely technical support with open-source libraries. With paid JavaScript libraries, you won‚Äôt have to worry about these aspects when working on your first web project.</p>

<p>Moreover, commercial JavaScript libraries also provide many other benefits that will be useful in the development process:</p>

<p><strong>‚Ä¢ High performance</strong></p>

<p>Performance is one of the main success factors for any modern web app. That is why vendors of application development software always pay special attention to the ability of their products to process large amounts of data without any delays. They use special techniques such as smart rendering or dynamic loading to ensure a good user experience under heavy loads. With performant JavaScript libraries, developers also receive the scalability reserve required for adding extra functionalities to the app in the future.</p>

<p><strong>‚Ä¢ Enhanced customizability</strong></p>

<p>Comprehensive APIs of JavaScript libraries enable dev teams to adopt a personalized approach to the user interface implementation. In other words, it is possible to customize any UI element in accordance with specific project requirements.</p>

<p><strong>‚Ä¢ Regular updates and bug fixes</strong></p>

<p>New product versions are one more significant advantage of paid JavaScript libraries. They allow enriching software with new features as well as improving the current ones. Such updates contribute to the maturity and stability of their library‚Äôs codebase and help the product to stay relevant with time.</p>

<p><strong>‚Ä¢ Detailed documentation</strong></p>

<p>Commercial JavaScript libraries commonly come not only with extensive functional capabilities but also with all-encompassing documentation. It helps developers to reduce the learning curve and make the most of all available features.</p>

<p><strong>‚Ä¢ Learning materials</strong></p>

<p>In addition to documentation, JavaScript libraries are also frequently complemented with other useful auxiliaries such as demos, samples, tutorials, videos, etc. Thanks to that, dev teams get vivid examples of how to use this or that feature as well as step-by-step instructions on some tricky configuration or customization stages.</p>

<p><strong>‚Ä¢ Integrations with popular JavaScript frameworks and server-side technologies</strong></p>

<p>It is hard to imagine a modern web application built without any front-end frameworks (React, Angular, Vue, etc.) and other technologies on the back-end such as Node.js. These tools make the lives of developers so much easier by providing the basis for a future app. Therefore, it is not surprising that well-established JavaScript libraries include integrations with popular tools from the rich JavaScript ecosystem.</p>

<p><strong>‚Ä¢ Free trial versions</strong></p>

<p>As it is said, first try then trust. All reliable providers of JavaScript components always back up descriptions of their products to test them in practice. For this purpose, vendors offer short-term trial versions of their products.</p>

<p>As you can see, solid commercial JavaScript libraries can be a worthy long-term investment. But here comes one of the main pain points of many startups, namely, financing. Not all new businesses can afford to purchase some advanced tools, because of tight budgets and lack of investments. The ongoing political and economic crisis makes the matter even worse. </p>

<p>But fortunately, some vendors of application development tools are aware of the financial limitations of startups and come up with various discount programs to give them a helping hand in the early stages of their work.</p>

<p>Let us consider one of such juicy deals provided by the DHTMLX company.</p>

<h1>
  
  
  New DHTMLX Discount Program for Startups
</h1>

<p>The DHTMLX company specializes in JavaScript UI components aimed to speed up the development of feature-packed web apps with a focus on various business activities such as project management, data analysis, and content management. Last month, the company decided to launch a new discount program specifically intended for startups.</p>

<p>This initiative implies a <a href="https://dhtmlx.com/docs/startups/">70% discount for top DHTMLX products</a>. The package provided by DHTMLX in this program includes the Suite library with numerous popular UI widgets as well as some sophisticated JavaScript components for project management apps such as Gantt and Scheduler. </p>

<p>In addition to a huge discount, dev teams can quickly solve any issues with the help of highly-qualified tech support, use all included components in SaaS projects, and take advantage of a considerable base of support materials (demos, snippets, tutorials, etc.). You can get acquainted with this program in more detail by visiting the official page of the project.</p>

<p>Summarizing the above, it is safe to say that JavaScript libraries can be a great addition to the technology stack of any web development team. Open-source tools can be suitable for small projects that are not aimed at obtaining material profits, while commercial libraries are great for more complex and long-term projects. Some vendors of commercial JS libraries such as DHTMLX even offer special discounts for startups to help them in the opening phases of their projects.</p>

<p><strong><em>The article is <a href="https://startupnation.com/grow-your-business/software/the-benefits-of-using-javascript-libraries-in-startup-projects/">originally published on StartupNation</a>.</em></strong></p>

 </details> 
 <hr /> 

 #### - [Building a Role-Based Access Control System with JWT in Spring Boot](https://dev.to/alphaaman/building-a-role-based-access-control-system-with-jwt-in-spring-boot-a7l) 
 <details><summary>Article</summary> <h2>
  
  
  Introduction
</h2>

<p>Welcome to my blog, where we'll embark on an exciting journey into the realm of web application security! If you're new to the world of Spring Boot or just beginning to explore the intricacies of authentication and authorization, you've come to the right place. In this inaugural article, I'm thrilled to share my take on a topic that resonates with developers of all levels: Building a Role-Based Access Control System with JWT in Spring Boot.</p>

<p>In this blog series, we'll dive deep into the world of Spring Security and explore how JSON Web Tokens (JWT) can amplify its capabilities. I'll guide you step by step, from laying the foundation with a solid Spring Boot setup, all the way to implementing role-based access control using JWT tokens.</p>

<p><strong>In this blog, we'll cover the following topics:</strong></p>

<ul>
<li>Creating Different Roles and Assigning it to Users</li>
<li>Registering Users and Administrators</li>
<li>Generating JWT Tokens and Authentication</li>
<li>Performing Role-Based Actions</li>
</ul>

<p><em>Prerequisites</em><br>
Before we dive into the exciting world of building a role-based access control system with JWT in Spring Boot, let's ensure that you have the necessary tools and environment ready. Here's what you'll need to get started:</p>

<p><code>Java Development Kit (JDK)</code>: Make sure you have a compatible version of JDK installed on your machine. Spring Boot usually works well with JDK 8 or higher.</p>

<p><code>Integrated Development Environment (IDE)</code>: Choose an IDE that suits your preferences. IntelliJ IDEA and Eclipse are popular choices for Spring Boot development.</p>

<p><code>Maven or Gradle</code>: You'll need either Maven or Gradle as a build tool to manage your project dependencies.</p>

<p><strong>Setting up the Environment:</strong><br>
Spring Boot Project Initialization: Create a new Spring Boot project using either Spring Initializr web tool <a href="https://start.spring.io/">here</a> or your IDE's project creation wizard. </p>

<p>Here is my setup you can follow:<br>
Project: Maven<br>
Spring Boot Version:2.7.3 (if not available then use 3.1.3 then change it later in pom.xml)<br>
Java Version:17<br>
Dependencies:<br>
1.Spring Data JPA<br>
2.Spring web<br>
3.Spring Security<br>
4.MySQL Driver<br>
5.JSON WEB TOKEN </p>

<p>You will not find JSON web Token there you have to add it manually<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&lt;dependency&gt;
     &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;
     &lt;artifactId&gt;jjwt&lt;/artifactId&gt;
     &lt;version&gt;0.9.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

</div>



<p>Here is full pom.xml<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.7.3&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
    &lt;groupId&gt;com.alpha&lt;/groupId&gt;
    &lt;artifactId&gt;alpha&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;alpha&lt;/name&gt;
    &lt;description&gt;Demo project for Spring Boot Role based Authentication using JWT &lt;/description&gt;
    &lt;properties&gt;
        &lt;java.version&gt;17&lt;/java.version&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;
            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;
            &lt;version&gt;0.9.1&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;
            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre>

</div>



<p>application.properties<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>jwt.token.validity=18000
jwt.signing.key=YourSignInKey
jwt.authorities.key=roles
jwt.token.prefix=Bearer
jwt.header.string=Authorization

spring.datasource.url=jdbc:mysql://localhost:3306/yourdb
spring.datasource.username=root
spring.datasource.password=root
spring.jpa.show-sql=true
spring.jpa.hibernate.ddl-auto=update
spring.user.datasource.driver-class-name=com.mysql.jdbc.Driver
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
server.port=8080
</code></pre>

</div>



<p>This is a configuration file for a Spring Boot application.  </p>

<ul>
<li>The first line sets the validity duration for JSON Web Tokens (JWT) to 18000 seconds (5 hours). </li>
<li>The second line specifies the signing key to be used for generating and validating JWTs. </li>
<li>The third line defines the key for extracting authorities/roles from a JWT. </li>
<li>The fourth line sets the prefix for JWT tokens to "Bearer". </li>
<li>The fifth line specifies the header string to be used for JWT tokens in HTTP requests. </li>
<li>The next few lines configure the MySQL database connection for the application, including the URL, username, and password. </li>
<li>The line <code>spring.jpa.show-sql=true</code> enables the display of SQL statements executed by Hibernate. </li>
<li>The line <code>spring.jpa.hibernate.ddl-auto=update</code> configures Hibernate to automatically update the database schema based on the entity classes. </li>
<li>The line <code>spring.user.datasource.driver-class-name=com.mysql.jdbc.Driver</code> specifies the driver class for the user datasource. </li>
<li>The line <code>spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect</code> sets the Hibernate dialect for MySQL. </li>
<li>The last line sets the server port to 8080. </li>
</ul>

<blockquote>
<p>"As you can see, here is the clear folder structure."<br>
</p>
</blockquote>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>src
‚îî‚îÄ‚îÄ main
    ‚îú‚îÄ‚îÄ java
    ‚îÇ   ‚îî‚îÄ‚îÄ com
    ‚îÇ       ‚îî‚îÄ‚îÄ alpha
    ‚îÇ           ‚îú‚îÄ‚îÄ config (Package)
    ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ JwtAuthenticationFilter.java
    ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ PasswordEncoder.java
    ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ TokenProvider.java
    ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ UnauthorizedEntryPoint.java
    ‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ WebSecurityConfig.java
    ‚îÇ           ‚îú‚îÄ‚îÄ controller (Package)
    ‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ UserController.java
    ‚îÇ           ‚îú‚îÄ‚îÄ dao (Package)
    ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ RoleDao.java
    ‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ UserDao.java
    ‚îÇ           ‚îú‚îÄ‚îÄ model (Package)
    ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ AuthToken.java
    ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ LoginUser.java
    ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ Role.java
    ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ User.java
    ‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ UserDto.java
    ‚îÇ           ‚îú‚îÄ‚îÄ service (Package)
    ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ impl
    ‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RoleServiceImpl.java
    ‚îÇ           ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UserServiceImpl.java
    ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ RoleService.java
    ‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ UserService.java
    ‚îÇ           ‚îî‚îÄ‚îÄ AlphaApplication.java
    ‚îî‚îÄ‚îÄ resources
        ‚îî‚îÄ‚îÄ application.properties

</code></pre>

</div>



<p>Let's get started!</p>

<p>Now we will start with understanding the config package</p>

<p>Spring Security is a powerful and highly customizable security framework provided by the Spring Framework for Java applications. Its primary purpose is to handle authentication, authorization, and various security aspects in web and enterprise applications. Spring Security is often used to secure web applications, RESTful APIs, and other components of a software system.</p>

<p><strong>Authentication:</strong><br>
Authentication is the process of confirming the identity of a person or entity. It ensures that the person or entity is who they claim to be before granting access to something. It's like checking someone's ID before allowing them to enter a secure area.<br>
Imagine a professional cricket match. Before a player can step onto the field, they must prove their identity. They do this by showing their official player card with their name, photo, and a unique ID number. The match officials, like the umpires and team captains, examine the card to ensure it matches the player's appearance and is on the list of authorized players. Once confirmed, the player is authenticated and allowed to participate in the game.</p>

<p><strong>Authorization:</strong><br>
Authorization comes after authentication and determines what actions or resources an authenticated person or entity is allowed to access or perform. It specifies the level of access and control based on roles, permissions, or rules.</p>

<p>Once a cricket player is authenticated and on the field, authorization kicks in. Each player has a specific role (e.g., batsman, bowler, fielder) with associated actions they can perform. For example, a bowler is authorized to bowl, a batsman is authorized to bat, and a wicketkeeper is authorized to keep wickets. The coach or captain may have special authorization to make strategic decisions during the match, like changing the batting order or field placements.</p>

<p>lets move on to our config files one by one </p>

<p><strong>CORSFilter :</strong> <br>
CORSFilter class is responsible for handling CORS-related settings in a web application. It intercepts incoming HTTP requests, adds the necessary CORS headers to the response, and then allows the request to continue processing using chain.doFilter(req, res). This filter helps control and secure how resources on the server are accessed by different origins in a web application.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.config;

import javax.servlet.*;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;


public class CORSFilter implements Filter {

    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletResponse response = (HttpServletResponse) res;
        response.setHeader("Access-Control-Allow-Origin", "*");
        response.setHeader("Access-Control-Allow-Credentials", "true");
        response.setHeader("Access-Control-Allow-Methods", "POST, GET, PUT, OPTIONS, DELETE");
        response.setHeader("Access-Control-Max-Age", "3600");
        response.setHeader("Access-Control-Allow-Headers", "X-Requested-With, Content-Type, Authorization, Origin, Accept, Access-Control-Request-Method, Access-Control-Request-Headers");
        chain.doFilter(req, res);
    }

    public void init(FilterConfig filterConfig) {}

    public void destroy() {}

}
</code></pre>

</div>



<p>This class implements the Filter interface, which is part of the Java Servlet API. Filters are used to perform actions on HTTP requests and responses as they pass through the application.</p>

<ul>
<li>
doFilter method :-
This method is required when implementing the Filter interface. It is called for each incoming HTTP request.
Inside this method, the code is responsible for adding necessary CORS headers to the HTTP response.
CORS headers are used to control and define the policy for cross-origin requests. They specify who can access the resources of a web page and what operations are permitted from different origins.
The code in this method sets various CORS headers, such as <code>Access-Control-Allow-Origin</code>, <code>Access-Control-Allow-Methods</code>, and others. These headers dictate which domains are allowed to access the resources, which HTTP methods are permitted, and other CORS-related policies.</li>
</ul>

<p>The <code>init</code> method is used for initialization tasks that the filter may need when it's first created.</p>

<p>The <code>destroy</code> method is called when the filter is being removed or shut down. </p>

<p><strong>WebSecurityConfig</strong> <br>
 This class is responsible for configuring security settings, such as authentication, authorization, and request filtering, in a Spring Boot web application. It also integrates custom components, like the JwtAuthenticationFilter, to handle specific security <br>
requirements. This configuration is a common setup for securing RESTful APIs or web applications using Spring Security.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.config;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.authentication.AuthenticationManager;
import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;
import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;
import org.springframework.security.config.http.SessionCreationPolicy;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;

import javax.annotation.Resource;

@Configuration
@EnableWebSecurity
@EnableGlobalMethodSecurity(prePostEnabled = true)
public class WebSecurityConfig extends WebSecurityConfigurerAdapter {

    @Resource(name = "userService")
    private UserDetailsService userDetailsService;

    @Autowired
    private PasswordEncoder encoder;

    @Autowired
    private UnauthorizedEntryPoint unauthorizedEntryPoint;

    @Override
    public void configure(AuthenticationManagerBuilder auth) throws Exception {
        auth.userDetailsService(userDetailsService).passwordEncoder(encoder.encoder());
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http.cors().and().csrf().disable()
                .authorizeRequests()
                .antMatchers("/users/authenticate", "/users/register").permitAll()
                .anyRequest().authenticated()
                .and()
                .exceptionHandling().authenticationEntryPoint(unauthorizedEntryPoint).and()
                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);

        http.addFilterBefore(authenticationTokenFilterBean(), UsernamePasswordAuthenticationFilter.class);
    }

    @Override
    @Bean
    public AuthenticationManager authenticationManagerBean() throws Exception {
        return super.authenticationManagerBean();
    }

    @Bean
    public JwtAuthenticationFilter authenticationTokenFilterBean() throws Exception {
        return new JwtAuthenticationFilter();
    }
}
</code></pre>

</div>



<p><code>@Configuration:</code> Indicates that this class contains configuration settings for the application.<br>
<code>@EnableWebSecurity:</code> Enables Spring Security features for the web application.<br>
<code>@EnableGlobalMethodSecurity(prePostEnabled = true):</code> Enables method-level security annotations such as <code>@PreAuthorize</code> and <code>@PostAuthorize</code>.</p>

<p><code>@Resource:</code> Injects the <code>UserDetailsService</code> bean, likely responsible for user-related operations.<br>
<code>@Autowired:</code> Injects instances of <code>PasswordEncoder</code> and <code>UnauthorizedEntryPoint</code> beans, which are used for password hashing and handling unauthorized access, respectively.</p>

<p><code>configure(AuthenticationManagerBuilder auth) Method:</code></p>

<ul>
<li>This method configures the authentication manager.</li>
<li>It specifies that the <code>userDetailsService</code> bean should be used for user authentication and sets the password encoder.</li>
</ul>

<p><code>configure(HttpSecurity http) Method:</code></p>

<ul>
<li>This method configures the HTTP security settings.</li>
<li>It includes settings for CORS (Cross-Origin Resource Sharing), CSRF (Cross-Site Request Forgery), and URL permissions.</li>
<li>It specifies which URLs are accessible without authentication ("/users/authenticate" and "/users/register") and requires authentication for all other requests.</li>
<li>It sets an authentication entry point for handling unauthorized access and defines the session management policy as STATELESS.</li>
<li>The addFilterBefore method adds a custom <code>JwtAuthenticationFilter</code> before the <code>UsernamePasswordAuthenticationFilter</code> to handle JWT (JSON Web Token) authentication.</li>
</ul>

<p><code>authenticationManagerBean() Method:</code></p>

<ul>
<li>This method declares an AuthenticationManager bean, which is used for user authentication.</li>
</ul>

<p><code>JwtAuthenticationFilter Bean:</code></p>

<ul>
<li>This method declares a bean for the JwtAuthenticationFilter, which is a custom filter used for JWT-based authentication.</li>
</ul>

<p><strong>TokenProvider</strong> <br>
This class is responsible for handling JWTs in a Spring Boot application's security flow. It can generate tokens, extract user information from tokens, validate tokens, and create authentication tokens for users based on the information stored in the JWTs.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.config;

import io.jsonwebtoken.*;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;
import org.springframework.security.core.Authentication;
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.authority.SimpleGrantedAuthority;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.stereotype.Component;

import java.io.Serializable;
import java.util.Arrays;
import java.util.Collection;
import java.util.Date;
import java.util.function.Function;
import java.util.stream.Collectors;

@Component
public class TokenProvider implements Serializable {

    @Value("${jwt.token.validity}")
    public long TOKEN_VALIDITY;

    @Value("${jwt.signing.key}")
    public String SIGNING_KEY;

    @Value("${jwt.authorities.key}")
    public String AUTHORITIES_KEY;

    public String getUsernameFromToken(String token) {
        return getClaimFromToken(token, Claims::getSubject);
    }

    public Date getExpirationDateFromToken(String token) {
        return getClaimFromToken(token, Claims::getExpiration);
    }

    public &lt;T&gt; T getClaimFromToken(String token, Function&lt;Claims, T&gt; claimsResolver) {
        final Claims claims = getAllClaimsFromToken(token);
        return claimsResolver.apply(claims);
    }

    private Claims getAllClaimsFromToken(String token) {
        return Jwts.parser()
                .setSigningKey(SIGNING_KEY)
                .parseClaimsJws(token)
                .getBody();
    }

    private Boolean isTokenExpired(String token) {
        final Date expiration = getExpirationDateFromToken(token);
        return expiration.before(new Date());
    }

    public String generateToken(Authentication authentication) {
         String authorities = authentication.getAuthorities().stream()
                .map(GrantedAuthority::getAuthority)
                .collect(Collectors.joining(","));

        return Jwts.builder()
                .setSubject(authentication.getName())
                .claim(AUTHORITIES_KEY, authorities)
                .setIssuedAt(new Date(System.currentTimeMillis()))
                .setExpiration(new Date(System.currentTimeMillis() + TOKEN_VALIDITY*1000))
                .signWith(SignatureAlgorithm.HS256, SIGNING_KEY)
                .compact();
    }

    public Boolean validateToken(String token, UserDetails userDetails) {
        final String username = getUsernameFromToken(token);
        return (username.equals(userDetails.getUsername()) &amp;&amp; !isTokenExpired(token));
    }

    UsernamePasswordAuthenticationToken getAuthenticationToken(final String token, final Authentication existingAuth, final UserDetails userDetails) {

        final JwtParser jwtParser = Jwts.parser().setSigningKey(SIGNING_KEY);

        final Jws&lt;Claims&gt; claimsJws = jwtParser.parseClaimsJws(token);

        final Claims claims = claimsJws.getBody();

        final Collection&lt;? extends GrantedAuthority&gt; authorities =
                Arrays.stream(claims.get(AUTHORITIES_KEY).toString().split(","))
                        .map(SimpleGrantedAuthority::new)
                        .collect(Collectors.toList());

        return new UsernamePasswordAuthenticationToken(userDetails, "", authorities);
    }

}
</code></pre>

</div>



<p><code>@Component:</code> Marks this class as a Spring component, allowing it to be automatically scanned and registered as a bean in the Spring application context.</p>

<ul>
<li>getUsernameFromToken(String token): This method extracts the username (subject) from a JWT token.</li>
<li>getExpirationDateFromToken(String token): Retrieves the expiration date from a JWT token.</li>
<li>getClaimFromToken(String token, Function claimsResolver): A generic method to extract claims from a JWT token.</li>
<li>getAllClaimsFromToken(String token): Parses and retrieves all claims (payload) from a JWT token.</li>
<li>isTokenExpired(String token): Checks whether a JWT token has expired based on its expiration date.</li>
<li>generateToken(Authentication authentication): Generates a new JWT token based on the provided Authentication object. It includes the subject (username), authorities, issuance time, and expiration time.</li>
<li>validateToken(String token, UserDetails userDetails): Validates a JWT token against the provided UserDetails. It checks if the token's subject matches the user's username and if the token is not expired.</li>
<li>getAuthenticationToken(final String token, final Authentication existingAuth, final UserDetails userDetails): This method parses a JWT token to create an Authentication object containing the user's authorities. It's used for authenticating users based on JWT tokens.</li>
</ul>

<p><strong>JwtAuthenticationFilter</strong> <br>
JwtAuthenticationFilter is responsible for intercepting incoming requests, extracting JWTs from request headers, and authenticating users based on the tokens. It ensures that authenticated users have their security context set, allowing them to access protected resources within the application.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.config;

import io.jsonwebtoken.ExpiredJwtException;
import io.jsonwebtoken.SignatureException;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.web.authentication.WebAuthenticationDetailsSource;
import org.springframework.web.filter.OncePerRequestFilter;

import javax.annotation.Resource;
import javax.servlet.FilterChain;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class JwtAuthenticationFilter extends OncePerRequestFilter {

    @Value("${jwt.header.string}")
    public String HEADER_STRING;

    @Value("${jwt.token.prefix}")
    public String TOKEN_PREFIX;

    @Resource(name = "userService")
    private UserDetailsService userDetailsService;

    @Autowired
    private TokenProvider jwtTokenUtil;

    @Override
    protected void doFilterInternal(HttpServletRequest req, HttpServletResponse res, FilterChain chain) throws IOException, ServletException {
        String header = req.getHeader(HEADER_STRING);
        String username = null;
        String authToken = null;

        if (header != null &amp;&amp; header.startsWith(TOKEN_PREFIX)) {
            authToken = header.replace(TOKEN_PREFIX, "");

            try {
                username = jwtTokenUtil.getUsernameFromToken(authToken);
            } catch (IllegalArgumentException e) {
                logger.error("Error occurred while retrieving Username from Token", e);
            } catch (ExpiredJwtException e) {
                logger.warn("The token has expired", e);
            } catch (SignatureException e) {
                logger.error("Authentication Failed. Invalid username or password.");
            }
        } else {
            logger.warn("Bearer string not found, ignoring the header");
        }

        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {
            UserDetails userDetails = userDetailsService.loadUserByUsername(username);

            if (jwtTokenUtil.validateToken(authToken, userDetails)) {
                UsernamePasswordAuthenticationToken authentication = jwtTokenUtil.getAuthenticationToken(authToken, SecurityContextHolder.getContext().getAuthentication(), userDetails);
                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(req));
                logger.info("User authenticated: " + username + ", setting security context");
                SecurityContextHolder.getContext().setAuthentication(authentication);
            }
        }

        chain.doFilter(req, res);
    }
}
</code></pre>

</div>



<ul>
<li>This class extends <code>OncePerRequestFilter</code>, which ensures that this filter is applied only once per request.</li>
<li>
<code>doFilterInternal</code> Method:This method is the core of the filter and is called for each incoming HTTP request.</li>
<li>The method first checks if a JWT is present in the request header and if it starts with the defined token prefix ("Bearer ").</li>
<li>If a valid token is found, it attempts to extract the username from the token using the TokenProvider class.</li>
<li>It catches exceptions for various token-related errors, such as token expiration (<code>ExpiredJwtException</code>) and invalid signatures (<code>SignatureException</code>), and logs them.</li>
<li>If a valid username is obtained from the token and there is no existing authentication context, it loads the user details from the <code>UserDetailsService</code> based on the username.</li>
<li>It then validates the token against the user details using the <code>TokenProvider</code>. If the token is valid, it creates an <code>UsernamePasswordAuthenticationToken</code> containing the user details and sets the authentication details.</li>
<li>Finally, it sets the authenticated user's security context using <code>SecurityContextHolder</code>.</li>
<li>After handling authentication, the filter continues the request processing by invoking <code>chain.doFilter(req, res)</code>.</li>
</ul>

<p><strong>BCryptPasswordEncoder</strong><br>
This bean can be used throughout the application for securely hashing and verifying passwords, especially in the context of user authentication and security. It's a common practice to configure and manage password encoding components like this in Spring applications to enhance <code>security</code>.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;

@Configuration
public class PasswordEncoder {

    @Bean
    public BCryptPasswordEncoder encoder(){
        return new BCryptPasswordEncoder();
    }
}
</code></pre>

</div>



<ul>
<li>
<code>BCryptPasswordEncoder</code> is a popular password hashing library in the Spring Security framework. It's used to securely hash and verify passwords.</li>
<li>In this configuration, the <code>BCryptPasswordEncoder</code> bean is created and returned by the <code>encoder()</code> method. This bean can then be injected into other parts of the application, such as Spring Security configurations, to handle password encoding and decoding.</li>
</ul>

<p><strong>UnauthorizedEntryPoint</strong><br>
UnauthorizedEntryPoint class is responsible for handling unauthorized access to protected resources in a Spring Security-enabled application. When an unauthenticated user attempts to access a protected resource, this class sends an HTTP response with a status code of 401, indicating that the request lacks valid authentication. This response informs the client that they need to provide proper authentication credentials to access the resource.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.config;

import org.springframework.security.core.AuthenticationException;
import org.springframework.security.web.AuthenticationEntryPoint;
import org.springframework.stereotype.Component;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.Serializable;


@Component
public class UnauthorizedEntryPoint implements AuthenticationEntryPoint, Serializable {

    @Override
    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException {
        response.sendError(HttpServletResponse.SC_UNAUTHORIZED, "Unauthenticated");
    }

}
</code></pre>

</div>



<p>This class implements the <code>AuthenticationEntryPoint</code> interface, which is part of Spring Security. The <code>AuthenticationEntryPoint</code> interface is responsible for handling authentication-related exceptions, particularly unauthorized access.</p>

<ul>
<li>The <code>commence</code> method is the main method of this class, and it's called when an authentication exception occurs during an HTTP request.</li>
<li>
<p>It takes three parameters:</p>

<p>1.<code>HttpServletRequest request</code>: Represents the incoming HTTP <br>
   request.<br>
 2.<code>HttpServletResponse response</code>: Represents the HTTP response <br>
   that will be sent back to the client.<br>
 3.<code>AuthenticationException authException</code>: Represents the <br>
   authentication exception that occurred, typically due to <br>
   unauthorized access.</p>
</li>
<li><p>In this method, it sends an HTTP response with a status code of <code>401 Unauthorized</code> and a message of "Unauthenticated." This is a standard response for indicating that the request lacks valid authentication credentials or authorization.</p></li>
</ul>

<p>okay lets start with our model classes</p>

<p><strong>User</strong><br>
The User class represents a user entity with attributes like username, password, email, phone, name, and roles. It also defines a many-to-many relationship with the Role entity, allowing users to have multiple roles.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.model;

import com.fasterxml.jackson.annotation.JsonIgnore;

import javax.persistence.*;
import java.util.Set;

@Entity
public class User {

    @Id
    @GeneratedValue(strategy= GenerationType.IDENTITY)
    private long id;

    @Column
    private String username;

    @Column
    @JsonIgnore
    private String password;

    @Column
    private String email;

    @Column
    private String phone;

    @Column
    private String name;

    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    @JoinTable(name = "USER_ROLES",
            joinColumns = {
            @JoinColumn(name = "USER_ID")
            },
            inverseJoinColumns = {
            @JoinColumn(name = "ROLE_ID") })
    private Set&lt;Role&gt; roles;

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getPhone() {
        return phone;
    }

    public void setPhone(String phone) {
        this.phone = phone;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Set&lt;Role&gt; getRoles() {
        return roles;
    }

    public void setRoles(Set&lt;Role&gt; roles) {
        this.roles = roles;
    }
}
</code></pre>

</div>



<ul>
<li>This defines a <code>many-to-many</code> relationship between the User entity and the Role entity. Users can have multiple roles, and roles can be associated with multiple users.</li>
<li>The <code>@ManyToMany</code> annotation indicates a many-to-many relationship.</li>
<li>The <code>fetch = FetchType.EAGER</code> attribute specifies that roles should be eagerly fetched when loading a user.</li>
<li>The <code>cascade = CascadeType.ALL</code> attribute specifies that if operations like persist, merge, remove, etc., are performed on a User <code>entity</code>, the same operations should be cascaded to its associated Role entities.</li>
<li>The <code>@JoinTable</code> annotation is used to define the name of the join table that holds the relationship between users and roles. It specifies the columns used for joining the tables.</li>
</ul>

<p><strong>Role</strong><br>
the Role class represents a user role entity with attributes like name and description. It is designed to be persisted in a database table and can be associated with users through a many-to-many relationship, as indicated by the User entity's relationship mapping that references Role.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.model;

import javax.persistence.*;

@Entity
public class Role {

    @Id
    @GeneratedValue(strategy= GenerationType.IDENTITY)
    private long id;

    @Column
    private String name;

    @Column
    private String description;

    // Getter for id
    public long getId() {
        return id;
    }

    // Setter for id
    public void setId(long id) {
        this.id = id;
    }

    // Getter for name
    public String getName() {
        return name;
    }

    // Setter for name
    public void setName(String name) {
        this.name = name;
    }

    // Getter for description
    public String getDescription() {
        return description;
    }

    // Setter for description
    public void setDescription(String description) {
        this.description = description;
    }
}
</code></pre>

</div>



<p>the Role class represents a user role entity with attributes like name and description. It is designed to be persisted in a database table and can be associated with users through a many-to-many relationship, as indicated by the User entity's relationship mapping that references Role.</p>

<p><strong>AuthToken</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.model;

/**
 * Represents an authentication token.
 */
public class AuthToken {
    private String token;

    /**
     * Constructs a new AuthToken object.
     */
    public AuthToken() {
    }

    /**
     * Constructs a new AuthToken object with the specified token.
     * 
     * @param token the authentication token
     */
    public AuthToken(String token) {
        this.token = token;
    }

    /**
     * Returns the authentication token.
     * 
     * @return the authentication token
     */
    public String getToken() {
        return token;
    }

    /**
     * Sets the authentication token.
     * 
     * @param token the authentication token to be set
     */
    public void setToken(String token) {
        this.token = token;
    }
}
</code></pre>

</div>



<p><strong>LoginUser</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.model;

public class LoginUser {
    private String username;
    private String password;

    // Getters and Setters for username
    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }

    // Getters and Setters for password
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }
}
</code></pre>

</div>



<p><strong>UserDto</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.model;

public class UserDto {

    private String username;
    private String password;
    private String email;
    private String phone;
    private String name;


    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getPhone() {
        return phone;
    }

    public void setPhone(String phone) {
        this.phone = phone;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public User getUserFromDto(){
        User user = new User();
        user.setUsername(username);
        user.setPassword(password);
        user.setEmail(email);
        user.setPhone(phone);
        user.setName(name);

        return user;
    }

}
</code></pre>

</div>



<p><code>DAO</code> is a Spring Data JPA repository interface typically used for performing CRUD (Create, Read, Update, Delete) operations on the  entity class. Let's break down its key components:</p>

<p><strong>UserDao</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.dao;

import com.alpha.model.User;
import org.springframework.data.repository.CrudRepository;
import org.springframework.stereotype.Repository;

@Repository
public interface UserDao extends CrudRepository&lt;User, Long&gt; {
    User findByUsername(String username);
}
</code></pre>

</div>



<p><strong>RoleDao</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.dao;

import com.alpha.model.Role;
import org.springframework.data.repository.CrudRepository;
import org.springframework.stereotype.Repository;

@Repository
public interface RoleDao extends CrudRepository&lt;Role, Long&gt; {
    Role findRoleByName(String name);
}
</code></pre>

</div>



<p>You can use <code>JPARepository</code> also.</p>

<p><strong>Service Layer</strong></p>

<p>We will now proceed to define service interfaces for our User and Role services. These service interfaces will serve as blueprints for the actual service implementations and will encapsulate the core business logic.</p>

<p>As a best practice, using interfaces for service definitions promotes separation of concerns and allows for easy switching of implementations, such as when using mocking frameworks for testing.<br>
<code>RoleService</code><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.service;

// Importing the Role model
import com.alpha.model.Role;

// Declaring the RoleService interface
public interface RoleService {
    // Method to find a Role by its name
    Role findByName(String name);
}

</code></pre>

</div>



<p><strong>UserService</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.service;

import com.alpha.model.User;
import com.alpha.model.UserDto;

import java.util.List;

public interface UserService {

    // Saves a user
    User save(UserDto user);

    // Retrieves all users
    List&lt;User&gt; findAll();

    // Retrieves a user by username
    User findOne(String username);

    User createEmployee(UserDto user);

}
</code></pre>

</div>



<p>Now we will implement our service logic <br>
<strong>RoleServiceImpl</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.service.impl;

import com.alpha.dao.RoleDao;
import com.alpha.model.Role;
import com.alpha.service.RoleService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

@Service(value = "roleService")
public class RoleServiceImpl implements RoleService {

    @Autowired
    private RoleDao roleDao;

    @Override
    public Role findByName(String name) {
        // Find role by name using the roleDao
        Role role = roleDao.findRoleByName(name);
        return role;
    }
}

</code></pre>

</div>



<p><strong>UserServiceImpl</strong><br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.service.impl;

import java.util.ArrayList;
import java.util.HashSet;
import java.util.List;
import java.util.Set;
import com.alpha.dao.UserDao;
import com.alpha.model.Role;
import com.alpha.model.User;
import com.alpha.model.UserDto;
import com.alpha.service.RoleService;
import com.alpha.service.UserService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.core.authority.SimpleGrantedAuthority;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.core.userdetails.UsernameNotFoundException;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.stereotype.Service;

@Service(value = "userService")
public class UserServiceImpl implements UserDetailsService, UserService {

    @Autowired
    private RoleService roleService;

    @Autowired
    private UserDao userDao;

    @Autowired
    private BCryptPasswordEncoder bcryptEncoder;

    // Load user by username
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        User user = userDao.findByUsername(username);
        if(user == null){
            throw new UsernameNotFoundException("Invalid username or password.");
        }
        return new org.springframework.security.core.userdetails.User(user.getUsername(), user.getPassword(), getAuthority(user));
    }

    // Get user authorities
    private Set&lt;SimpleGrantedAuthority&gt; getAuthority(User user) {
        Set&lt;SimpleGrantedAuthority&gt; authorities = new HashSet&lt;&gt;();
        user.getRoles().forEach(role -&gt; {
            authorities.add(new SimpleGrantedAuthority("ROLE_" + role.getName()));
        });
        return authorities;
    }

    // Find all users
    public List&lt;User&gt; findAll() {
        List&lt;User&gt; list = new ArrayList&lt;&gt;();
        userDao.findAll().iterator().forEachRemaining(list::add);
        return list;
    }

    // Find user by username
    @Override
    public User findOne(String username) {
        return userDao.findByUsername(username);
    }

    // Save user
    @Override
    public User save(UserDto user) {

        User nUser = user.getUserFromDto();
        nUser.setPassword(bcryptEncoder.encode(user.getPassword()));

        // Set default role as USER
        Role role = roleService.findByName("USER");
        Set&lt;Role&gt; roleSet = new HashSet&lt;&gt;();
        roleSet.add(role);

        // If email domain is admin.edu, add ADMIN role
        if(nUser.getEmail().split("@")[1].equals("admin.edu")){
            role = roleService.findByName("ADMIN");
            roleSet.add(role);
        }

        nUser.setRoles(roleSet);
        return userDao.save(nUser);
    }

    @Override
    public User createEmployee(UserDto user) {
        User nUser = user.getUserFromDto();
        nUser.setPassword(bcryptEncoder.encode(user.getPassword()));

        Role employeeRole = roleService.findByName("EMPLOYEE");
        Role customerRole = roleService.findByName("USER");

        Set&lt;Role&gt; roleSet = new HashSet&lt;&gt;();
        if (employeeRole != null) {
            roleSet.add(employeeRole);
        }
        if (customerRole != null) {
            roleSet.add(customerRole);
        }

        nUser.setRoles(roleSet);
        return userDao.save(nUser);
    }
}
</code></pre>

</div>



<p>lets create our controller class</p>

<p>The initial step for a user is to complete the registration process. At a minimum, users are required to provide a username and password. By invoking the service method to save the user, this essential step is completed.</p>

<p>To access the application's APIs securely, users must include a server-generated JWT (JSON Web Token). All the necessary groundwork for this has been laid out in our <code>TokenProvider</code>. We utilize the <code>generateToken</code> method and include the resulting token in the response, ensuring secure access to the APIs.<br>
<strong>UserController</strong><br>
<code>UserController</code> class handles user-related HTTP requests, including registration and authentication. It also demonstrates role-based access control for specific resources. The actual business logic for user operations is delegated to the UserService and <code>TokenProvider</code> components.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>package com.alpha.controller;

import com.alpha.config.TokenProvider;
import com.alpha.model.AuthToken;
import com.alpha.model.LoginUser;
import com.alpha.model.User;
import com.alpha.model.UserDto;
import com.alpha.service.UserService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.security.access.prepost.PreAuthorize;
import org.springframework.security.authentication.AuthenticationManager;
import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;
import org.springframework.security.core.Authentication;
import org.springframework.security.core.AuthenticationException;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@CrossOrigin(origins = "*", maxAge = 3600)
@RestController
@RequestMapping("/users")
public class UserController {

    @Autowired
    private AuthenticationManager authenticationManager;

    @Autowired
    private TokenProvider jwtTokenUtil;

    @Autowired
    private UserService userService;

    /**
     * Generates a token for the given user credentials.
     *
     * @param loginUser The user's login credentials.
     * @return A response entity containing the generated token.
     * @throws AuthenticationException if authentication fails.
     */
    @RequestMapping(value = "/authenticate", method = RequestMethod.POST)
    public ResponseEntity&lt;?&gt; generateToken(@RequestBody LoginUser loginUser) throws AuthenticationException {
        final Authentication authentication = authenticationManager.authenticate(
                new UsernamePasswordAuthenticationToken(
                        loginUser.getUsername(),
                        loginUser.getPassword()
                )
        );
        SecurityContextHolder.getContext().setAuthentication(authentication);
        final String token = jwtTokenUtil.generateToken(authentication);
        return ResponseEntity.ok(new AuthToken(token));
    }

    /**
     * Saves a new user.
     *
     * @param user The user to be saved.
     * @return The saved user.
     */
    @RequestMapping(value="/register", method = RequestMethod.POST)
    public User saveUser(@RequestBody UserDto user){
        return userService.save(user);
    }

    /**
     * Returns a message that can only be accessed by users with the 'ADMIN' role.
     *
     * @return A message that can only be accessed by admins.
     */
    @PreAuthorize("hasRole('ADMIN')")
    @RequestMapping(value="/adminping", method = RequestMethod.GET)
    public String adminPing(){
        return "Only Admins Can Read This";
    }

    /**
     * Returns a message that can be accessed by any user.
     *
     * @return A message that can be accessed by any user.
     */
    @PreAuthorize("hasRole('USER')")
    @RequestMapping(value="/userping", method = RequestMethod.GET)
    public String userPing(){
        return "Any User Can Read This";
    }

    @PreAuthorize("hasRole('ADMIN')")
    @RequestMapping(value="/create/employee", method = RequestMethod.POST)
    public User createEmployee(@RequestBody UserDto user){
        return userService.createEmployee(user);
    }

    @PreAuthorize("hasRole('ADMIN')")
    @RequestMapping(value="/find/all", method = RequestMethod.GET)
    public List&lt;User&gt; getAllList(){
        return userService.findAll();
    }

    @PreAuthorize("hasRole('ADMIN')")
    @RequestMapping(value="/find/by/username", method = RequestMethod.GET)
    public User getAllList(@RequestParam String username){
        return userService.findOne(username);
    }
}
</code></pre>

</div>



<p>These methods demonstrate role-based access control using Spring Security's <code>@PreAuthorize</code> annotation. <code>adminPing</code> can be accessed only by users with the 'ADMIN' role, while <code>userPing</code> can be accessed by users with the 'USER' role.</p>

<p>Before testing your apis you need to add some roles into your db<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>INSERT INTO role (id, description, name) VALUES (1, 'Admin role', 'ADMIN');
INSERT INTO role (id, description, name) VALUES (2, 'Employee role', 'EMPLOYEE');
INSERT INTO role (id, description, name) VALUES (3, 'User role', 'USER');
</code></pre>

</div>



<p>Finally you can test your apis in postman<br>
I have created collection for <a href="https://blue-flare-124005.postman.co/workspace/Spring-learning~a70a9e71-4aaf-4e10-aef0-f5ad15d16832/collection/27657088-4734fb4b-4e9c-44e7-a9dd-7985677b43c5?action=share&amp;creator=27657088">postman</a></p>

<p>Here is the whole code is in my <a href="https://github.com/alphaaman/Spring-RBAC-Using-JWT">github</a></p>

<p>If you find any doubt feel free to contact me on  <a href="https://www.instagram.com/_alpha_golf/?hl=en">Instagram</a><br>
Thanks for reading !<br>
Happy Coding !</p>

 </details> 
 <hr /> 
<!-- BLOG-POST-LIST:END -->
</table>
</details>


<!-- TODO
Change the 3stats boxes around, possibly two on top and one on bottom
Fix RSSfeed
Fix Spotify Playlists
Fix Socials [Portfolio, Discord, Linkedin]
In the future, add Public Repositories of Selected Projects
-->
