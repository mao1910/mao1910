<!-- VISITOR BADGE -->
<!-- https://github.com/hehuapei/visitor-badge -->

<img align="right" src="https://visitor-badge.laobi.icu/badge?page_id=mao1910.mao1910&left_color=%2379DAF9&right_color=%23FE6E96" />


<!-- TYPING SVG -->
<!-- https://github.com/DenverCoder1/readme-typing-svg -->

<h1 align="center">
    <img src="https://readme-typing-svg.herokuapp.com/?font=Righteous&size=35&center=true&vCenter=true&width=500&height=70&color=FE6E96&font=poppins&duration=5000&lines=Hi+There!+üëã;+I'm+Mao!;" />
</h1>

<br/>


<!-- ABOUT ME TERMINAL -->
<h1 align="center">
<img src="./assets/terminal-5.gif" alt="Terminal" />
</h1>

<br/><br/><br/>


<!-- TECHNOLOGIES LOGOS -->
<!-- https://github.com/tandpfun/skill-icons -->

<h2 align="center">üíª Languages / Frameworks / Tools ‚öíÔ∏è</h2>
<div align="center">
    <img src="https://skillicons.dev/icons?i=javascript,typescript,angular,react,html,css,scss,bootstrap,cs,java,spring" />
    <img src="https://skillicons.dev/icons?i=flutter,firebase,supabase,mysql,git,github,gitlab,vscode,idea,maven,figma" />
</div>

<br/><br/><br/>


<!-- CONTRIBUTIONS SNAKE GAME -->
<!-- https://github.com/Platane/snk -->

<div align="center">
  <h2> My Contributionssssüêç </h2>
  <br>
  <img alt="contributions-eating Snake" src="https://raw.githubusercontent.com/mao1910/mao1910/output/github-contribution-grid-snake.svg" />

  <!-- Four lines below suggested by Planate for Dark mode-->
  <picture>
  <source media="(prefers-color-scheme: dark)" srcset="github-snake-dark.svg" />
  <source media="(prefers-color-scheme: light)" srcset="github-snake.svg" />
  </picture>
  
  <br/><br/><br/>
</div>


<!-- GITHUB STATS -->
<!-- https://github.com/DenverCoder1/github-readme-streak-stats --> <!--  My own Vercel deployment -->
<!-- https://github.com/anuraghazra/github-readme-stats --> <!--  My own Vercel -->

<h2 align="center"> Statsüìù </h2>
  <br>
<div align=center>
  <img width=429 src="https://github-readme-stats-mao1910.vercel.app/api?username=mao1910&count_private=true&show_icons=true&theme=dracula&rank_icon=github&hide=contribs&border_radius=10&border_color=79DAF9" alt="github stats"/>
  <img width=396 src="https://github-readme-streak-stats-2235.vercel.app?user=mao1910&count_private=true&theme=dracula&currStreakNum=79DAF9&currStreakLabel=FE6E96&border_radius=10&border=79DAF9" alt="streak stats"/>
  <br/>
  <img src="https://github-readme-stats-mao1910.vercel.app/api/top-langs/?username=mao1910&layout=compact&theme=dracula&border_radius=10&size_weight=0.5&count_weight=0.5&border_color=79DAF9" alt="languages stats" />
</div>

<br/><br/><br/>


<!-- FOOTER -->
<!-- https://github.com/DenverCoder1/readme-typing-svg -->
<!-- https://readme-typing-svg.demolab.com/demo/ -->

<a href="https://git.io/typing-svg"><img src="https://readme-typing-svg.demolab.com?font=Poppins&pause=1000&color=FE6E96&width=535&lines=Thanks+for+dropping+by!;Feel+free+to+check+any+of+the+Socials+below+%F0%9F%91%87;Or+the+Joke+Of+The+Day+if+you're+down+for+a+giggle+%F0%9F%98%9D;Hope+to+see+you+again+%F0%9F%91%8A;Uh%3F+You're+still+here%3F;Well...+I'm+running+out+of+things+to+say...;Tell+you+what%2C+due+to+your+effort+and+perseverance%2C;I+shall+present+you+with+a+short+poem%3A;%22To+code%2C+or+not+to+code%2C+that+is+the+question%3A;Whether+'tis+nobler+in+the+IDE+to+debug;The+errors+and+issues+of+outrageous+software%2C;Or+to+take+up+the+keyboard+against+a+sea+of+bugs;And+by+coding%2C+end+them.%22;by+William+Shakespeare%2C+probably.+;Pretty+sure+that's+Hamlet's.;Alrighty%2C+this+has+been+fun.;But+I'll+restart+the+loop+now...+see+ya+soon!" alt="Typing SVG" /></a>


<!--  SOCIAL NETWORKS -->
<!-- https://github.com/alexandresanlim/Badges4-README.md-Profile -->

  <div> 
    <a href="https://www.deviantart.com/madeinkobaia/art/my-profile-is-under-construction-265626465" target="_blank"><img src="https://img.shields.io/badge/-LinkedIn-%230077B5?style=for-the-badge&logo=linkedin&logoColor=white" target="_blank"></a> <!-- ADD LINKEDIN PROFILE -->
    <a href = "https://www.nicepng.com/ourpic/u2q8o0t4t4r5o0r5_website-under-construction-png-graphic-transparent-website-under/"><img src="https://img.shields.io/badge/Portfolio-4285F4?style=for-the-badge&logo=Google-chrome&logoColor=white" target="_blank"></a> <!-- ADD PORTFOLIO WEBSITE -->
    <a href="https://discord.gg" target="_blank"><img src="https://img.shields.io/badge/Discord-7289DA?style=for-the-badge&logo=discord&logoColor=white" target="_blank"></a> <!-- ADD DISCORD --> <!-- User or Server? -->
    <a href = "mailto:mao1910dev@gmail.com"><img src="https://img.shields.io/badge/Gmail-D14836?style=for-the-badge&logo=gmail&logoColor=white" target="_blank"></a>
  </div>


<!-- SPOTIFY PLAYING-->
<!-- https://github.com/novatorem/novatorem --> <!-- My own Vercel deployment-->

[<img width=438px src="https://spotify-now-playing-git-main-mao1910.vercel.app//api/spotify/?border_color=FE6E96" alt="Mao Spotify Now Playing" />](https://open.spotify.com/user/31542et242zglhf42ydrtqgvuvde)


<!-- JOKE OF THE DAY -->
<!-- https://github.com/ABSphreak/readme-jokes --> <!-- My own Vercel deployment-->

<details>
<summary>I've got a Joke for you. Wanna hear it? üôà</summary>

<br/>

 <tr>
 <td style="padding-top:4px"><img src = "https://readme-jokes-git-master-mao1910.vercel.app/api?&theme=dracula"></td>
 </tr>

</details>


<!-- RSS FEED -->
<!-- https://github.com/gautamkrishnar/blog-post-workflow -->

<details>
<summary>üìï &nbsp;RSS feed</summary>

<br/>


<!-- BLOG-POST-LIST:START -->
 #### - [Is Debugging Really More Fun Than Coding?](https://dev.to/codenewbieteam/is-debugging-really-more-fun-than-coding-2ha1) 
 <details><summary>Article</summary> <p>üé§üîä <em>Hey all tech enthusiasts, it's time to rumble in the digital jungle! In one corner, we've got bold and controversial tech statements, ready to assert their dominance. And in the other corner, we've got you, the fearless challengers, set to prove 'em wrong! Get ready to rumble as we dive into debates, challenge the status quo, and wrestle with some of the biggest questions in tech!</em></p>

<blockquote>
<p>Prove me wrong: Debugging is more enjoyable than writing code.</p>
</blockquote>

<p>Follow the <a href="https://dev.to/codenewbieteam">CodeNewbie Org</a> and <a href="https://dev.to/t/codenewbie">#codenewbie</a> for more discussions and online camaraderie!</p>

<p><em><div class="ltag__user ltag__user__id__2167">
  <a href="/codenewbieteam" class="ltag__user__link profile-image-link">
    <div class="ltag__user__pic">
      <a href="https://res.cloudinary.com/practicaldev/image/fetch/s--DL6l24W8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://res.cloudinary.com/practicaldev/image/fetch/s--gvVCmWqP--/c_fill%2Cf_auto%2Cfl_progressive%2Ch_150%2Cq_auto%2Cw_150/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/2167/a575e4d1-42a8-471a-ab8a-a9240b002aa8.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--DL6l24W8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://res.cloudinary.com/practicaldev/image/fetch/s--gvVCmWqP--/c_fill%2Cf_auto%2Cfl_progressive%2Ch_150%2Cq_auto%2Cw_150/https://dev-to-uploads.s3.amazonaws.com/uploads/organization/profile_image/2167/a575e4d1-42a8-471a-ab8a-a9240b002aa8.png" alt="codenewbieteam image"></a>
    </div>
  </a>
  <div class="ltag__user__content">
    <h2>
      <a href="/codenewbieteam" class="ltag__user__link">CodeNewbie</a>
      Follow
    </h2>
    <div class="ltag__user__summary">
      <a href="/codenewbieteam" class="ltag__user__link">
        The most supportive community of programmers and people learning to code.  Part of the DEV family.


      </a>
    </div>
  </div>
</div>
</em> </p>

 </details> 
 <hr /> 

 #### - [Vuex or Pinia](https://dev.to/aditianand8/vuex-or-pinia-39m) 
 <details><summary>Article</summary> <p>Pinia and Vuex are state management libraries for Vue.js, a popular JavaScript framework for building user interfaces. They serve the same fundamental purpose: to manage your application's state and provide a centralized way to handle data and its mutations. However, they have some differences in design philosophy and usage.</p>

<p><strong>-- Architecture--</strong></p>

<ul>
<li><p><strong>Vuex:</strong> Vuex follows a traditional centralized store pattern. It provides a single store that holds the entire application's state, and components can access and mutate this state through predefined actions and mutations.</p></li>
<li><p><strong>Pinia:</strong> Pinia, on the other hand, promotes a more modular and decentralized approach. It allows you to create multiple stores, each responsible for managing its own state. This can lead to a more organized and maintainable codebase, especially in larger applications.</p></li>
</ul>

<p><strong>--TypeScript Support--</strong></p>

<ul>
<li><p><strong>Vuex:</strong> While Vuex can be used with TypeScript, it doesn't offer built-in TypeScript support out of the box. You need to write additional type definitions for your store, actions, mutations, and getters.</p></li>
<li><p><strong>Pinia:</strong> Pinia was designed with TypeScript in mind, so it provides better out-of-the-box TypeScript support. This can make your code more type-safe and easier to refactor.</p></li>
</ul>

<p><strong>--Composition API--</strong></p>

<ul>
<li><p><strong>Vuex:</strong> Vuex can be used with both the Options API and Composition API in Vue.js 3. However, using Vuex with the Composition API can be somewhat verbose and may require additional setup.</p></li>
<li><p><strong>Pinia:</strong> Pinia integrates seamlessly with the Composition API, making it a natural choice if you're building Vue 3 applications using the Composition API. Its API design aligns well with the Composition API's reactivity system.</p></li>
</ul>

<p><strong>--Ease of Use--</strong></p>

<ul>
<li><p><strong>Vuex:</strong> Vuex has been around longer and has a larger community and ecosystem. It's well-documented and has a wide range of plugins and extensions available.</p></li>
<li><p><strong>Pinia:</strong> Pinia is relatively newer compared to Vuex, so it may have a smaller community and fewer third-party plugins and extensions. However, some developers find its API and concepts easier to understand and work with, especially when using TypeScript.</p></li>
</ul>

<p><strong>--Bundle Size--</strong></p>

<ul>
<li><p><strong>Vuex:</strong> Vuex is included in the official Vue.js package, which means it comes bundled with Vue.js by default. This can result in a larger bundle size, even if you're not using Vuex in your project.</p></li>
<li><p><strong>Pinia:</strong> Pinia is a standalone library, so it doesn't add to the bundle size of your application unless you explicitly include it. This can be an advantage in terms of keeping your bundle size small.</p></li>
</ul>

<p>The coding style for Pinia and Vuex can vary, as they have different approaches to state management in Vue.js applications. Below, I'll outline some of the key differences in coding style when using Pinia compared to Vuex:</p>

<p><strong>--Coding Style Examples--</strong></p>

<ul>
<li><strong>Pinia:</strong></li>
</ul>

<p><strong>Modularization</strong> Pinia encourages a more modular approach to state management. You typically create multiple stores, each responsible for managing a specific piece of state or domain. This leads to a more organized codebase with smaller, focused stores.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code>   <span class="c1">// Defining a Pinia store</span>
   <span class="k">import</span> <span class="p">{</span> <span class="nx">defineStore</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">pinia</span><span class="dl">'</span><span class="p">;</span>

   <span class="k">export</span> <span class="kd">const</span> <span class="nx">useMyStore</span> <span class="o">=</span> <span class="nx">defineStore</span><span class="p">(</span><span class="dl">'</span><span class="s1">myStore</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
     <span class="na">state</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">({</span>
       <span class="na">count</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
     <span class="p">}),</span>
     <span class="na">actions</span><span class="p">:</span> <span class="p">{</span>
       <span class="nx">increment</span><span class="p">()</span> <span class="p">{</span>
         <span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span><span class="p">;</span>
       <span class="p">},</span>
     <span class="p">},</span>
   <span class="p">});</span>
</code></pre>

</div>



<p><strong>Composition API</strong> Pinia integrates seamlessly with Vue 3's Composition API, which encourages using <code>ref</code>, <code>computed</code>, and <code>reactive</code> for defining and working with state. This aligns well with the Composition API's reactivity system.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code>   <span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span><span class="p">,</span> <span class="nx">computed</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span><span class="p">;</span>

   <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
     <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
       <span class="kd">const</span> <span class="nx">count</span> <span class="o">=</span> <span class="nx">useMyStore</span><span class="p">().</span><span class="nx">count</span><span class="p">;</span> <span class="c1">// Accessing store state</span>
       <span class="kd">const</span> <span class="nx">doubleCount</span> <span class="o">=</span> <span class="nx">computed</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">count</span><span class="p">.</span><span class="nx">value</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span> <span class="c1">// Computed property</span>

       <span class="k">return</span> <span class="p">{</span>
         <span class="nx">count</span><span class="p">,</span>
         <span class="nx">doubleCount</span><span class="p">,</span>
       <span class="p">};</span>
     <span class="p">},</span>
   <span class="p">};</span>
</code></pre>

</div>



<p><strong>TypeScript Support</strong> Pinia is designed with TypeScript in mind and provides excellent TypeScript support out of the box. You can strongly type your state, actions, mutations, and getters, which leads to more type-safe code.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight typescript"><code>   <span class="c1">// Strongly typing store state</span>
   <span class="kr">interface</span> <span class="nx">MyStoreState</span> <span class="p">{</span>
     <span class="nl">count</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="k">export</span> <span class="kd">const</span> <span class="nx">useMyStore</span> <span class="o">=</span> <span class="nx">defineStore</span><span class="p">(</span><span class="dl">'</span><span class="s1">myStore</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
     <span class="na">state</span><span class="p">:</span> <span class="p">():</span> <span class="nx">MyStoreState</span> <span class="o">=&gt;</span> <span class="p">({</span>
       <span class="na">count</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
     <span class="p">}),</span>
     <span class="c1">// ...</span>
   <span class="p">});</span>
</code></pre>

</div>



<ul>
<li><strong>Vuex:</strong></li>
</ul>

<p><strong>Centralized Store</strong> Vuex follows a centralized store pattern, where all application state is stored in a single global store. Actions and mutations are defined to interact with this central store.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code>   <span class="c1">// Defining a Vuex store</span>
   <span class="k">import</span> <span class="p">{</span> <span class="nx">createStore</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vuex</span><span class="dl">'</span><span class="p">;</span>

   <span class="k">export</span> <span class="k">default</span> <span class="nx">createStore</span><span class="p">({</span>
     <span class="na">state</span><span class="p">:</span> <span class="p">{</span>
       <span class="na">count</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
     <span class="p">},</span>
     <span class="na">mutations</span><span class="p">:</span> <span class="p">{</span>
       <span class="nx">increment</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">state</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span><span class="p">;</span>
       <span class="p">},</span>
     <span class="p">},</span>
     <span class="na">actions</span><span class="p">:</span> <span class="p">{</span>
       <span class="nx">incrementAsync</span><span class="p">({</span> <span class="nx">commit</span> <span class="p">})</span> <span class="p">{</span>
         <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
           <span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">increment</span><span class="dl">'</span><span class="p">);</span>
         <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
       <span class="p">},</span>
     <span class="p">},</span>
   <span class="p">});</span>
</code></pre>

</div>



<p><strong>Options API and Composition API</strong> Vuex can be used with both the Options API and Composition API in Vue.js 3. When using the Options API, you define computed properties and methods within components to access and update state.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code>   <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
     <span class="na">computed</span><span class="p">:</span> <span class="p">{</span>
       <span class="nx">count</span><span class="p">()</span> <span class="p">{</span>
         <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">count</span><span class="p">;</span> <span class="c1">// Accessing store state</span>
       <span class="p">},</span>
     <span class="p">},</span>
     <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
       <span class="nx">increment</span><span class="p">()</span> <span class="p">{</span>
         <span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">increment</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Committing a mutation</span>
       <span class="p">},</span>
     <span class="p">},</span>
   <span class="p">};</span>
</code></pre>

</div>



<p>When using the Composition API with Vuex, you'll often use <code>useStore</code> to access the store instance within your components.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight javascript"><code>   <span class="k">import</span> <span class="p">{</span> <span class="nx">useStore</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vuex</span><span class="dl">'</span><span class="p">;</span>

   <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
     <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
       <span class="kd">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">useStore</span><span class="p">();</span>
       <span class="kd">const</span> <span class="nx">count</span> <span class="o">=</span> <span class="nx">computed</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">store</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">count</span><span class="p">);</span> <span class="c1">// Accessing store state</span>

       <span class="kd">const</span> <span class="nx">increment</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
         <span class="nx">store</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">increment</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Committing a mutation</span>
       <span class="p">};</span>

       <span class="k">return</span> <span class="p">{</span>
         <span class="nx">count</span><span class="p">,</span>
         <span class="nx">increment</span><span class="p">,</span>
       <span class="p">};</span>
     <span class="p">},</span>
   <span class="p">};</span>
</code></pre>

</div>



<p>To sum up, Pinia and Vuex have different coding styles based on their fundamental design philosophies. Pinia prioritizes a modular, Composition API-centered, and strongly typed method, while Vuex follows a more centralized, Options API-friendly pattern. When choosing between them, it's important to consider your project's requirements and your team's coding preferences.</p>

<p>Ultimately, the decision between Pinia and Vuex comes down to your project needs and personal preferences. If you prefer a more modular and TypeScript-friendly approach, Pinia may be the right choice for you. However, if you're already experienced with Vuex and prefer the centralized store pattern or your project already uses Vuex, it's best to stick with it. Both libraries are effective in managing the state within Vue.js applications.</p>

 </details> 
 <hr /> 

 #### - [Data migrations in regular migrations and why you (probably) should not do that](https://dev.to/katafrakt/data-migrations-in-regular-migrations-and-why-you-probably-should-not-do-that-2eem) 
 <details><summary>Article</summary> <p>Every once in a while I read Lucian Ghinda's <a href="https://newsletter.shortruby.com/">Short Ruby</a> newsletter and I see a "take" there which begs for some elaboration and at least slight disagreement. So I decided to try to write these short (but too long for a tweet) replies here.</p>




<p>Today's topic comes from <a href="https://newsletter.shortruby.com/p/edition-59">issue #59</a>, where Matt Swanson touches the topic of data migrations.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--EqlDq49s--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/niyt8f4q4lckdm6q1ec4.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--EqlDq49s--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/niyt8f4q4lckdm6q1ec4.png" alt="Image description" width="800" height="378"></a></p>

<p>(here is <a href="https://nitter.net/_swanson/status/1701704048947396844">a link</a> to the tweet)</p>

<p>So what's wrong here? I think the first of all we need to divide what Matt conveniently put together, because "don't reference Rails models in migrations" and "don't run data migrations in schema migrations" are two separate rules coming from different backgrounds.</p>

<h2>
  
  
  Don't reference models
</h2>

<p>The rule of not referencing models relies on the fact that the code of the models change and it might change a lot. In fact, the assumption here is that the migration referencing a model will successfully run on Monday, but won't run on Thursday, because the model file changed and the assumptions made in migration code are no longer correct.</p>

<p>I generally agree that the points in the tweet can greatly reduce the risk of that happening. Although at the same time these points are not realistic. Just how would you "run migrations in dev often" during your two-weeks vacations? Fortnight is definitely enough time in larger projects for model and migration to go out of sync, resulting in a migration not being able to run.</p>

<p>However, I don't want to sweat on it, because that's up to your team if you want to take this risk. The second part is much more interesting.</p>

<h2>
  
  
  Don't run data migrations along schema migrations
</h2>

<p>Let's say it out loud: the migrations were thought as a tool to consistently modify database <strong>schema</strong> across the environments. If you don't believe me, just check how the table keeping track of the migrations already run is called.</p>

<p>However, in time, people started to use it to run data migrations too. It have few obvious upsides:</p>

<ul>
<li>You already have a tool for that</li>
<li>Everyone in your organization is expected to run migrations in dev environment regularly, so they will have their data in sync automatically. You don't need to announce on Slack that "everyone please run <code>rake data:backfill_order_numbers</code>".</li>
<li>You already have a step of running it in your deployment pipeline and you don't have to add anything new</li>
</ul>

<p>In my experience, these advantages start to fade when the project (and especially the database) grows. Here are some problem I encountered with this approach:</p>

<ul>
<li>Data migrations can take a lot of time. If you put schema change with data migration in the same file, you might and up with a table locked exclusively for a prolonged amount of time, effectively bringing your app down.</li>
<li>Data in production database is often far more exotic than in staging/test environments. The migration might pass on staging, but will fail on production, because some weird data in the database. Now your pipeline is blocked and you either have to revert or submit a hotfix.</li>
<li>It's not uncommon to have parameterized data migrations, where you first run it for only some tenants or just in some countries. When you check that everything works fine, you proceed with another batch.</li>
<li>You have little control over when the data migration is run. In my current company, for example, you just put your PR in a merge queue and you don't really know when it will be merged (and deployed). Sometimes it's hours later. With data migrations, that might put significant stress on the database, it's better to have very strict control when it's run.</li>
<li>Similarly, you might want to merge and deploy the code during working hours, but run the data migration in off-hours (or even during the weekend). But you have coupled one to the other, so you cannot really do that.</li>
<li>Last but definitely not least: if you write your data migration as a rake task, you can actually write tests for it. Do you write tests for your migrations?</li>
</ul>

<p>To me personally, these points highly outweigh the comfort of using schema migrations for data migrations. Sure, you lost the comfort of using the tool that's already there, but at the same time you put the stability of the app, the well-being of the whole team and your peace of mind at risk.</p>

<p>So I guess my "counter-take" is:</p>

<p>At least think of having the process of running data migrations in separation from your schema migrations, knowing what's at stake.</p>

 </details> 
 <hr /> 

 #### - [How Progressive Web Apps (PWS) are Changing the Game](https://dev.to/codewithshahan/how-progressive-web-apps-pws-are-changing-the-game-29g9) 
 <details><summary>Article</summary> <p><strong>ü•¢Introduction:</strong></p>

<p>Hey there, folks! Welcome back. Today, we're diving into a hot topic in the tech world - Progressive Web Apps, or PWAs. But don't worry, we'll break it down into plain English, so you'll understand what all the buzz is about.</p>

<p><strong>üîëWhat Are PWAs?</strong></p>

<p>Let's start with the basics. Progressive Web Apps are a type of web application that can run on any device with a modern web browser. They offer a native app-like experience right in your browser, and here's the best part - you don't need to download them from an app store.</p>

<p>Before we proceed, if you're feeling a bit bored right now, you can switch to the <a href="https://youtu.be/ha8SjUM0CBU">100-second video</a> version where I've condensed all the information from this article for you:<br>
<iframe width="710" height="399" src="https://www.youtube.com/embed/ha8SjUM0CBU">
</iframe>
</p>

<p><strong>üîëAdvantages of PWAs:</strong></p>

<ol>
<li><p><strong>Offline Access</strong>: PWAs can work even when you're not connected to the internet. This is because they can cache data, so you can still use them in airplane mode or in areas with poor connectivity.</p></li>
<li><p><strong>Cross-Platform Compatibility</strong>: Whether you're using a smartphone, tablet, or desktop, PWAs adapt to your device. No need for separate apps for each platform.</p></li>
<li><p><strong>No Downloads or Updates</strong>: Forget about app stores and constant updates. PWAs are always up to date because they're served directly from the web.</p></li>
<li><p><strong>Fast Loading</strong>: PWAs are designed for speed. They load quickly, making for a smooth user experience.</p></li>
<li><p><strong>Low Data Usage</strong>: They're data-efficient, so you won't blow through your mobile data plan.</p></li>
</ol>

<p><strong>‚õ≥How Do PWAs Work?</strong></p>

<p>Now, let's peek under the hood to see how PWAs work:</p>

<ol>
<li><p><strong>Service Workers</strong>: These are the magic behind offline access. Service workers are scripts that run in the background and can intercept network requests, allowing the PWA to serve cached content when you're offline.</p></li>
<li><p><strong>Manifest File</strong>: PWAs have a manifest file that tells the browser how the app should behave when it's added to the home screen. You can think of it as the app's blueprint.</p></li>
<li><p><strong>Responsive Design</strong>: PWAs are designed to be responsive, meaning they adapt to different screen sizes and orientations.</p></li>
</ol>

<p><strong>üì≤How to Install PWAs:</strong></p>

<p>So, how do you get a PWA on your device? It's super easy!</p>

<ol>
<li><p><strong>Chrome (Android)</strong>: When you visit a PWA-enabled website, you'll often see a prompt to add it to your home screen. Just tap 'Add'!</p></li>
<li><p><strong>Safari (iOS)</strong>: Open Safari, navigate to the PWA, tap the Share button, and choose 'Add to Home Screen.'</p></li>
</ol>

<p><strong>üéàExamples of PWAs:</strong></p>

<p>Alright, let's look at some examples of PWAs you might already be using:</p>

<ol>
<li><p><strong>Twitter Lite</strong>: This PWA offers a streamlined version of Twitter that loads quickly and works offline.</p></li>
<li><p><strong>Flipkart</strong>: The popular Indian e-commerce site has a PWA that lets you shop seamlessly on any device.</p></li>
<li><p><strong>Uber</strong>: Uber's PWA lets you book rides and track drivers without downloading their app.</p></li>
</ol>

<p><strong>üößConclusion:</strong></p>

<p>And there you have it - Progressive Web Apps in plain English. They're fast, reliable, and save you from the hassle of app stores. So, next time you're browsing the web on your phone or computer, keep an eye out for those PWAs, and give them a try!</p>

<p>You can follow me on <a href="https://www.twitter.com/shahancd">Twitter</a>/<a href="https://www.instagram.com/shahancd">Instagram</a>.</p>

 </details> 
 <hr /> 

 #### - [How to write a CRUD CLI using Elixir and ScyllaDB](https://dev.to/guto/how-to-write-a-crud-cli-using-elixir-and-scylladb-4bek) 
 <details><summary>Article</summary> <p>If you know high traffic applications for communication, applications that need low latency and good fault tolerance, you have most likely already come across the names Elixir (as a programming language) and ScyllaDB (being a database NoSQL aimed at low latency). The objective of both is very similar: to work with applications that generally require greater care for stability.</p>

<p>ScyllaDB is recognized worldwide as an extremely fast database, being based on Apache Cassandra, bringing several improvements for low latency. Furthermore, ScyllaDB is completely free, open source, and is distributed under the GNU AGPL license.</p>

<p>Elixir, on the other hand, is a programming language known for dealing very well with the applicability of concepts such as concurrency and fault tolerance and this is thanks to the Erlang ecosystem, which in this case, Elixir makes use of the virtual machine called BEAM, designed specifically to work with high-volume messaging applications.</p>

<p>The purpose of this article is to offer an introduction to how you can create your first application using both, opening doors and possibilities for your future with development with these two incredible technologies.</p>

<h2>
  
  
  Table of Contents
</h2>

<ul>
<li>
Starting the project

<ul>
<li>Installing Elixir</li>
<li>Installing ScyllaDB</li>
<li>Starting our project</li>
</ul>


</li>
<li>
Configuring the project

<ul>
<li>Defining dependencies</li>
<li>Configuring .env</li>
<li>Defining our connection module</li>
</ul>


</li>
<li>Implementing actions with the database</li>
<li>
Commands

<ul>
<li>Add</li>
<li>List</li>
<li>Delete</li>
<li>Stress</li>
</ul>


</li>
<li>Implementing user interaction</li>
<li>Running our application</li>
<li>Conclusion</li>
</ul>

<h2>
  
  
  Starting the project
</h2>

<p>Beforehand we need to install both Elixir and ScyllaDB. I won't go into too much detail about the installation because this makes the article simpler. So let's start with installing Elixir.</p>

<h3>
  
  
  Installing Elixir
</h3>

<p>To install Elixir in general, there are two main methods: installing directly from your package manager or using a version manager for programming languages. In my case I will be using <code>asdf</code> as responsible for managing my Elixir versions. If you want to install Elixir using your package manager, click <a href="https://elixir-lang.org/install.html">here</a> to receive more information.</p>

<p>To install <code>asdf</code> you can check by clicking <a href="https://asdf-vm.com/guide/getting-started.html">here</a>. As a preference, I always choose to install with "Bash &amp; Git" or "Zsh &amp; Git". Once installed, we will prepare the installation to receive the latest version of Erlang and Elixir in our project. To install Erlang:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>asdf plugin add erlang https://github.com/asdf-vm/asdf-erlang.git

<span class="nv">$ </span>asdf <span class="nb">install </span>erlang latest

<span class="nv">$ </span>asdf global erlang latest
</code></pre>

</div>



<blockquote>
<p>Did you have any problems with the installation? Access the <a href="https://github.com/asdf-vm/asdf-erlang">official guide</a>.</p>
</blockquote>

<p>To install Elixir:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>asdf plugin-add elixir https://github.com/asdf-vm/asdf-elixir.git

<span class="nv">$ </span>asdf <span class="nb">install </span>elixir latest

<span class="nv">$ </span>asdf global elixir latest
</code></pre>

</div>



<blockquote>
<p>Did you have any problems with the installation? Access the <a href="https://github.com/asdf-vm/asdf-elixir">official guide</a>.</p>
</blockquote>

<p>Well, now that we have both installed we can test to see if everything is ok by typing <code>elixir -v</code> in our terminal emulator and we will get a response similar to:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>Erlang/OTP 25 [erts-13.2.2.2] [source] [64-bit]

Elixir 1.13.4 (compiled with Erlang/OTP 23)
</code></pre>

</div>



<blockquote>
<p>These are my installed versions for Erlang and Elixir. If you want to install the same versions as me on your machine, just modify the <code>asdf install</code> command, replacing <code>latest</code> with the version number and then set it to <code>asdf global elixir 1.13.4</code> in this case.</p>
</blockquote>

<h3>
  
  
  Installing ScyllaDB
</h3>

<p>There are several ways to use ScyllaDB, which you can use with <a href="https://www.scylladb.com/product/scylla-cloud/">ScyllaDB Cloud</a>, with ScyllaDB <a href="//https%20://opensource.docs.scylladb.com/stable/getting-started/install-scylla/">installed on your machine</a> or the way I will use it: with Docker containers.</p>

<p>If you don't already have Docker installed, I recommend accessing the [installation] guide (<a href="https://docs.docker.com/engine/install/">https://docs.docker.com/engine/install/</a>). If you want to use ScyllaDB Cloud or ScyllaDB installed on your machine, there's no problem, just be careful when placing the node links when initializing and configuring the project, but when we get to this part I'll explain it better.</p>

<p>Well, continuing... To run our container with ScyllaDB in Docker we will use the following command:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>docker run <span class="nt">--name</span> some-scylla <span class="nt">-p</span> 9042:9042 <span class="nt">-d</span> scylladb/scylla
</code></pre>

</div>



<p>The <code>-p</code> option indicates that we want to bind port 9042 of the container with port 9042 of our machine, allowing our container to now be accessed directly on our <code>localhost:9042</code>.</p>

<p>For test the connection, after executing the command, wait a few seconds for everything to start correctly in the container and then type:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>docker <span class="nb">exec</span> <span class="nt">-it</span> some-scylla cqlsh
</code></pre>

</div>



<p>So you will see a response similar to:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>Connected to at 172.17.0.2:9042.
[cqlsh 5.0.1 | Cassandra 3.0.8 | CQL spec 3.3.1 | Native protocol v4]
Use HELP for help.
cqlsh&gt; 
</code></pre>

</div>



<p>This is our console where we can execute commands to interact with ScyllaDB. By default, the language used is <a href="https://cassandra.apache.org/doc/latest/cassandra/cql/">CQL (Cassandra Query Language)</a>, very similar to the standard database SQL that you probably have already had contact.</p>

<p>Well, let's run a simple command to describe all the <code>keyspaces</code> we have in our container. <code>keyspaces</code> could be defined with a simple analogy: keyspace is basically the same as database when you use a relational database like MySQL or PostgreSQL for example (the definition goes <em>a little beyond that</em>, but I won't go into it very).</p>

<p>To describe your <code>keyspaces</code> run:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="n">cqlsh</span><span class="o">&gt;</span> <span class="k">DESCRIBE</span> <span class="n">KEYSPACES</span><span class="p">;</span>
</code></pre>

</div>



<p>And you should see a response similar to:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>system_schema system_traces system_distributed
</code></pre>

</div>



<p>We haven't created any <code>keyspace</code> yet, right? Well, let's create our keyspace, which in this case is for a <code>media_player</code>, with the command:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="n">cqlsh</span><span class="o">&gt;</span> <span class="k">CREATE</span> <span class="n">KEYSPACE</span> <span class="n">media_player</span>
     <span class="k">WITH</span> <span class="n">replication</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'class'</span><span class="p">:</span> <span class="s1">'NetworkTopologyStrategy'</span><span class="p">,</span> <span class="s1">'replication_factor'</span><span class="p">:</span> <span class="s1">'3'</span><span class="p">}</span>
     <span class="k">AND</span> <span class="n">durable_writes</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</code></pre>

</div>



<p>And let's create the table:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight sql"><code><span class="n">cqlsh</span><span class="o">&gt;</span> <span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">media_player</span><span class="p">.</span><span class="n">songs</span> <span class="p">(</span>
     <span class="n">id</span> <span class="n">uuid</span><span class="p">,</span>
     <span class="n">titletext</span><span class="p">,</span>
     <span class="n">album</span> <span class="nb">text</span><span class="p">,</span>
     <span class="n">artist</span> <span class="nb">text</span><span class="p">,</span>
     <span class="n">created_at</span> <span class="nb">timestamp</span><span class="p">,</span>
     <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">created_at</span><span class="p">)</span>
<span class="p">);</span>
</code></pre>

</div>



<h3>
  
  
  Starting our project
</h3>

<p>For start a new project, run the command:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>mix new media_player
</code></pre>

</div>



<blockquote>
<p><a href="https://elixir-lang.org/getting-started/mix-otp/introduction-to-mix.html">Mix</a> is much more than a dependency manager for Elixir, after all, with it we can run and manage our entire project. By default, Mix is already installed together with Elixir.</p>
</blockquote>

<p>And a project will be created with the structure:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>.
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ lib
‚îÇ   ‚îî‚îÄ‚îÄ media_player.ex
‚îú‚îÄ‚îÄ mix.exs
</code></pre>

</div>



<p>Well, now that we have our project initialized, we can start playing, so open your favorite code editor and let's go.</p>

<h2>
  
  
  Configuring the project
</h2>

<p>At this point we will configure our project in Elixir to install and use all the tools necessary to build our CLI, in addition to defining the first settings.</p>

<h3>
  
  
  Defining dependencies
</h3>

<p>After opening your code editor, notice that there is a file named <code>mix.exs</code>. This file is responsible for defining several attributes about our project, including the dependencies that will be used during its development.</p>

<p>Going down the page a little you will see an area that starts with <code>defp deps do</code>... Exactly in this part we will modify and insert the following dependencies:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight elixir"><code><span class="c1"># Run "mix help deps" to learn about dependencies.</span>
<span class="k">defp</span> <span class="n">deps</span>
  <span class="p">[</span>
    <span class="p">{</span><span class="ss">:dotenv</span><span class="p">,</span> <span class="s2">"~&gt; 3.0"</span><span class="p">},</span>
    <span class="p">{</span><span class="ss">:decimal</span><span class="p">,</span> <span class="s2">"~&gt; 1.0"</span><span class="p">},</span>
    <span class="p">{</span><span class="ss">:xandra</span><span class="p">,</span> <span class="s2">"~&gt; 0.14"</span><span class="p">},</span>
    <span class="p">{</span><span class="ss">:elixir_uuid</span><span class="p">,</span> <span class="s2">"~&gt; 1.2"</span><span class="p">}</span>
  <span class="p">]</span>
<span class="k">end</span>
</code></pre>

</div>



<ul>
<li>
<a href="https://github.com/avdi/dotenv_elixir">Dotenv</a>: A port of dotenv to Elixir.</li>
<li>
<a href="https://github.com/ericmj/decimal">Decimal</a>: Arbitrary precision decimal arithmetic.</li>
<li>
<a href="https://github.com/lexhide/xandra">Xandra</a>: Fast, simple, and robust Cassandra/ScyllaDB driver for Elixir.</li>
<li>
<a href="https://github.com/zyro/elixir-uuid">Elixir UUID</a>: UUID generator and utilities for Elixir. See RFC 4122.</li>
</ul>

<p>Well, now that we have our dependencies defined we can run it in our terminal emulator:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight shell"><code><span class="nv">$ </span>mix deps.get
</code></pre>

</div>



<blockquote>
<p>The command above will install all dependencies that were defined in our <code>mix.exs</code>.</p>
</blockquote>

<p>Great! Now we can configure our environment variables for the project within <code>.env</code>.</p>

<h3>
  
  
  Configuring .env
</h3>

<p>Well, let's now create a file called <code>.env</code> at the root of our project (that's right, at the same level as our <code>mix.exs</code>). It will be responsible for defining the first configurations of our project, including the environment variables that will be used to connect our cluster.</p>

<p>When creating the file and opening it in the code editor, we will define:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>SCYLLADB_USERNAME=
SCYLLADB_PASSWORD=
SCYLLADB_NODE=
SCYLLADB_KEYSPACE=
SCYLLADB_TABLE=
</code></pre>

</div>



<ul>
<li>
<code>SCYLLADB_USERNAME</code>: username configured to connect to ScyllaDB.</li>
<li>
<code>SCYLLADB_PASSWORD</code>: password configured for the user.</li>
<li>
<code>SCYLLADB_NODE</code>: complete url to connect to our node, you can enter just one url (such as <code>localhost:9042</code> for example) or define the complete nodes generated separated by a comma (such as <code>scylla-node1.com,scylla- node-2.com,scylla-node-3.com</code>).</li>
<li>
<code>SCYLLADB_KEYSPACE</code>: the keyspace generated for our application.</li>
<li>
<code>SCYLLADB_TABLE</code>: table that will be used for the respective keyspace.</li>
</ul>

<p>This way our .env should look like:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>SCYLLADB_USERNAME=scylla
SCYLLADB_PASSWORD=scylla
SCYLLADB_NODE=localhost:9042
SCYLLADB_KEYSPACE=media_player
SCYLLADB_TABLE=songs
</code></pre>

</div>



<p>Perfect! Now that our connection files are ready, we can start structuring the project, shall we?</p>

<h3>
  
  
  Defining our connection module
</h3>

<p>It is elegant and interesting to separate the connection module in a separate area of our project, allowing for more practical maintenance and attractive organization, so let's create two directories with the path <code>lib/media_player/config</code>. This directory will be responsible for storing two main configuration files: the file for connecting to the Cluster and the file for defining the keyspace and table.</p>

<p>Well, let's create two files inside the <code>lib/media_player/config</code> directory, called <code>connection.ex</code> and <code>database.ex</code>. This way our directory structure will now be:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>.
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ lib
‚îÇ   ‚îú‚îÄ‚îÄ media_player
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ connection.ex
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.ex
‚îÇ   ‚îî‚îÄ‚îÄ media_player.ex
‚îú‚îÄ‚îÄ mix.exs
</code></pre>

</div>



<blockquote>
<p>Yes, I omitted the <code>deps</code> directory because it contains the dependencies, that is, nothing that we are going to modify manually, don't worry, in addition to omitting the <code>test</code> directory because it will contain the tests that can be implemented, but, no let's implement it for now.</p>
</blockquote>

<p>Well, now we can define the connection to our cluster, starting with the <code>database.ex</code> file.<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight elixir"><code><span class="k">defmodule</span> <span class="no">MediaPlayer</span><span class="o">.</span><span class="no">Config</span><span class="o">.</span><span class="no">Database</span> <span class="k">do</span>
  <span class="kn">import</span> <span class="no">Dotenv</span>

  <span class="n">load</span><span class="p">()</span>

  <span class="k">def</span> <span class="n">start_link</span> <span class="k">do</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">[</span>
      <span class="ss">username:</span> <span class="no">System</span><span class="o">.</span><span class="n">get_env</span><span class="p">(</span><span class="s2">"SCYLLADB_USERNAME"</span><span class="p">),</span>
      <span class="ss">password:</span> <span class="no">System</span><span class="o">.</span><span class="n">get_env</span><span class="p">(</span><span class="s2">"SCYLLADB_PASSWORD"</span><span class="p">)</span>
    <span class="p">]</span>

    <span class="p">{</span><span class="ss">:ok</span><span class="p">,</span> <span class="n">cluster</span><span class="p">}</span> <span class="o">=</span>
      <span class="no">Xandra</span><span class="o">.</span><span class="no">Cluster</span><span class="o">.</span><span class="n">start_link</span><span class="p">(</span>
        <span class="ss">sync_connect:</span> <span class="ss">:infinity</span><span class="p">,</span>
        <span class="ss">authentication:</span> <span class="p">{</span><span class="no">Xandra</span><span class="o">.</span><span class="no">Authenticator</span><span class="o">.</span><span class="no">Password</span><span class="p">,</span> <span class="n">options</span><span class="p">},</span>
        <span class="ss">nodes:</span>
          <span class="no">System</span><span class="o">.</span><span class="n">get_env</span><span class="p">(</span><span class="s2">"SCYLLADB_NODE"</span><span class="p">)</span>
          <span class="o">|&gt;</span> <span class="no">String</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span>
      <span class="p">)</span>

    <span class="n">cluster</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

</div>



<p>In this file we:</p>

<ul>
<li>We import the <code>Dotenv</code> library to manage the variables defined in our <code>.env</code> file;</li>
<li>We load the variables with the <code>load()</code> function that comes from the <code>Dotenv</code> library;</li>
<li>We created a function named <code>start_link</code> that will be responsible for starting the connection link with our cluster;</li>
<li>In the function we define the <code>username</code> and <code>password</code> receiving these values from the <code>.env</code> file;</li>
<li>We initialize the cluster with the function coming from <code>Xandra</code> with the name <code>Xandra.Cluster.start_link</code>, responsible for starting a connection link with the cluster

<ul>
<li>In this function we define that <code>sync_connect</code> is with value <code>:infinity</code>! This means that it will try to make the connection with an infinite expected response time (that is, the module will wait as long as necessary to make the complete connection of all nodes). To read more about click <a href="https://hexdocs.pm/xandra/Xandra.Cluster.html#start_link/1">here</a>;</li>
<li>We define that we are going to perform authentication and pass <code>options</code> (which was defined previously) as a parameter;</li>
<li>We define our nodes by loading from our <code>.env</code> file and performing a division with the commas found, distributing them in a list (<code>nodes</code> expects a list of urls to make the connection, which is why the split is necessary to create this list) . If you use ScyllaDB Cloud, this is what will make everything work perfectly;</li>
</ul>


</li>
<li>We return the cluster with the connection ready.</li>
</ul>

<p>Perfect! Our connection file is ready. Now let's configure a simple area that will only be responsible for returning the keyspace and the table, called <code>connection.ex</code>:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight elixir"><code><span class="k">defmodule</span> <span class="no">MediaPlayer</span><span class="o">.</span><span class="no">Config</span><span class="o">.</span><span class="no">Connection</span> <span class="k">do</span>
  <span class="kn">import</span> <span class="no">Dotenv</span>

  <span class="n">load</span><span class="p">()</span>

  <span class="k">def</span> <span class="n">keyspace</span><span class="p">()</span> <span class="k">do</span>
    <span class="no">System</span><span class="o">.</span><span class="n">get_env</span><span class="p">(</span><span class="s2">"SCYLLADB_KEYSPACE"</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="n">table</span><span class="p">()</span> <span class="k">do</span>
    <span class="no">System</span><span class="o">.</span><span class="n">get_env</span><span class="p">(</span><span class="s2">"SCYLLADB_TABLE"</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

</div>



<p>Basically the only functionality of this module is to have two functions to return the keyspace and the table that we will be using, without the need to always use the <code>.env</code> library!</p>

<h2>
  
  
  Implementing actions with the database
</h2>

<p>Well, now is another important point: as our project will have commands, therefore, it would be interesting to create a specific module to handle these commands, right? Perfect! However, before that, what do you think about creating a module to execute queries in the database, so we can centralize where the queries will be executed.</p>

<p>Well, this is the time to create a file in <code>lib/media_player</code> with the name <code>actions.ex</code>. So our directory structure will look like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>.
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ lib
‚îÇ   ‚îú‚îÄ‚îÄ media_player
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ actions.ex
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ connection.ex
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.ex
‚îÇ   ‚îî‚îÄ‚îÄ media_player.ex
‚îú‚îÄ‚îÄ mix.exs
</code></pre>

</div>



<p>Wonder! With the file created we can now create two specific functions, but why two? Simple: the <code>Xandra.Cluster.execute</code> function has two variations, the first with two parameters (the cluster and the query to be executed) and the second with three parameters (the cluster, the query to be executed and the parameters, being a list that is mainly used to prepare our query).</p>

<p>Let's go then, our module should look like this:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight elixir"><code><span class="k">defmodule</span> <span class="no">MediaPlayer</span><span class="o">.</span><span class="no">Actions</span> <span class="k">do</span>
  <span class="k">def</span> <span class="n">cluster</span><span class="p">,</span> <span class="k">do</span><span class="p">:</span> <span class="no">MediaPlayer</span><span class="o">.</span><span class="no">Config</span><span class="o">.</span><span class="no">Database</span><span class="o">.</span><span class="n">start_link</span><span class="p">()</span>

  <span class="k">def</span> <span class="n">run_query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span> <span class="k">do</span>
    <span class="k">case</span> <span class="no">Xandra</span><span class="o">.</span><span class="no">Cluster</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cluster</span><span class="p">(),</span> <span class="n">query</span><span class="p">)</span> <span class="k">do</span>
      <span class="p">{</span><span class="ss">:ok</span><span class="p">,</span> <span class="n">result</span><span class="p">}</span> <span class="o">-&gt;</span>
        <span class="n">result</span>

      <span class="p">{</span><span class="ss">:error</span><span class="p">,</span> <span class="n">error</span><span class="p">}</span> <span class="o">-&gt;</span>
        <span class="no">IO</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="n">run_query</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">prepared</span> <span class="o">=</span> <span class="no">Xandra</span><span class="o">.</span><span class="no">Cluster</span><span class="o">.</span><span class="n">prepare!</span><span class="p">(</span><span class="n">cluster</span><span class="p">(),</span> <span class="n">query</span><span class="p">)</span>

    <span class="k">case</span> <span class="no">Xandra</span><span class="o">.</span><span class="no">Cluster</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cluster</span><span class="p">(),</span> <span class="n">prepared</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span> <span class="k">do</span>
      <span class="p">{</span><span class="ss">:ok</span><span class="p">,</span> <span class="n">result</span><span class="p">}</span> <span class="o">-&gt;</span>
        <span class="n">result</span>

      <span class="p">{</span><span class="ss">:error</span><span class="p">,</span> <span class="n">error</span><span class="p">}</span> <span class="o">-&gt;</span>
        <span class="no">IO</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

</div>



<p>In this file we:</p>

<ul>
<li>We define a local <code>cluster</code> function that does nothing more than initialize and return the connection link to the cluster;</li>
<li>We define a function <code>run_query/1</code> that takes just one parameter (being just the query, after all, the cluster is already a local function and we know that we will always execute actions on it);

<ul>
<li>We tried to perform the query with the function <code>Xandra.Cluster.execute</code>;</li>
<li>If the return is <code>:ok</code>, it means that everything went well, then we return the complete result (a complete map of the query);</li>
<li>If the return is <code>:error</code> it means that an error occurred when performing the query, then we inspect the specific error;</li>
</ul>


</li>
</ul>

<blockquote>
<p>An important detail is about the assignment made with <code>{:ok, result}</code> and <code>{:error, error}</code>, since in Elixir everything has a return, always being a map starting with an atom validating the return type that was given (I recommend seeing more about <a href="https://elixir-lang.org/getting-started/basic-types.html#atoms">atoms</a>), so we bind values with a map!</p>
</blockquote>

<ul>
<li>We define a function <code>run_query/2</code> that takes two parameters (only the query and the parameters to be executed):

<ul>
<li>We tried to perform the query with the <code>Xandra.Cluster.execute</code> function:</li>
<li>If the return is <code>:ok</code>, it means that everything went well, then we return the complete result (a complete map of the query);</li>
<li>If the return is <code>:error</code> it means that an error occurred when performing the query, then we inspect the specific error;</li>
</ul>


</li>
</ul>

<p>If you want to see more about how the <code>Xandra.Cluster.execute</code> function works, click <a href="https://hexdocs.pm/xandra/Xandra.Cluster.html#execute/3">here</a>.</p>

<p>A detail that you may not have noticed: both functions have the same name, however, they differ in terms of the number of parameters! This makes the magic happen with Elixir. Functions are defined along with the number of parameters they expect to receive, so I put the name of the function followed by a slash "/" with the number of parameters. If you want to know more about it, click <a href="https://elixirschool.com/en/lessons/basics/functions/#functions-and-pattern-matching-4">here</a> to better understand how Elixir works with Pattern Matching.</p>

<h2>
  
  
  Commands
</h2>

<p>Well, now is the long-awaited moment: adding the functions responsible for executing commands in our application! To do this, we will create a file in <code>lib/media_player</code> with the name <code>commands.ex</code>. This way our directory structure will be equal to:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>.
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ lib
‚îÇ   ‚îú‚îÄ‚îÄ media_player
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ actions.ex
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commands.ex
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ connection.ex
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.ex
‚îÇ   ‚îî‚îÄ‚îÄ media_player.ex
‚îú‚îÄ‚îÄ mix.exs
</code></pre>

</div>



<p>Let's start by creating the basis of our entire module:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight elixir"><code><span class="k">defmodule</span> <span class="no">MediaPlayer</span><span class="o">.</span><span class="no">Commands</span> <span class="k">do</span>
  <span class="n">alias</span> <span class="no">MediaPlayer</span><span class="o">.</span><span class="no">Actions</span><span class="p">,</span> <span class="ss">as:</span> <span class="no">Actions</span>
  <span class="n">alias</span> <span class="no">MediaPlayer</span><span class="o">.</span><span class="no">Config</span><span class="o">.</span><span class="no">Connection</span><span class="p">,</span> <span class="ss">as:</span> <span class="no">Connection</span>

  <span class="k">defp</span> <span class="n">keyspace</span><span class="p">,</span> <span class="k">do</span><span class="p">:</span> <span class="no">Connection</span><span class="o">.</span><span class="n">keyspace</span><span class="p">()</span>
  <span class="k">defp</span> <span class="n">table</span><span class="p">,</span> <span class="k">do</span><span class="p">:</span> <span class="no">Connection</span><span class="o">.</span><span class="n">table</span><span class="p">()</span>
<span class="k">end</span>
</code></pre>

</div>



<p>Basically above we defined that we will have:</p>

<ul>
<li>The alias <code>Actions</code> to refer to the <code>MediaPlayer.Actions</code> module;</li>
<li>The alias <code>Connection</code> to refer to the <code>MediaPlayer.Config.Connection</code> module;</li>
<li>The private function <code>keyspace</code> that returns the keyspace value that we will use;</li>
<li>The private function <code>table</code> that returns the table value that we will use;</li>
</ul>

<p>Well, now we can start implementing the commands, shall we?</p>

<h3>
  
  
  Add
</h3>

<p>Well, this command will be used to add songs to our database. Therefore, we will separate it into two main functions, namely <code>add</code> and <code>add_from</code>, which receive four parameters to be executed. The <code>add</code> function will only collect the data to be inserted:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight elixir"><code><span class="k">defmodule</span> <span class="no">MediaPlayer</span><span class="o">.</span><span class="no">Commands</span> <span class="k">do</span>
  <span class="n">alias</span> <span class="no">MediaPlayer</span><span class="o">.</span><span class="no">Actions</span><span class="p">,</span> <span class="ss">as:</span> <span class="no">Actions</span>
  <span class="n">alias</span> <span class="no">MediaPlayer</span><span class="o">.</span><span class="no">Config</span><span class="o">.</span><span class="no">Connection</span><span class="p">,</span> <span class="ss">as:</span> <span class="no">Connection</span>

  <span class="k">defp</span> <span class="n">keyspace</span><span class="p">,</span> <span class="k">do</span><span class="p">:</span> <span class="no">Connection</span><span class="o">.</span><span class="n">keyspace</span><span class="p">()</span>
  <span class="k">defp</span> <span class="n">table</span><span class="p">,</span> <span class="k">do</span><span class="p">:</span> <span class="no">Connection</span><span class="o">.</span><span class="n">table</span><span class="p">()</span>

  <span class="k">def</span> <span class="n">add_from</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">album</span><span class="p">,</span> <span class="n">artist</span><span class="p">,</span> <span class="n">created</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">query</span> <span class="o">=</span>
      <span class="s2">"INSERT INTO </span><span class="si">#{</span><span class="n">keyspace</span><span class="p">()</span><span class="si">}</span><span class="s2">.</span><span class="si">#{</span><span class="n">table</span><span class="p">()</span><span class="si">}</span><span class="s2"> (id, title, album, artist, created_at) VALUES (?, ?, ?, ?, ?);"</span>

    <span class="p">{</span><span class="ss">:ok</span><span class="p">,</span> <span class="n">created</span><span class="p">,</span> <span class="n">_</span><span class="p">}</span> <span class="o">=</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">from_iso8601</span><span class="p">(</span><span class="n">created</span> <span class="o">&lt;&gt;</span> <span class="s2">"T00:00:00Z"</span><span class="p">)</span>

    <span class="no">Actions</span><span class="o">.</span><span class="n">run_query</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="p">[</span><span class="no">UUID</span><span class="o">.</span><span class="n">uuid4</span><span class="p">(),</span> <span class="n">title</span><span class="p">,</span> <span class="n">album</span><span class="p">,</span> <span class="n">artist</span><span class="p">,</span> <span class="n">created</span><span class="p">])</span>

    <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"Song added!"</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="n">add</span><span class="p">()</span> <span class="k">do</span>
    <span class="n">title</span> <span class="o">=</span> <span class="no">IO</span><span class="o">.</span><span class="n">gets</span><span class="p">(</span><span class="s2">"Enter the title of the song: "</span><span class="p">)</span> <span class="o">|&gt;</span> <span class="no">String</span><span class="o">.</span><span class="n">trim</span><span class="p">()</span>
    <span class="n">album</span> <span class="o">=</span> <span class="no">IO</span><span class="o">.</span><span class="n">gets</span><span class="p">(</span><span class="s2">"Enter the album of the song: "</span><span class="p">)</span> <span class="o">|&gt;</span> <span class="no">String</span><span class="o">.</span><span class="n">trim</span><span class="p">()</span>
    <span class="n">artist</span> <span class="o">=</span> <span class="no">IO</span><span class="o">.</span><span class="n">gets</span><span class="p">(</span><span class="s2">"Enter the artist of the song: "</span><span class="p">)</span> <span class="o">|&gt;</span> <span class="no">String</span><span class="o">.</span><span class="n">trim</span><span class="p">()</span>

    <span class="n">created</span> <span class="o">=</span>
      <span class="no">IO</span><span class="o">.</span><span class="n">gets</span><span class="p">(</span><span class="s2">"Enter the date the song was created (YYYY-MM-DD): "</span><span class="p">)</span>
      <span class="o">|&gt;</span> <span class="no">String</span><span class="o">.</span><span class="n">trim</span><span class="p">()</span>

    <span class="n">add_from</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">album</span><span class="p">,</span> <span class="n">artist</span><span class="p">,</span> <span class="n">created</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

</div>



<p>Well, both functions are very specific, so let‚Äôs give an example of each one:</p>

<ul>
<li>The <code>add</code> function will:

<ul>
<li>Collect the song title;</li>
<li>Collect the music album;</li>
<li>Collect the song artist;</li>
<li>Collect the creation date of the song;</li>
<li>Invoke the <code>add_from</code> function passing the collected values as parameters;</li>
</ul>


</li>
<li>The <code>add_from/4</code> function will:

<ul>
<li>Receive four parameters;</li>
<li>Create the <code>query</code> that will be executed;</li>
<li>Convert the date format to ensure bind compatibility with Xandra;</li>
<li>Call the function to perform the query passing two parameters: the query and additional options in a list format (as explained previously)</li>
<li>Then just show the message on the screen when the song is inserted!</li>
</ul>


</li>
</ul>

<p>Another point: the "|&gt;" pipe in Elixir works like the "|" pipe of Unix shells, being used to pass the return of a function as the first parameter of the next. Read more about pipes <a href="https://elixirschool.com/en/lessons/basics/pipe_operator">here</a>.</p>

<p>Well, now we have the function responsible for adding a created song! Let's go next time?</p>

<h3>
  
  
  List
</h3>

<p>Now let's create a function responsible for listing all the songs we have added. Therefore, we will have as a result:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight elixir"><code>  <span class="k">def</span> <span class="n">list</span>
    <span class="n">query</span> <span class="o">=</span> <span class="s2">"SELECT id, title, album, artist, created_at FROM </span><span class="si">#{</span><span class="n">keyspace</span><span class="p">()</span><span class="si">}</span><span class="s2">.</span><span class="si">#{</span><span class="n">table</span><span class="p">()</span><span class="si">}</span><span class="s2">;"</span>

    <span class="no">Actions</span><span class="o">.</span><span class="n">run_query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="o">|&gt;</span> <span class="no">Enum</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="k">fn</span> <span class="p">%{</span>
                      <span class="s2">"id"</span> <span class="o">=&gt;</span> <span class="n">id</span><span class="p">,</span>
                      <span class="s2">"title"</span> <span class="o">=&gt;</span> <span class="n">title</span><span class="p">,</span>
                      <span class="s2">"album"</span> <span class="o">=&gt;</span> <span class="n">album</span><span class="p">,</span>
                      <span class="s2">"artist"</span> <span class="o">=&gt;</span> <span class="n">artist</span><span class="p">,</span>
                      <span class="s2">"created_at"</span> <span class="o">=&gt;</span> <span class="n">created_at</span>
                    <span class="p">}</span> <span class="o">-&gt;</span>
      <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span>
        <span class="s2">"ID: </span><span class="si">#{</span><span class="n">id</span><span class="si">}</span><span class="s2"> | Title: </span><span class="si">#{</span><span class="n">title</span><span class="si">}</span><span class="s2"> | Album: </span><span class="si">#{</span><span class="n">album</span><span class="si">}</span><span class="s2"> | Artist: </span><span class="si">#{</span><span class="n">artist</span><span class="si">}</span><span class="s2"> | Created At: </span><span class="si">#{</span><span class="n">created_at</span><span class="si">}</span><span class="s2">"</span>
      <span class="p">)</span>
    <span class="k">end</span><span class="p">)</span>
  <span class="k">end</span>
</code></pre>

</div>



<p>The <code>list</code> function does not receive any parameters, after all, it will print the songs that were added to the screen, like this:</p>

<ul>
<li>We define a query by selecting <code>id, title, album, artist, created_at</code> and to define the <code>keyspace</code> and <code>table</code> remember that we already have two functions that return these values!</li>
<li>We tried to perform a simple query (which has no additional options besides <code>query</code>) and its return we passed to an <code>Enum.each</code> (similar to a <code>foreach</code> in other programming languages);

<ul>
<li>Within each we pass an anonymous function responsible for handling the return, which in this case expects to receive a map with the respective fields that were selected;</li>
<li>We print specific values;</li>
</ul>


</li>
<li>In the end this will be our return;</li>
</ul>

<p>An important detail: in this case, <code>run_query</code> would return more than one value if we had multiple rows inserted, right? Well, <code>run_query</code> returns a complete list of maps with their respective values, so we use <code>Enum.each</code> to treat each index in the list we have.</p>

<h3>
  
  
  Delete
</h3>

<p>Well, the <code>delete</code> command is a little more complex because we need the user to type the index he wants to delete, validating it against the list of indexes that were returned! Therefore, the implemented function would result in something like:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight elixir"><code>  <span class="k">def</span> <span class="n">delete</span><span class="p">()</span> <span class="k">do</span>
    <span class="n">query</span> <span class="o">=</span> <span class="s2">"SELECT id, title, album, artist, created_at FROM </span><span class="si">#{</span><span class="n">keyspace</span><span class="p">()</span><span class="si">}</span><span class="s2">.</span><span class="si">#{</span><span class="n">table</span><span class="p">()</span><span class="si">}</span><span class="s2">;"</span>

    <span class="n">songs</span> <span class="o">=</span>
      <span class="no">Actions</span><span class="o">.</span><span class="n">run_query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
      <span class="o">|&gt;</span> <span class="no">Enum</span><span class="o">.</span><span class="n">with_index</span><span class="p">(</span><span class="k">fn</span> <span class="p">%{</span>
                              <span class="s2">"id"</span> <span class="o">=&gt;</span> <span class="n">id</span><span class="p">,</span>
                              <span class="s2">"title"</span> <span class="o">=&gt;</span> <span class="n">title</span><span class="p">,</span>
                              <span class="s2">"album"</span> <span class="o">=&gt;</span> <span class="n">album</span><span class="p">,</span>
                              <span class="s2">"artist"</span> <span class="o">=&gt;</span> <span class="n">artist</span><span class="p">,</span>
                              <span class="s2">"created_at"</span> <span class="o">=&gt;</span> <span class="n">created_at</span>
                            <span class="p">},</span>
                            <span class="n">index</span> <span class="o">-&gt;</span>
        <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span>
          <span class="s2">"Index: </span><span class="si">#{</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s2"> | Title: </span><span class="si">#{</span><span class="n">title</span><span class="si">}</span><span class="s2"> | Album: </span><span class="si">#{</span><span class="n">album</span><span class="si">}</span><span class="s2"> | Artist: </span><span class="si">#{</span><span class="n">artist</span><span class="si">}</span><span class="s2"> | Created At: </span><span class="si">#{</span><span class="n">created_at</span><span class="si">}</span><span class="s2">"</span>
        <span class="p">)</span>

        <span class="p">%{</span><span class="ss">id:</span> <span class="n">id</span><span class="p">,</span> <span class="ss">title:</span> <span class="n">title</span><span class="p">,</span> <span class="ss">album:</span> <span class="n">album</span><span class="p">,</span> <span class="ss">artist:</span> <span class="n">artist</span><span class="p">,</span> <span class="ss">created_at:</span> <span class="n">created_at</span><span class="p">}</span>
      <span class="k">end</span><span class="p">)</span>

    <span class="p">{</span><span class="n">input</span><span class="p">,</span> <span class="n">_</span><span class="p">}</span> <span class="o">=</span> <span class="no">IO</span><span class="o">.</span><span class="n">gets</span><span class="p">(</span><span class="s2">"Enter the index of the song you want to delete: "</span><span class="p">)</span> <span class="o">|&gt;</span> <span class="no">Integer</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>

    <span class="k">case</span> <span class="no">Enum</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">songs</span><span class="p">,</span> <span class="n">input</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">do</span>
      <span class="p">%{}</span> <span class="o">=</span> <span class="n">song</span> <span class="o">-&gt;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="s2">"DELETE FROM </span><span class="si">#{</span><span class="n">keyspace</span><span class="p">()</span><span class="si">}</span><span class="s2">.</span><span class="si">#{</span><span class="n">table</span><span class="p">()</span><span class="si">}</span><span class="s2"> WHERE id = ? AND created_at = ?;"</span>

        <span class="no">Actions</span><span class="o">.</span><span class="n">run_query</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="p">[</span><span class="n">song</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">song</span><span class="o">.</span><span class="n">created_at</span><span class="p">])</span>

        <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"Song deleted!"</span><span class="p">)</span>

      <span class="no">nil</span> <span class="o">-&gt;</span>
        <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"Invalid index."</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
</code></pre>

</div>



<p>Well, basically we have in this function:</p>

<ul>
<li>Definition of the <code>query</code> returning all added songs;</li>
<li>Listing similar to the previously implemented <code>list</code> function;

<ul>
<li>We try to perform the query in <code>Actions.run_query</code> and pass it to <code>Enum.with_index</code> to have the indexes;</li>
<li>This time instead of presenting the <code>id</code> of the song we present a manual index (instead of starting with 0 it starts with 1, hence <code>index + 1</code>), in which the user will type (more practical to type a number integer than a UUID isn't it?);</li>
<li>We print the values;</li>
<li>We added the complete list in <code>songs</code>;</li>
</ul>


</li>
<li>We wait for the user to make an entry stating which index he wants to delete and we parse the entry that will be saved in <code>input</code>;</li>
<li>We check whether the index entered is present in <code>songs</code>;

<ul>
<li>If you are:</li>
<li>We create the query;</li>
<li>We tried to perform the query in <code>Actions.run_query</code> and added the list of options to bind to the query as a parameter;</li>
<li>We print the message informing that the song has been deleted;</li>
<li>If not:</li>
<li>We print that the index is invalid</li>
</ul>


</li>
</ul>

<p>This way we finish our function to delete a song!</p>

<h3>
  
  
  Stress
</h3>

<p>Great! The commands that necessarily manipulate user input are finished! Now let's create an additional command that will be responsible for performing a stress test on our database. We will define two functions, namely the <code>stress</code> function that will initialize the command, in addition to a private function with the name <code>generate_stress_query</code> that receives a parameter with the name <code>some_id</code>, with the index being inserted.</p>

<p>First of all, we must add the following section at the beginning of our module:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight elixir"><code><span class="k">defmodule</span> <span class="no">MediaPlayer</span><span class="o">.</span><span class="no">Commands</span> <span class="k">do</span>
  <span class="kn">use</span> <span class="no">Task</span>
  <span class="o">...</span>
</code></pre>

</div>



<p>With <code>Task</code> we can perform asynchronous calls with better practicality and performance. To read more click <a href="https://hexdocs.pm/elixir/1.12/Task.html">here</a>.</p>

<p>Thus, implementing our functions:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight elixir"><code>  <span class="k">defp</span> <span class="n">generate_stress_query</span><span class="p">(</span><span class="n">some_id</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">current_date</span> <span class="o">=</span> <span class="no">Date</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="no">Date</span><span class="o">.</span><span class="n">utc_today</span><span class="p">())</span>

    <span class="s2">"INSERT INTO </span><span class="si">#{</span><span class="n">keyspace</span><span class="p">()</span><span class="si">}</span><span class="s2">.</span><span class="si">#{</span><span class="n">table</span><span class="p">()</span><span class="si">}</span><span class="s2"> (
      id, title, album, artist, created_at
    ) VALUES (
      </span><span class="si">#{</span><span class="no">UUID</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="si">}</span><span class="s2">,
      'Test Song </span><span class="si">#{</span><span class="n">some_id</span><span class="si">}</span><span class="s2">',
      'Test Artist </span><span class="si">#{</span><span class="n">some_id</span><span class="si">}</span><span class="s2">',
      'Test Album </span><span class="si">#{</span><span class="n">some_id</span><span class="si">}</span><span class="s2">',
      '</span><span class="si">#{</span><span class="n">current_date</span><span class="si">}</span><span class="s2">'
    );"</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="n">stress</span>
    <span class="n">start</span> <span class="o">=</span> <span class="no">Time</span><span class="o">.</span><span class="n">utc_now</span><span class="p">()</span>
    <span class="n">cluster</span> <span class="o">=</span> <span class="no">MediaPlayer</span><span class="o">.</span><span class="no">Config</span><span class="o">.</span><span class="no">Database</span><span class="o">.</span><span class="n">start_link</span><span class="p">()</span>

    <span class="c1"># Simple stress test</span>
    <span class="mi">1</span><span class="o">..</span><span class="mi">100_000</span>
    <span class="o">|&gt;</span> <span class="no">Task</span><span class="o">.</span><span class="n">async_stream</span><span class="p">(</span>
      <span class="k">fn</span> <span class="n">id</span> <span class="o">-&gt;</span>
        <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"[</span><span class="si">#{</span><span class="n">id</span><span class="si">}</span><span class="s2">] Adding seed"</span><span class="p">)</span>
        <span class="no">Xandra</span><span class="o">.</span><span class="no">Cluster</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cluster</span><span class="p">,</span> <span class="n">generate_stress_query</span><span class="p">(</span><span class="n">id</span><span class="p">))</span>
      <span class="k">end</span><span class="p">,</span>
      <span class="ss">max_concurrency:</span> <span class="mi">500</span>
    <span class="p">)</span>
    <span class="o">|&gt;</span> <span class="no">Enum</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

    <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"Time taken: </span><span class="si">#{</span><span class="no">Time</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="no">Time</span><span class="o">.</span><span class="n">utc_now</span><span class="p">(),</span> <span class="n">start</span><span class="p">,</span> <span class="ss">:second</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds"</span><span class="p">)</span>
  <span class="k">end</span>
</code></pre>

</div>



<p>Basically we have:</p>

<ul>
<li>
<code>stress</code> function:

<ul>
<li>Mark the start time of the function with <code>Time.utc_now()</code>;</li>
<li>Initializes the cluster manually for better performance and handling.</li>
<li>We initiate a call from 1 to 100000 that goes asynchronously:</li>
<li>Define an anonymous function that receives an <code>id</code>;</li>
<li>We print that we are adding a certain index;</li>
<li>We tried to perform the query with <code>Xandra.Cluster.execute</code> by calling the <code>generate_stress_query</code> function, responsible for generating a complete query with the <code>id</code> provided;</li>
<li>We set a <code>max_concurrency</code> of 500 to limit the number of asynchronous calls;</li>
<li>We format it into a list;</li>
<li>We print the time spent to carry out the entire test, calculating the difference between the current time and the start time in seconds;</li>
</ul>


</li>
<li>
<code>generate_stress_query</code> function:

<ul>
<li>Receives an <code>id</code> as a parameter to generate the query;</li>
<li>Sets the current date to insert;</li>
<li>Returns the complete query already formatted;</li>
</ul>


</li>
</ul>

<p>Well, that way our functions for the stress test are ready! Now we must implement the command inputs that a user can enter!</p>

<h2>
  
  
  Implementing user interaction
</h2>

<p>Let's modify our main module, <code>MediaPlayer</code> in the <code>media_player.ex</code> file! Well, first let's define an alias for the commands:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight elixir"><code><span class="k">defmodule</span> <span class="no">MediaPlayer</span>
  <span class="n">alias</span> <span class="no">MediaPlayer</span><span class="o">.</span><span class="no">Commands</span><span class="p">,</span> <span class="ss">as:</span> <span class="no">Commands</span>
<span class="k">end</span>
</code></pre>

</div>



<p>The alias will be used to refer to the <code>MediaPlayer.Commands</code> module!</p>

<p>The first function we will implement is <code>loop</code>, which will be responsible for directing the commands, receiving user input and remaining in an infinite loop always waiting for input, see:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight elixir"><code>  <span class="k">def</span> <span class="k">loop</span> <span class="k">do</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"-------------------------------------"</span><span class="p">)</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"Type any command: "</span><span class="p">)</span>
    <span class="n">command</span> <span class="o">=</span> <span class="no">IO</span><span class="o">.</span><span class="n">gets</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span> <span class="o">|&gt;</span> <span class="no">String</span><span class="o">.</span><span class="n">trim</span><span class="p">()</span>

    <span class="k">case</span> <span class="n">command</span> <span class="k">do</span>
      <span class="s2">"!add"</span> <span class="o">-&gt;</span>
        <span class="no">Commands</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
        <span class="k">loop</span><span class="p">()</span>

      <span class="s2">"!list"</span> <span class="o">-&gt;</span>
        <span class="no">Commands</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="k">loop</span><span class="p">()</span>

      <span class="s2">"!delete"</span> <span class="o">-&gt;</span>
        <span class="no">Commands</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
        <span class="k">loop</span><span class="p">()</span>

      <span class="s2">"!stress"</span> <span class="o">-&gt;</span>
        <span class="no">Commands</span><span class="o">.</span><span class="n">stress</span><span class="p">()</span>
        <span class="k">loop</span><span class="p">()</span>

      <span class="s2">"exit"</span> <span class="o">-&gt;</span>
        <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"Bye bye!"</span><span class="p">)</span>
        <span class="ss">:OK</span>

      <span class="n">_</span> <span class="o">-&gt;</span>
        <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"Command not found!"</span><span class="p">)</span>
        <span class="k">loop</span><span class="p">()</span>
    <span class="k">end</span>
  <span class="k">end</span>
</code></pre>

</div>



<p>Basically we wait for user input with a command and enter a <code>case</code>:</p>

<ul>
<li>
<code>!add</code> invokes the <code>Commands.add()</code> function;</li>
<li>
<code>!list</code> invokes the <code>Commands.list()</code> function;</li>
<li>
<code>!delete</code> invokes the <code>Commands.delete()</code> function;</li>
<li>
<code>!stress</code> invokes the <code>Commands.stress()</code> function;</li>
<li>
<code>exit</code> prints a goodbye message and returns <code>:ok</code>, defining that the function no longer enters a recursive loop, ending our application;</li>
<li>
<code>_</code> prints a command not found message and enters a recursive loop, waiting for new input;</li>
</ul>

<p>Well, now we have our main function ready! But how are we going to execute it? Simple, let's create a <code>start</code> function that will be responsible for starting our application, in addition to a <code>run</code> function, which will be the function invoked by the initial <code>start</code> function, see:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight elixir"><code>  <span class="k">def</span> <span class="n">start</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">run</span><span class="p">()</span>
    <span class="p">{</span><span class="ss">:ok</span><span class="p">,</span> <span class="n">self</span><span class="p">()}</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="n">run</span> <span class="k">do</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"-------------------------------------"</span><span class="p">)</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"- ScyllaDB Cloud Elixir Media Player -"</span><span class="p">)</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"- Leave a star on the repo -"</span><span class="p">)</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"-------------------------------------"</span><span class="p">)</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"Here some possibilities"</span><span class="p">)</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">" !add - add new song"</span><span class="p">)</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">" !list - list all songs"</span><span class="p">)</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">" !delete - delete a specific song"</span><span class="p">)</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">" !stress - stress testing with mocked data"</span><span class="p">)</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"-------------------------------------"</span><span class="p">)</span>

    <span class="k">loop</span><span class="p">()</span>
  <span class="k">end</span>
</code></pre>

</div>



<p>Basically we have:</p>

<ul>
<li>
<code>start</code> function:

<ul>
<li>It receives two parameters, but we will not use them, so we define them as <code>_</code>;</li>
<li>Invokes the <code>run</code> function;</li>
<li>Returns <code>{:ok, self()}</code> to define that the function was executed successfully, closing our application;</li>
</ul>


</li>
<li>
<code>run</code> function:

<ul>
<li>Print a welcome message;</li>
<li>Prints a message with command possibilities;</li>
<li>Invokes the <code>loop</code> function to start the infinite loop;</li>
</ul>


</li>
</ul>

<p>This concludes our complete application! Now are we going to execute it?</p>

<h2>
  
  
  Running our application
</h2>

<p>Well, now that we have our application ready, let's execute the command:<br>
</p>

<div class="highlight js-code-highlight">
<pre class="highlight plaintext"><code>$ mix run
</code></pre>

</div>



<p>This way we can start interacting with the application!</p>

<p>See a demo of the project:</p>

<p><a href="https://asciinema.org/a/608562"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--_80iLfUQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://asciinema.org/a/608562.svg" alt="asciicast" width="800" height="545"></a></p>

<h2>
  
  
  Conclusion
</h2>

<p>Thank you very much if you read this far! The purpose of this article was to demonstrate how we can use ScyllaDB with Elixir, making a simple demonstration using Xandra as responsible for the connection between the two. I highly recommend following content from <a href="https://university.scylladb.com/">ScyllaDB University</a> for more quality educational content, as well as seeing articles about using ScyllaDB in general with <a href="https://dev.to/danielhe4rt">DanielHe4rt</a> and <a href="https://dev.to/cherryramatis">Cherry Ramatis</a>! Both are always contributing and publishing magnificent content.</p>

<p>I also recommend getting to know the project <a href="https://github.com/scylladb/scylla-cloud-getting-started">Getting Started with ScyllaDB Cloud</a> which demonstrates the use of ScyllaDB in general, but, delving a little deeper into the use of ScyllaDB's own platform for managing your Cloud clusters, cool isn't it?</p>

<p>In the same repository you can access the project using Elixir too, so if you want to see the complete source code, know that it is at the same link mentioned above!</p>

<p>I hope you enjoyed the content and I hope it clarified the use of ScyllaDB with Elixir. I also hope that you are even more interested in receiving more content like this or learning even more about Elixir. Thank you very much, and see you next time!</p>

 </details> 
 <hr /> 
<!-- BLOG-POST-LIST:END -->
</table>
</details>


<!-- TODO
Change the 3stats boxes around, possibly two on top and one on bottom
Fix RSSfeed
Fix Spotify Playlists
Fix Socials [Portfolio, Discord, Linkedin]
In the future, add Public Repositories of Selected Projects
-->
